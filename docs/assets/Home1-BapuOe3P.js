import{bO as j,aG as L,_ as f,T as O,a0 as z,$,ao as D,ap as v,I as t,ai as s,al as e,aw as g,aA as B,am as m,aB as H,ah as r,aj as y,by as w,av as n,aD as q,ak as b,b8 as x}from"./index-DclibNt3.js";import{_ as A,a as E}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as F,o as C}from"./v-scale-screen-DBC_t__g.js";const G=["src"],J={class:"basic-info"},M={class:"info-box"},Y={key:0,class:"game-info"},K={key:1},Q={class:"song"},R={key:2},U={class:"playing-container"},W={class:"process-box"},X={class:"lyric-info"},Z={key:0,class:"lyric-box"},aa={class:"original"},ta={class:"translated"},ea={key:1,class:"lyric-empty"},sa={class:"lyric-bg"},oa=["src"],ra={__name:"Home1",setup(la){const a=j(),d=L(JSON.parse(localStorage.getItem("extraInfo"))),P=f(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=f(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),N=f(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),p=f([]),T=O(()=>{const c=a.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,_=parseInt(c[0])*60+parseInt(c[1]);let o=-1;for(let k=a.lyricData.lyric.length-1;k>=0;k--){const I=a.lyricData.lyric[k][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(I){const V=parseInt(I[1])*60+parseInt(I[2]);if(_>=V){o=k;break}}}let l=0;a.lyricData.translatedLyric.length===0?l=-(o-1)*73:l=-o*110;const h=document.querySelector(".lyric-box");return h&&(h.style.transform=`translateY(${l}px)`),o}),u=L({status:"已暂停",name:"暂无歌曲"}),S=()=>{u.status&&u.name?document.title=u.status+" - "+u.name:document.title="歌曲组件"};return z(()=>a.songData?.player?.isPaused,c=>{c?u.status="已暂停":u.status="播放中",S()}),z(()=>a.songData?.track?.title,c=>{u.name=c,S()}),$(()=>{S(),a.resetSongData()}),(c,_)=>(s(),D(t(F),{width:"1880",height:"300","box-style":{backgroundColor:c.none}},{default:v(()=>[e("div",{class:"song-container",style:g({"--theme-color":P.value,"--text-color":i.value,"--bg-color":p.value[2]||i.value,"--shadow-color":N.value,"--stress-color":p.value[3]})},[B(e("img",{id:"cover",class:m(["cover",{changing:t(a).isChanging}]),src:t(a).songData?.track?.cover,alt:"封面"},null,10,G),[[H,t(a).songData?.track?.cover]]),B(e("img",{class:m(["cover",{changing:t(a).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:E,alt:""},null,2),[[H,!t(a).songData?.track?.cover]]),e("div",J,[e("div",M,[d.some(o=>o.length>0)?(s(),r("div",Y,[d[0].length>0?(s(),D(C,{key:0,"is-bold":"",color:i.value,"content-align":"center"},{default:v(()=>[w(n(d[0][0]),1)]),_:1},8,["color"])):y("",!0),d[1].length>0?(s(),r("div",K,[q(C,{color:i.value,"content-align":"space-around"},{default:v(()=>[(s(!0),r(b,null,x(d[1].join(" | ").split(" "),(o,l)=>(s(),r("span",{key:l},n(o),1))),128))]),_:1},8,["color"])])):y("",!0)])):y("",!0),e("div",{class:m(["song-info",{"song-info2":d.length===0}])},[e("div",Q,[t(a).songData?.track?.title?(s(),D(C,{key:0,color:i.value,"is-bold":"bold"},{default:v(()=>[w(n(t(a).songData?.track?.title),1)]),_:1},8,["color"])):y("",!0),t(a).songData?.track?.author?(s(),D(C,{key:1,color:i.value,"font-size":"35px"},{default:v(()=>[w(n(t(a).songData?.track?.author),1)]),_:1},8,["color"])):y("",!0),!t(a).songData?.track?.title&&!t(a).songData?.track?.author?(s(),r("span",R,"暂无歌曲信息")):y("",!0)]),e("div",U,[e("div",{class:"sun",style:g({"animation-play-state":t(a).songData?.player?.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:g({"animation-play-state":t(a).songData?.player?.isPaused?"paused":"running"})},[(s(),r(b,null,x(8,o=>e("div",{class:"line",key:o,style:g({"--i":o})},null,4)),64))],4),e("div",{class:"eye",style:g({"animation-play-state":t(a).songData?.player?.isPaused?"paused":"running"})},null,4)],4),_[0]||(_[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",W,[e("span",null,n(t(a).songData?.player?.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:g({"--bg-color":p.value[2]||P.value,"--stress-color":p.value[3]||i.value,"--process":t(a).songData?.player?.statePercent||0})},null,4),e("span",null,n(t(a).songData?.track?.durationHuman),1)])]),e("div",X,[t(a).lyricData.lyric.length>0?(s(),r("div",Z,[t(a).lyricData.translatedLyric.length===0?(s(!0),r(b,{key:0},x(t(a).lyricData.lyric,(o,l)=>(s(),r("div",{class:m(["lyric-line",{active:l===T.value}]),key:l},[e("span",null,n(o[2]),1)],2))),128)):(s(!0),r(b,{key:1},x(t(a).lyricData.lyric,(o,l)=>(s(),r("div",{class:m(["lyric-line-translated",{active:l===T.value}]),key:l},[e("span",aa,n(o[2]),1),e("span",ta,n(t(a).lyricData.translatedLyric.find(h=>h[1]===t(a).lyricData.lyric[l][1])?.[2]||""),1)],2))),128))])):(s(),r("div",ea,"暂无歌词")),e("div",sa,[(s(),r("img",{key:t(a).songData?.track?.cover,src:t(a).songData?.track?.cover,alt:""},null,8,oa))])])],4)]),_:1},8,["box-style"]))}},ua=A(ra,[["__scopeId","data-v-0b0d187a"]]);export{ua as default};
