import{bR as da,aH as la,_ as I,T as ga,a0 as na,$ as ya,ap as w,aq as b,I as t,aj as o,am as e,ax as _,aB as ca,an as x,aC as ia,ai as n,ak as h,b8 as B,aw as i,aE as va,al as L,ba as P}from"./index-BVK8qiwG.js";import{_ as pa,a as ma}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as _a,o as T}from"./v-scale-screen-BA57R6-v.js";const ha=["src"],ka={class:"basic-info"},fa={class:"info-box"},Da={key:0,class:"game-info"},ba={key:1},xa={class:"song"},Ca={key:2},Sa={class:"playing-container"},Ia={class:"process-box"},wa={class:"lyric-info"},La={key:0,class:"lyric-box"},Pa={class:"original"},Ta={class:"translated"},Ha={key:1,class:"lyric-empty"},za={class:"lyric-bg"},Ba=["src"],Na={__name:"Home1",setup(Va){const a=da(),v=la(JSON.parse(localStorage.getItem("extraInfo"))),N=I(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=I(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),ua=I(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),C=I([]),V=ga(()=>{var f,D;const l=((D=(f=a.songData)==null?void 0:f.player)==null?void 0:D.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=a.lyricData.lyric.length-1;y>=0;y--){const m=a.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const S=parseInt(m[1])*60+parseInt(m[2]);if(c>=S){g=y;break}}}let p=0;a.lyricData.translatedLyric.length===0?p=-(g-1)*73:p=-g*110;const k=document.querySelector(".lyric-box");return k&&(k.style.transform="translateY(".concat(p,"px)")),g}),d=la({status:"已暂停",name:"暂无歌曲"}),H=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return na(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.player)==null?void 0:c.isPaused},l=>{l?d.status="已暂停":d.status="播放中",H()}),na(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.track)==null?void 0:c.title},l=>{d.name=l,H()}),ya(()=>{H(),a.resetSongData()}),(l,c)=>(o(),w(t(_a),{width:"1880",height:"300","box-style":{backgroundColor:l.none}},{default:b(()=>{var g,p,k,f,D,y,m,S,j,q,E,$,F,J,M,O,R,Y,A,G,K,Q,U,W,X,Z,aa,ta,ea,sa;return[e("div",{class:"song-container",style:_({"--theme-color":N.value,"--text-color":u.value,"--bg-color":C.value[2]||u.value,"--shadow-color":ua.value,"--stress-color":C.value[3]})},[ca(e("img",{id:"cover",class:x(["cover",{changing:t(a).isChanging}]),src:(p=(g=t(a).songData)==null?void 0:g.track)==null?void 0:p.cover,alt:"封面"},null,10,ha),[[ia,(f=(k=t(a).songData)==null?void 0:k.track)==null?void 0:f.cover]]),ca(e("img",{class:x(["cover",{changing:t(a).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ma,alt:""},null,2),[[ia,!((y=(D=t(a).songData)==null?void 0:D.track)!=null&&y.cover)]]),e("div",ka,[e("div",fa,[v.some(s=>s.length>0)?(o(),n("div",Da,[v[0].length>0?(o(),w(T,{key:0,"is-bold":"",color:u.value,"content-align":"center"},{default:b(()=>[B(i(v[0][0]),1)]),_:1},8,["color"])):h("",!0),v[1].length>0?(o(),n("div",ba,[va(T,{color:u.value,"content-align":"space-around"},{default:b(()=>[(o(!0),n(L,null,P(v[1].join(" | ").split(" "),(s,r)=>(o(),n("span",{key:r},i(s),1))),128))]),_:1},8,["color"])])):h("",!0)])):h("",!0),e("div",{class:x(["song-info",{"song-info2":v.length===0}])},[e("div",xa,[(S=(m=t(a).songData)==null?void 0:m.track)!=null&&S.title?(o(),w(T,{key:0,color:u.value,"is-bold":"bold"},{default:b(()=>{var s,r;return[B(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.title),1)]}),_:1},8,["color"])):h("",!0),(q=(j=t(a).songData)==null?void 0:j.track)!=null&&q.author?(o(),w(T,{key:1,color:u.value,"font-size":"35px"},{default:b(()=>{var s,r;return[B(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.author),1)]}),_:1},8,["color"])):h("",!0),!(($=(E=t(a).songData)==null?void 0:E.track)!=null&&$.title)&&!((J=(F=t(a).songData)==null?void 0:F.track)!=null&&J.author)?(o(),n("span",Ca,"暂无歌曲信息")):h("",!0)]),e("div",Sa,[e("div",{class:"sun",style:_({"animation-play-state":(O=(M=t(a).songData)==null?void 0:M.player)!=null&&O.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:_({"animation-play-state":(Y=(R=t(a).songData)==null?void 0:R.player)!=null&&Y.isPaused?"paused":"running"})},[(o(),n(L,null,P(8,s=>e("div",{class:"line",key:s,style:_({"--i":s})},null,4)),64))],4),e("div",{class:"eye",style:_({"animation-play-state":(G=(A=t(a).songData)==null?void 0:A.player)!=null&&G.isPaused?"paused":"running"})},null,4)],4),c[0]||(c[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",Ia,[e("span",null,i((Q=(K=t(a).songData)==null?void 0:K.player)==null?void 0:Q.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:_({"--bg-color":C.value[2]||N.value,"--stress-color":C.value[3]||u.value,"--process":((W=(U=t(a).songData)==null?void 0:U.player)==null?void 0:W.statePercent)||0})},null,4),e("span",null,i((Z=(X=t(a).songData)==null?void 0:X.track)==null?void 0:Z.durationHuman),1)])]),e("div",wa,[t(a).lyricData.lyric.length>0?(o(),n("div",La,[t(a).lyricData.translatedLyric.length===0?(o(!0),n(L,{key:0},P(t(a).lyricData.lyric,(s,r)=>(o(),n("div",{class:x(["lyric-line",{active:r===V.value}]),key:r},[e("span",null,i(s[2]),1)],2))),128)):(o(!0),n(L,{key:1},P(t(a).lyricData.lyric,(s,r)=>{var oa,ra;return o(),n("div",{class:x(["lyric-line-translated",{active:r===V.value}]),key:r},[e("span",Pa,i((oa=t(a).lyricData.translatedLyric.find(z=>z[1]===t(a).lyricData.lyric[r][1]))!=null&&oa[2]?s[2]:""),1),e("span",Ta,i(((ra=t(a).lyricData.translatedLyric.find(z=>z[1]===t(a).lyricData.lyric[r][1]))==null?void 0:ra[2])||s[2]),1)],2)}),128))])):(o(),n("div",Ha,"暂无歌词")),e("div",za,[(o(),n("img",{key:(ta=(aa=t(a).songData)==null?void 0:aa.track)==null?void 0:ta.cover,src:(sa=(ea=t(a).songData)==null?void 0:ea.track)==null?void 0:sa.cover,alt:""},null,8,Ba))])])],4)]}),_:1},8,["box-style"]))}},$a=pa(Na,[["__scopeId","data-v-0ab5a5f7"]]);export{$a as default};
