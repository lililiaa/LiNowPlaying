import{b2 as j,aC as B,B as I,v as V,D as P,C as E,a0 as k,a1 as p,u as a,U as o,Y as e,a8 as y,ad as N,Z as _,au as z,T as l,W as m,aQ as T,a7 as i,ah as Y,X as D,a$ as b}from"./index-DAzvFF62.js";import{_ as q,a as F}from"./plugin-vueexport-helper-DwRewS5w.js";import{u as J}from"./color-thief-DF3QbzqH.js";import{T as M,o as x}from"./v-scale-screen-CZtUN8GV.js";const O=["src"],Q={class:"basic-info"},U={class:"info-box"},W={key:0,class:"game-info"},X={key:1},Z={class:"song"},A={key:2},G={class:"playing-container"},K={class:"process-box"},R={class:"lyric-info"},tt={key:0,class:"lyric-box"},at={class:"original"},et={class:"translated"},st={key:1,class:"lyric-empty"},ot={class:"lyric-bg"},nt=["src"],rt={__name:"Home1",setup(lt){const t=j(),d=B(JSON.parse(localStorage.getItem("extraInfo"))),L=I("rgba(0, 0, 0, 0.8)"),g=I("rgba(255, 255, 255, 1)"),v=I([]),w=V(()=>{const r=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,c=parseInt(r[0])*60+parseInt(r[1]);let s=-1;for(let f=t.lyricData.lyric.length-1;f>=0;f--){const S=t.lyricData.lyric[f][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(S){const $=parseInt(S[1])*60+parseInt(S[2]);if(c>=$){s=f;break}}}let n=0;t.lyricData.translatedLyric.length===0?n=-(s-1)*73:n=-s*110;const h=document.querySelector(".lyric-box");return h&&(h.style.transform=`translateY(${n}px)`),s}),H=()=>{const r=new J,c=document.getElementsByClassName("cover")[0];c&&(c.onload=function(){const s=r.getColor(c);L.value=`rgba(${s.join(",")}, 1)`,g.value=`rgba(${s.map(n=>255-n).join(",")}, 1)`,v.value=r.getPalette(c).map(n=>`rgba(${n.join(",")}, 1)`)})};P(()=>t.songData?.track?.cover,(r,c)=>{r&&r!==c&&H()});const u=B({status:"已暂停",name:"暂无歌曲"}),C=()=>{u.status&&u.name?document.title=u.status+" - "+u.name:document.title="歌曲组件"};return P(()=>t.songData?.player?.isPaused,r=>{r?u.status="已暂停":u.status="播放中",C()}),P(()=>t.songData?.track?.title,r=>{u.name=r,C()}),E(()=>{C(),t.resetSongData()}),(r,c)=>(o(),k(a(M),{width:"1880",height:"300","box-style":{backgroundColor:r.none}},{default:p(()=>[e("div",{class:"song-container",style:y({"--theme-color":L.value,"--text-color":g.value,"--bg-color":v.value[2],"--stress-color":v.value[3]})},[N(e("img",{id:"cover",class:_(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,O),[[z,a(t).songData?.track?.cover]]),N(e("img",{class:_(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:F,alt:""},null,2),[[z,!a(t).songData?.track?.cover]]),e("div",Q,[e("div",U,[d.some(s=>s.length>0)?(o(),l("div",W,[d[0].length>0?(o(),k(x,{key:0,"is-bold":"",color:g.value,"content-align":"center"},{default:p(()=>[T(i(d[0][0]),1)]),_:1},8,["color"])):m("",!0),d[1].length>0?(o(),l("div",X,[Y(x,{color:g.value,"content-align":"space-around"},{default:p(()=>[(o(!0),l(D,null,b(d[1].join(" | ").split(" "),(s,n)=>(o(),l("span",{key:n},i(s),1))),128))]),_:1},8,["color"])])):m("",!0)])):m("",!0),e("div",{class:_(["song-info",{"song-info2":d.length===0}])},[e("div",Z,[a(t).songData?.track?.title?(o(),k(x,{key:0,color:g.value,"is-bold":"bold"},{default:p(()=>[T(i(a(t).songData?.track?.title),1)]),_:1},8,["color"])):m("",!0),a(t).songData?.track?.author?(o(),k(x,{key:1,color:g.value,"font-size":"35px"},{default:p(()=>[T(i(a(t).songData?.track?.author),1)]),_:1},8,["color"])):m("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(o(),l("span",A,"暂无歌曲信息")):m("",!0)]),e("div",G,[e("div",{class:"sun",style:y({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:y({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},[(o(),l(D,null,b(8,s=>e("div",{class:"line",key:s,style:y({"--i":s})},null,4)),64))],4),e("div",{class:"eye",style:y({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},null,4)],4),c[0]||(c[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",K,[e("span",null,i(a(t).songData?.player?.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:y({"--bg-color":v.value[2],"--stress-color":v.value[3],"--process":a(t).songData?.player?.statePercent||0})},null,4),e("span",null,i(a(t).songData?.track?.durationHuman),1)])]),e("div",R,[a(t).lyricData.lyric.length>0?(o(),l("div",tt,[a(t).lyricData.translatedLyric.length===0?(o(!0),l(D,{key:0},b(a(t).lyricData.lyric,(s,n)=>(o(),l("div",{class:_(["lyric-line",{active:n===w.value}]),key:n},[e("span",null,i(s[2]),1)],2))),128)):(o(!0),l(D,{key:1},b(a(t).lyricData.lyric,(s,n)=>(o(),l("div",{class:_(["lyric-line-translated",{active:n===w.value}]),key:n},[e("span",at,i(s[2]),1),e("span",et,i(a(t).lyricData.translatedLyric.find(h=>h[1]===a(t).lyricData.lyric[n][1])?.[2]||""),1)],2))),128))])):(o(),l("div",st,"暂无歌词")),e("div",ot,[(o(),l("img",{key:a(t).songData?.track?.cover,src:a(t).songData?.track?.cover,alt:""},null,8,nt))])])],4)]),_:1},8,["box-style"]))}},gt=q(rt,[["__scopeId","data-v-84c9eeaf"]]);export{gt as default};
