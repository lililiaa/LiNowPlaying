import{c2 as na,aK as ea,a1 as I,X as ca,a3 as sa,a2 as ia,as as w,at as b,L as t,am as o,ap as e,aA as _,aE as oa,aq as x,aF as ra,al as n,an as h,bb as N,az as i,aH as ua,ao as L,bd as P}from"./index-Bp0Pw69C.js";import{_ as da}from"./music-Def25HgW.js";import"./color-thief-DF3QbzqH.js";import{T as ga,o as T}from"./v-scale-screen-DA54TNBm.js";import{_ as ya}from"./plugin-vueexport-helper-DlAUqK2U.js";const pa=["src"],ma={class:"basic-info"},va={class:"info-box"},_a={key:0,class:"game-info"},ha={key:1},fa={class:"song"},ka={key:2},Da={class:"playing-container"},ba={class:"process-box"},xa={class:"lyric-info"},Ca={key:0,class:"lyric-box"},Sa={class:"original"},Ia={class:"translated"},wa={key:1,class:"lyric-empty"},La={__name:"Home1",setup(Pa){const a=na(),p=ea(JSON.parse(localStorage.getItem("extraInfo"))),B=I(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=I(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),la=I(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),C=I([]),V=ca(()=>{var k,D;const l=((D=(k=a.songData)==null?void 0:k.player)==null?void 0:D.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=a.lyricData.lyric.length-1;y>=0;y--){const v=a.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(v){const S=parseInt(v[1])*60+parseInt(v[2]);if(c>=S){g=y;break}}}let m=0;a.lyricData.translatedLyric.length===0?m=-(g-1)*73:m=-g*110;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(m,"px)")),g}),d=ea({status:"已暂停",name:"暂无歌曲"}),z=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return sa(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.player)==null?void 0:c.isPaused},l=>{l?d.status="已暂停":d.status="播放中",z()}),sa(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.track)==null?void 0:c.title},l=>{d.name=l,z()}),ia(()=>{z(),a.resetSongData()}),(l,c)=>(o(),w(t(ga),{width:1880,height:300,"box-style":{backgroundColor:"none"}},{default:b(()=>{var g,m,f,k,D,y,v,S,q,E,F,j,A,J,K,M,O,X,Y,$,G,Q,R,U,W,Z;return[e("div",{class:"song-container",style:_({"--theme-color":B.value,"--text-color":u.value,"--bg-color":C.value[2]||u.value,"--shadow-color":la.value,"--stress-color":C.value[3]})},[oa(e("img",{id:"cover",class:x(["cover",{changing:t(a).isChanging}]),src:(m=(g=t(a).songData)==null?void 0:g.track)==null?void 0:m.cover,alt:"封面"},null,10,pa),[[ra,(k=(f=t(a).songData)==null?void 0:f.track)==null?void 0:k.cover]]),oa(e("img",{class:x(["cover",{changing:t(a).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:da,alt:""},null,2),[[ra,!((y=(D=t(a).songData)==null?void 0:D.track)!=null&&y.cover)]]),e("div",ma,[e("div",va,[p.some(s=>s.length>0)?(o(),n("div",_a,[p[0].length>0?(o(),w(T,{key:0,"is-bold":"",color:u.value,"content-align":"center"},{default:b(()=>[N(i(p[0][0]),1)]),_:1},8,["color"])):h("",!0),p[1].length>0?(o(),n("div",ha,[ua(T,{color:u.value,"content-align":"space-around"},{default:b(()=>[(o(!0),n(L,null,P(p[1].join(" | ").split(" "),(s,r)=>(o(),n("span",{key:r},i(s),1))),128))]),_:1},8,["color"])])):h("",!0)])):h("",!0),e("div",{class:x(["song-info",{"song-info2":p.length===0}])},[e("div",fa,[(S=(v=t(a).songData)==null?void 0:v.track)!=null&&S.title?(o(),w(T,{key:0,color:u.value,"is-bold":"bold"},{default:b(()=>{var s,r;return[N(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.title),1)]}),_:1},8,["color"])):h("",!0),(E=(q=t(a).songData)==null?void 0:q.track)!=null&&E.author?(o(),w(T,{key:1,color:u.value,"font-size":"35px"},{default:b(()=>{var s,r;return[N(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.author),1)]}),_:1},8,["color"])):h("",!0),!((j=(F=t(a).songData)==null?void 0:F.track)!=null&&j.title)&&!((J=(A=t(a).songData)==null?void 0:A.track)!=null&&J.author)?(o(),n("span",ka,"暂无歌曲信息")):h("",!0)]),e("div",Da,[e("div",{class:"sun",style:_({"animation-play-state":(M=(K=t(a).songData)==null?void 0:K.player)!=null&&M.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:_({"animation-play-state":(X=(O=t(a).songData)==null?void 0:O.player)!=null&&X.isPaused?"paused":"running"})},[(o(),n(L,null,P(8,s=>e("div",{class:"line",key:s,style:_({"--i":s})},null,4)),64))],4),e("div",{class:"eye",style:_({"animation-play-state":($=(Y=t(a).songData)==null?void 0:Y.player)!=null&&$.isPaused?"paused":"running"})},null,4)],4),c[0]||(c[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",ba,[e("span",null,i((Q=(G=t(a).songData)==null?void 0:G.player)==null?void 0:Q.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:_({"--bg-color":C.value[2]||B.value,"--stress-color":C.value[3]||u.value,"--process":((U=(R=t(a).songData)==null?void 0:R.player)==null?void 0:U.statePercent)||0})},null,4),e("span",null,i((Z=(W=t(a).songData)==null?void 0:W.track)==null?void 0:Z.durationHuman),1)])]),e("div",xa,[t(a).lyricData.lyric.length>0?(o(),n("div",Ca,[t(a).lyricData.translatedLyric.length===0?(o(!0),n(L,{key:0},P(t(a).lyricData.lyric,(s,r)=>(o(),n("div",{class:x(["lyric-line",{active:r===V.value}]),key:r},[e("span",null,i(s[2]),1)],2))),128)):(o(!0),n(L,{key:1},P(t(a).lyricData.lyric,(s,r)=>{var aa,ta;return o(),n("div",{class:x(["lyric-line-translated",{active:r===V.value}]),key:r},[e("span",Sa,i((aa=t(a).lyricData.translatedLyric.find(H=>H[1]===t(a).lyricData.lyric[r][1]))!=null&&aa[2]?s[2]:""),1),e("span",Ia,i(((ta=t(a).lyricData.translatedLyric.find(H=>H[1]===t(a).lyricData.lyric[r][1]))==null?void 0:ta[2])||s[2]),1)],2)}),128))])):(o(),n("div",wa,"暂无歌词"))])],4)]}),_:1}))}},Va=ya(La,[["__scopeId","data-v-9dfbc894"]]);export{Va as default};
