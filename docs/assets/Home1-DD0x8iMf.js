import{bO as V,aG as L,_ as I,T as j,a0 as z,$ as O,ao as f,ap as v,I as a,ai as s,al as e,aw as g,aA as B,am as p,aB as H,ah as r,aj as y,by as P,av as n,aD as $,ak as D,b8 as b}from"./index-DkKwMBXU.js";import{_ as q,a as A}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as E,o as x}from"./v-scale-screen-BZ81STDo.js";const F=["src"],G={class:"basic-info"},J={class:"info-box"},M={key:0,class:"game-info"},Y={key:1},K={class:"song"},Q={key:2},R={class:"playing-container"},U={class:"process-box"},W={class:"lyric-info"},X={key:0,class:"lyric-box"},Z={class:"original"},tt={class:"translated"},at={key:1,class:"lyric-empty"},et={class:"lyric-bg"},st=["src"],ot={__name:"Home1",setup(rt){const t=V(),d=L(JSON.parse(localStorage.getItem("extraInfo"))),T=I(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=I(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),m=I([]),w=j(()=>{const c=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,_=parseInt(c[0])*60+parseInt(c[1]);let o=-1;for(let k=t.lyricData.lyric.length-1;k>=0;k--){const S=t.lyricData.lyric[k][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(S){const N=parseInt(S[1])*60+parseInt(S[2]);if(_>=N){o=k;break}}}let l=0;t.lyricData.translatedLyric.length===0?l=-(o-1)*73:l=-o*110;const h=document.querySelector(".lyric-box");return h&&(h.style.transform=`translateY(${l}px)`),o}),u=L({status:"已暂停",name:"暂无歌曲"}),C=()=>{u.status&&u.name?document.title=u.status+" - "+u.name:document.title="歌曲组件"};return z(()=>t.songData?.player?.isPaused,c=>{c?u.status="已暂停":u.status="播放中",C()}),z(()=>t.songData?.track?.title,c=>{u.name=c,C()}),O(()=>{C(),t.resetSongData()}),(c,_)=>(s(),f(a(E),{width:"1880",height:"300","box-style":{backgroundColor:c.none}},{default:v(()=>[e("div",{class:"song-container",style:g({"--theme-color":T.value,"--text-color":i.value,"--bg-color":m.value[2]||i.value,"--stress-color":m.value[3]})},[B(e("img",{id:"cover",class:p(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,F),[[H,a(t).songData?.track?.cover]]),B(e("img",{class:p(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:A,alt:""},null,2),[[H,!a(t).songData?.track?.cover]]),e("div",G,[e("div",J,[d.some(o=>o.length>0)?(s(),r("div",M,[d[0].length>0?(s(),f(x,{key:0,"is-bold":"",color:i.value,"content-align":"center"},{default:v(()=>[P(n(d[0][0]),1)]),_:1},8,["color"])):y("",!0),d[1].length>0?(s(),r("div",Y,[$(x,{color:i.value,"content-align":"space-around"},{default:v(()=>[(s(!0),r(D,null,b(d[1].join(" | ").split(" "),(o,l)=>(s(),r("span",{key:l},n(o),1))),128))]),_:1},8,["color"])])):y("",!0)])):y("",!0),e("div",{class:p(["song-info",{"song-info2":d.length===0}])},[e("div",K,[a(t).songData?.track?.title?(s(),f(x,{key:0,color:i.value,"is-bold":"bold"},{default:v(()=>[P(n(a(t).songData?.track?.title),1)]),_:1},8,["color"])):y("",!0),a(t).songData?.track?.author?(s(),f(x,{key:1,color:i.value,"font-size":"35px"},{default:v(()=>[P(n(a(t).songData?.track?.author),1)]),_:1},8,["color"])):y("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(s(),r("span",Q,"暂无歌曲信息")):y("",!0)]),e("div",R,[e("div",{class:"sun",style:g({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:g({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},[(s(),r(D,null,b(8,o=>e("div",{class:"line",key:o,style:g({"--i":o})},null,4)),64))],4),e("div",{class:"eye",style:g({"animation-play-state":a(t).songData?.player?.isPaused?"paused":"running"})},null,4)],4),_[0]||(_[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",U,[e("span",null,n(a(t).songData?.player?.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:g({"--bg-color":m.value[2]||T.value,"--stress-color":m.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4),e("span",null,n(a(t).songData?.track?.durationHuman),1)])]),e("div",W,[a(t).lyricData.lyric.length>0?(s(),r("div",X,[a(t).lyricData.translatedLyric.length===0?(s(!0),r(D,{key:0},b(a(t).lyricData.lyric,(o,l)=>(s(),r("div",{class:p(["lyric-line",{active:l===w.value}]),key:l},[e("span",null,n(o[2]),1)],2))),128)):(s(!0),r(D,{key:1},b(a(t).lyricData.lyric,(o,l)=>(s(),r("div",{class:p(["lyric-line-translated",{active:l===w.value}]),key:l},[e("span",Z,n(o[2]),1),e("span",tt,n(a(t).lyricData.translatedLyric.find(h=>h[1]===a(t).lyricData.lyric[l][1])?.[2]||""),1)],2))),128))])):(s(),r("div",at,"暂无歌词")),e("div",et,[(s(),r("img",{key:a(t).songData?.track?.cover,src:a(t).songData?.track?.cover,alt:""},null,8,st))])])],4)]),_:1},8,["box-style"]))}},it=q(ot,[["__scopeId","data-v-53874cc8"]]);export{it as default};
