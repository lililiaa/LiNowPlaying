import{c2 as da,aK as la,a1 as I,X as ga,a3 as na,a2 as ya,as as w,at as b,L as t,am as o,ap as e,aA as _,aE as ca,aq as x,aF as ia,al as n,an as h,bb as N,az as i,aH as ma,ao as L,bd as P}from"./index-D_YEYRn5.js";import{_ as pa}from"./music-Def25HgW.js";import{T as va,o as T}from"./v-scale-screen-QmHYQi8k.js";import{_ as _a}from"./plugin-vueexport-helper-DlAUqK2U.js";const ha=["src"],fa={class:"basic-info"},ka={class:"info-box"},Da={key:0,class:"game-info"},ba={key:1},xa={class:"song"},Ca={key:2},Sa={class:"playing-container"},Ia={class:"process-box"},wa={class:"lyric-info"},La={key:0,class:"lyric-box"},Pa={class:"original"},Ta={class:"translated"},za={key:1,class:"lyric-empty"},Ha={class:"lyric-bg"},Na=["src"],Ba={__name:"Home1",setup(Va){const a=da(),m=la(JSON.parse(localStorage.getItem("extraInfo"))),B=I(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=I(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),ua=I(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),C=I([]),V=ga(()=>{var k,D;const l=((D=(k=a.songData)==null?void 0:k.player)==null?void 0:D.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=a.lyricData.lyric.length-1;y>=0;y--){const v=a.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(v){const S=parseInt(v[1])*60+parseInt(v[2]);if(c>=S){g=y;break}}}let p=0;a.lyricData.translatedLyric.length===0?p=-(g-1)*73:p=-g*110;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(p,"px)")),g}),d=la({status:"已暂停",name:"暂无歌曲"}),z=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return na(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.player)==null?void 0:c.isPaused},l=>{l?d.status="已暂停":d.status="播放中",z()}),na(()=>{var l,c;return(c=(l=a.songData)==null?void 0:l.track)==null?void 0:c.title},l=>{d.name=l,z()}),ya(()=>{z(),a.resetSongData()}),(l,c)=>(o(),w(t(va),{width:1880,height:300,"box-style":{backgroundColor:"none"}},{default:b(()=>{var g,p,f,k,D,y,v,S,q,E,F,j,A,J,K,M,O,X,Y,$,G,Q,R,U,W,Z,aa,ta,ea,sa;return[e("div",{class:"song-container",style:_({"--theme-color":B.value,"--text-color":u.value,"--bg-color":C.value[2]||u.value,"--shadow-color":ua.value,"--stress-color":C.value[3]})},[ca(e("img",{id:"cover",class:x(["cover",{changing:t(a).isChanging}]),src:(p=(g=t(a).songData)==null?void 0:g.track)==null?void 0:p.cover,alt:"封面"},null,10,ha),[[ia,(k=(f=t(a).songData)==null?void 0:f.track)==null?void 0:k.cover]]),ca(e("img",{class:x(["cover",{changing:t(a).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pa,alt:""},null,2),[[ia,!((y=(D=t(a).songData)==null?void 0:D.track)!=null&&y.cover)]]),e("div",fa,[e("div",ka,[m.some(s=>s.length>0)?(o(),n("div",Da,[m[0].length>0?(o(),w(T,{key:0,"is-bold":"",color:u.value,"content-align":"center"},{default:b(()=>[N(i(m[0][0]),1)]),_:1},8,["color"])):h("",!0),m[1].length>0?(o(),n("div",ba,[ma(T,{color:u.value,"content-align":"space-around"},{default:b(()=>[(o(!0),n(L,null,P(m[1].join(" | ").split(" "),(s,r)=>(o(),n("span",{key:r},i(s),1))),128))]),_:1},8,["color"])])):h("",!0)])):h("",!0),e("div",{class:x(["song-info",{"song-info2":m.length===0}])},[e("div",xa,[(S=(v=t(a).songData)==null?void 0:v.track)!=null&&S.title?(o(),w(T,{key:0,color:u.value,"is-bold":"bold"},{default:b(()=>{var s,r;return[N(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.title),1)]}),_:1},8,["color"])):h("",!0),(E=(q=t(a).songData)==null?void 0:q.track)!=null&&E.author?(o(),w(T,{key:1,color:u.value,"font-size":"35px"},{default:b(()=>{var s,r;return[N(i((r=(s=t(a).songData)==null?void 0:s.track)==null?void 0:r.author),1)]}),_:1},8,["color"])):h("",!0),!((j=(F=t(a).songData)==null?void 0:F.track)!=null&&j.title)&&!((J=(A=t(a).songData)==null?void 0:A.track)!=null&&J.author)?(o(),n("span",Ca,"暂无歌曲信息")):h("",!0)]),e("div",Sa,[e("div",{class:"sun",style:_({"animation-play-state":(M=(K=t(a).songData)==null?void 0:K.player)!=null&&M.isPaused?"paused":"running"})},[e("div",{class:"sun-body",style:_({"animation-play-state":(X=(O=t(a).songData)==null?void 0:O.player)!=null&&X.isPaused?"paused":"running"})},[(o(),n(L,null,P(8,s=>e("div",{class:"line",key:s,style:_({"--i":s})},null,4)),64))],4),e("div",{class:"eye",style:_({"animation-play-state":($=(Y=t(a).songData)==null?void 0:Y.player)!=null&&$.isPaused?"paused":"running"})},null,4)],4),c[0]||(c[0]=e("div",{class:"horizon"},null,-1))])],2)]),e("div",Ia,[e("span",null,i((Q=(G=t(a).songData)==null?void 0:G.player)==null?void 0:Q.seekbarCurrentPositionHuman),1),e("div",{class:"process-bar",style:_({"--bg-color":C.value[2]||B.value,"--stress-color":C.value[3]||u.value,"--process":((U=(R=t(a).songData)==null?void 0:R.player)==null?void 0:U.statePercent)||0})},null,4),e("span",null,i((Z=(W=t(a).songData)==null?void 0:W.track)==null?void 0:Z.durationHuman),1)])]),e("div",wa,[t(a).lyricData.lyric.length>0?(o(),n("div",La,[t(a).lyricData.translatedLyric.length===0?(o(!0),n(L,{key:0},P(t(a).lyricData.lyric,(s,r)=>(o(),n("div",{class:x(["lyric-line",{active:r===V.value}]),key:r},[e("span",null,i(s[2]),1)],2))),128)):(o(!0),n(L,{key:1},P(t(a).lyricData.lyric,(s,r)=>{var oa,ra;return o(),n("div",{class:x(["lyric-line-translated",{active:r===V.value}]),key:r},[e("span",Pa,i((oa=t(a).lyricData.translatedLyric.find(H=>H[1]===t(a).lyricData.lyric[r][1]))!=null&&oa[2]?s[2]:""),1),e("span",Ta,i(((ra=t(a).lyricData.translatedLyric.find(H=>H[1]===t(a).lyricData.lyric[r][1]))==null?void 0:ra[2])||s[2]),1)],2)}),128))])):(o(),n("div",za,"暂无歌词")),e("div",Ha,[(o(),n("img",{key:(ta=(aa=t(a).songData)==null?void 0:aa.track)==null?void 0:ta.cover,src:(sa=(ea=t(a).songData)==null?void 0:ea.track)==null?void 0:sa.cover,alt:""},null,8,Na))])])],4)]}),_:1}))}},Aa=_a(Ba,[["__scopeId","data-v-ae0e92f8"]]);export{Aa as default};
