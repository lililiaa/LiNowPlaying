import{bR as ht,aH as it,_ as w,T as mt,a0 as ut,$ as vt,ap as x,aq as p,I as a,aj as s,am as n,ax as dt,aB as gt,an as T,aC as yt,ai as l,ak as d,aE as kt,al as L,ba as N,aw as i,b8 as H}from"./index-DX5ApwsK.js";import{_ as pt}from"./music-Def25HgW.js";import{T as ft,o as C}from"./v-scale-screen-3g-ngFXf.js";import{_ as Dt}from"./plugin-vueexport-helper-DlAUqK2U.js";const bt=["src"],xt={class:"basic-info"},Ct={key:0,class:"game-info"},St={key:0},It={key:1,class:"song-info"},wt={key:2},Tt={key:2,class:"song-info2"},Lt={key:2},Ht={class:"process-box"},zt={class:"lyric-info"},Bt={key:0,class:"lyric-box"},Nt={class:"original"},Pt={class:"translated"},Vt={key:1,class:"lyric-empty"},Et={class:"lyric-bg"},qt=["src"],$t={__name:"Home2",setup(jt){const t=ht(),g=it(JSON.parse(localStorage.getItem("extraInfo")));let m=0;const P=()=>{let r=m;do r=(r+1)%g.length;while(g[r].length===0&&r!==m);g[r].length>0&&(m=r),setTimeout(P,8e3)},V=w(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=w(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),_t=w(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),S=w([]),E=mt(()=>{var D,b;const r=((b=(D=t.songData)==null?void 0:D.player)==null?void 0:b.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(r[0])*60+parseInt(r[1]);let _=-1;for(let h=t.lyricData.lyric.length-1;h>=0;h--){const k=t.lyricData.lyric[h][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(k){const I=parseInt(k[1])*60+parseInt(k[2]);if(c>=I){_=h;break}}}let v=0;t.lyricData.translatedLyric.length===0?v=-(_-1)*67:v=-_*100;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(v,"px)")),_}),y=it({status:"已暂停",name:"暂无歌曲"}),z=()=>{y.status&&y.name?document.title=y.status+" - "+y.name:document.title="歌曲组件"};return ut(()=>{var r,c;return(c=(r=t.songData)==null?void 0:r.player)==null?void 0:c.isPaused},r=>{r?y.status="已暂停":y.status="播放中",z()}),ut(()=>{var r,c;return(c=(r=t.songData)==null?void 0:r.track)==null?void 0:c.title},r=>{y.name=r,z()}),vt(()=>{z(),t.resetSongData(),P()}),(r,c)=>(s(),x(a(ft),{width:1880,height:280,"box-style":{backgroundColor:"none"}},{default:p(()=>{var _,v,f,D,b,h,k,I,q,$,j,F,J,M,O,R,Y,A,G,K,Q,U,W,X,Z,tt,at,et,ot,st,rt,lt;return[n("div",{class:"song-container",style:dt({"--theme-color":V.value,"--text-color":u.value,"--bg-color":S.value[2]||u.value,"--shadow-color":_t.value,"--stress-color":S.value[3]})},[gt(n("img",{id:"cover",class:T(["cover",{changing:a(t).isChanging}]),src:(v=(_=a(t).songData)==null?void 0:_.track)==null?void 0:v.cover,alt:"封面"},null,10,bt),[[yt,(D=(f=a(t).songData)==null?void 0:f.track)==null?void 0:D.cover]]),gt(n("img",{class:T(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pt,alt:""},null,2),[[yt,!((h=(b=a(t).songData)==null?void 0:b.track)!=null&&h.cover)]]),n("div",xt,[g.some(e=>e.length>0)?(s(),l("div",Ct,[(s(),l("div",{key:a(m)},[kt(C,{color:u.value,"is-bold":"bold","content-align":"space-evenly"},{default:p(()=>[(s(!0),l(L,null,N(g[a(m)],(e,o)=>(s(),l(L,null,[n("span",null,i(e),1),o<g[a(m)].length-1?(s(),l("span",St,"|")):d("",!0)],64))),256))]),_:1},8,["color"])]))])):d("",!0),g.some(e=>e.length!==0)?(s(),l("div",It,[(I=(k=a(t).songData)==null?void 0:k.track)!=null&&I.title?(s(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,o;return[H(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),c[0]||(c[0]=n("span",null,"-",-1)),($=(q=a(t).songData)==null?void 0:q.track)!=null&&$.author?(s(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,o;return[H(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((F=(j=a(t).songData)==null?void 0:j.track)!=null&&F.title)&&!((M=(J=a(t).songData)==null?void 0:J.track)!=null&&M.author)?(s(),l("span",wt,"暂无歌曲信息")):d("",!0)])):(s(),l("div",Tt,[(R=(O=a(t).songData)==null?void 0:O.track)!=null&&R.title?(s(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,o;return[H(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),(A=(Y=a(t).songData)==null?void 0:Y.track)!=null&&A.author?(s(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,o;return[H(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((K=(G=a(t).songData)==null?void 0:G.track)!=null&&K.title)&&!((U=(Q=a(t).songData)==null?void 0:Q.track)!=null&&U.author)?(s(),l("span",Lt,"暂无歌曲信息")):d("",!0)])),n("div",Ht,[n("span",null,i((X=(W=a(t).songData)==null?void 0:W.player)==null?void 0:X.seekbarCurrentPositionHuman),1),n("div",{class:"process-bar",style:dt({"--bg-color":S.value[2]||V.value,"--stress-color":S.value[3]||u.value,"--process":((tt=(Z=a(t).songData)==null?void 0:Z.player)==null?void 0:tt.statePercent)||0})},null,4),n("span",null,i((et=(at=a(t).songData)==null?void 0:at.track)==null?void 0:et.durationHuman),1)])]),n("div",zt,[a(t).lyricData.lyric.length>0?(s(),l("div",Bt,[a(t).lyricData.translatedLyric.length===0?(s(!0),l(L,{key:0},N(a(t).lyricData.lyric,(e,o)=>(s(),l("div",{class:T(["lyric-line",{active:o===E.value}]),key:o},[n("span",null,i(e[2]),1)],2))),128)):(s(!0),l(L,{key:1},N(a(t).lyricData.lyric,(e,o)=>{var nt,ct;return s(),l("div",{class:T(["lyric-line-translated",{active:o===E.value}]),key:o},[n("span",Nt,i((nt=a(t).lyricData.translatedLyric.find(B=>B[1]===a(t).lyricData.lyric[o][1]))!=null&&nt[2]?e[2]:""),1),n("span",Pt,i(((ct=a(t).lyricData.translatedLyric.find(B=>B[1]===a(t).lyricData.lyric[o][1]))==null?void 0:ct[2])||e[2]),1)],2)}),128))])):(s(),l("div",Vt,"暂无歌词")),n("div",Et,[(s(),l("img",{key:(st=(ot=a(t).songData)==null?void 0:ot.track)==null?void 0:st.cover,src:(lt=(rt=a(t).songData)==null?void 0:rt.track)==null?void 0:lt.cover,alt:""},null,8,qt))])])],4)]}),_:1}))}},Rt=Dt($t,[["__scopeId","data-v-8430f9a0"]]);export{Rt as default};
