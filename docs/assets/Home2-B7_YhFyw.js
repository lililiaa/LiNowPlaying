import{bR as _t,aH as it,_ as w,T as mt,a0 as ut,$ as vt,ap as x,aq as p,I as a,aj as r,am as n,ax as dt,aB as gt,an as T,aC as yt,ai as l,ak as d,aE as kt,al as L,ba as N,aw as i,b8 as H}from"./index-B-eMVKu_.js";import{_ as pt,a as ft}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as Dt,o as C}from"./v-scale-screen-BNb3UDjS.js";const bt=["src"],xt={class:"basic-info"},Ct={key:0,class:"game-info"},St={key:0},It={key:1,class:"song-info"},wt={key:2},Tt={key:2,class:"song-info2"},Lt={key:2},Ht={class:"process-box"},zt={class:"lyric-info"},Bt={key:0,class:"lyric-box"},Nt={class:"original"},Pt={class:"translated"},Vt={key:1,class:"lyric-empty"},Et={class:"lyric-bg"},qt=["src"],$t={__name:"Home2",setup(jt){const t=_t(),g=it(JSON.parse(localStorage.getItem("extraInfo")));let m=0;const P=()=>{let o=m;do o=(o+1)%g.length;while(g[o].length===0&&o!==m);g[o].length>0&&(m=o),setTimeout(P,8e3)},V=w(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=w(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),ht=w(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),S=w([]),E=mt(()=>{var D,b;const o=((b=(D=t.songData)==null?void 0:D.player)==null?void 0:b.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(o[0])*60+parseInt(o[1]);let h=-1;for(let _=t.lyricData.lyric.length-1;_>=0;_--){const k=t.lyricData.lyric[_][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(k){const I=parseInt(k[1])*60+parseInt(k[2]);if(c>=I){h=_;break}}}let v=0;t.lyricData.translatedLyric.length===0?v=-(h-1)*67:v=-h*100;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(v,"px)")),h}),y=it({status:"已暂停",name:"暂无歌曲"}),z=()=>{y.status&&y.name?document.title=y.status+" - "+y.name:document.title="歌曲组件"};return ut(()=>{var o,c;return(c=(o=t.songData)==null?void 0:o.player)==null?void 0:c.isPaused},o=>{o?y.status="已暂停":y.status="播放中",z()}),ut(()=>{var o,c;return(c=(o=t.songData)==null?void 0:o.track)==null?void 0:c.title},o=>{y.name=o,z()}),vt(()=>{z(),t.resetSongData(),P()}),(o,c)=>(r(),x(a(Dt),{width:"1880",height:"280","box-style":{backgroundColor:o.none}},{default:p(()=>{var h,v,f,D,b,_,k,I,q,$,j,F,J,M,O,R,Y,A,G,K,Q,U,W,X,Z,tt,at,et,ot,st,rt,lt;return[n("div",{class:"song-container",style:dt({"--theme-color":V.value,"--text-color":u.value,"--bg-color":S.value[2]||u.value,"--shadow-color":ht.value,"--stress-color":S.value[3]})},[gt(n("img",{id:"cover",class:T(["cover",{changing:a(t).isChanging}]),src:(v=(h=a(t).songData)==null?void 0:h.track)==null?void 0:v.cover,alt:"封面"},null,10,bt),[[yt,(D=(f=a(t).songData)==null?void 0:f.track)==null?void 0:D.cover]]),gt(n("img",{class:T(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ft,alt:""},null,2),[[yt,!((_=(b=a(t).songData)==null?void 0:b.track)!=null&&_.cover)]]),n("div",xt,[g.some(e=>e.length>0)?(r(),l("div",Ct,[(r(),l("div",{key:a(m)},[kt(C,{color:u.value,"is-bold":"bold","content-align":"space-evenly"},{default:p(()=>[(r(!0),l(L,null,N(g[a(m)],(e,s)=>(r(),l(L,null,[n("span",null,i(e),1),s<g[a(m)].length-1?(r(),l("span",St,"|")):d("",!0)],64))),256))]),_:1},8,["color"])]))])):d("",!0),g.some(e=>e.length!==0)?(r(),l("div",It,[(I=(k=a(t).songData)==null?void 0:k.track)!=null&&I.title?(r(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,s;return[H(i((s=(e=a(t).songData)==null?void 0:e.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):d("",!0),c[0]||(c[0]=n("span",null,"-",-1)),($=(q=a(t).songData)==null?void 0:q.track)!=null&&$.author?(r(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,s;return[H(i((s=(e=a(t).songData)==null?void 0:e.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):d("",!0),!((F=(j=a(t).songData)==null?void 0:j.track)!=null&&F.title)&&!((M=(J=a(t).songData)==null?void 0:J.track)!=null&&M.author)?(r(),l("span",wt,"暂无歌曲信息")):d("",!0)])):(r(),l("div",Tt,[(R=(O=a(t).songData)==null?void 0:O.track)!=null&&R.title?(r(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,s;return[H(i((s=(e=a(t).songData)==null?void 0:e.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):d("",!0),(A=(Y=a(t).songData)==null?void 0:Y.track)!=null&&A.author?(r(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,s;return[H(i((s=(e=a(t).songData)==null?void 0:e.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):d("",!0),!((K=(G=a(t).songData)==null?void 0:G.track)!=null&&K.title)&&!((U=(Q=a(t).songData)==null?void 0:Q.track)!=null&&U.author)?(r(),l("span",Lt,"暂无歌曲信息")):d("",!0)])),n("div",Ht,[n("span",null,i((X=(W=a(t).songData)==null?void 0:W.player)==null?void 0:X.seekbarCurrentPositionHuman),1),n("div",{class:"process-bar",style:dt({"--bg-color":S.value[2]||V.value,"--stress-color":S.value[3]||u.value,"--process":((tt=(Z=a(t).songData)==null?void 0:Z.player)==null?void 0:tt.statePercent)||0})},null,4),n("span",null,i((et=(at=a(t).songData)==null?void 0:at.track)==null?void 0:et.durationHuman),1)])]),n("div",zt,[a(t).lyricData.lyric.length>0?(r(),l("div",Bt,[a(t).lyricData.translatedLyric.length===0?(r(!0),l(L,{key:0},N(a(t).lyricData.lyric,(e,s)=>(r(),l("div",{class:T(["lyric-line",{active:s===E.value}]),key:s},[n("span",null,i(e[2]),1)],2))),128)):(r(!0),l(L,{key:1},N(a(t).lyricData.lyric,(e,s)=>{var nt,ct;return r(),l("div",{class:T(["lyric-line-translated",{active:s===E.value}]),key:s},[n("span",Nt,i((nt=a(t).lyricData.translatedLyric.find(B=>B[1]===a(t).lyricData.lyric[s][1]))!=null&&nt[2]?e[2]:""),1),n("span",Pt,i(((ct=a(t).lyricData.translatedLyric.find(B=>B[1]===a(t).lyricData.lyric[s][1]))==null?void 0:ct[2])||e[2]),1)],2)}),128))])):(r(),l("div",Vt,"暂无歌词")),n("div",Et,[(r(),l("img",{key:(st=(ot=a(t).songData)==null?void 0:ot.track)==null?void 0:st.cover,src:(lt=(rt=a(t).songData)==null?void 0:rt.track)==null?void 0:lt.cover,alt:""},null,8,qt))])])],4)]}),_:1},8,["box-style"]))}},Ot=pt($t,[["__scopeId","data-v-fba6de97"]]);export{Ot as default};
