import{bO as O,aG as B,_ as I,T as $,a0 as H,$ as j,ao as h,ap as _,I as a,ai as e,al as r,aw as N,aA as P,am as D,aB as V,ah as s,aj as u,aD as q,ak as b,b8 as T,av as c,by as x}from"./index-DAbHtQ07.js";import{_ as A,a as F}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as G,o as m}from"./v-scale-screen-CxEJ3D7o.js";const J=["src"],M={class:"basic-info"},Y={key:0,class:"game-info"},K={key:0},Q={key:1,class:"song-info"},R={key:2},U={key:2,class:"song-info2"},W={key:2},X={class:"process-box"},Z={class:"lyric-info"},tt={key:0,class:"lyric-box"},at={class:"original"},et={class:"translated"},st={key:1,class:"lyric-empty"},ot={class:"lyric-bg"},rt=["src"],lt={__name:"Home2",setup(nt){const t=O(),d=B(JSON.parse(localStorage.getItem("extraInfo")));let y=0;const w=()=>{let o=y;do o=(o+1)%d.length;while(d[o].length===0&&o!==y);d[o].length>0&&(y=o),setTimeout(w,8e3)},L=I(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=I(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),v=I([]),z=$(()=>{const o=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,k=parseInt(o[0])*60+parseInt(o[1]);let l=-1;for(let f=t.lyricData.lyric.length-1;f>=0;f--){const S=t.lyricData.lyric[f][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(S){const E=parseInt(S[1])*60+parseInt(S[2]);if(k>=E){l=f;break}}}let n=0;t.lyricData.translatedLyric.length===0?n=-(l-1)*67:n=-l*100;const p=document.querySelector(".lyric-box");return p&&(p.style.transform=`translateY(${n}px)`),l}),g=B({status:"已暂停",name:"暂无歌曲"}),C=()=>{g.status&&g.name?document.title=g.status+" - "+g.name:document.title="歌曲组件"};return H(()=>t.songData?.player?.isPaused,o=>{o?g.status="已暂停":g.status="播放中",C()}),H(()=>t.songData?.track?.title,o=>{g.name=o,C()}),j(()=>{C(),t.resetSongData(),w()}),(o,k)=>(e(),h(a(G),{width:"1880",height:"280","box-style":{backgroundColor:o.none}},{default:_(()=>[r("div",{class:"song-container",style:N({"--theme-color":L.value,"--text-color":i.value,"--bg-color":v.value[2]||i.value,"--stress-color":v.value[3]})},[P(r("img",{id:"cover",class:D(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,J),[[V,a(t).songData?.track?.cover]]),P(r("img",{class:D(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:F,alt:""},null,2),[[V,!a(t).songData?.track?.cover]]),r("div",M,[d.some(l=>l.length>0)?(e(),s("div",Y,[(e(),s("div",{key:a(y)},[q(m,{color:i.value,"is-bold":"bold","content-align":"space-evenly"},{default:_(()=>[(e(!0),s(b,null,T(d[a(y)],(l,n)=>(e(),s(b,null,[r("span",null,c(l),1),n<d[a(y)].length-1?(e(),s("span",K,"|")):u("",!0)],64))),256))]),_:1},8,["color"])]))])):u("",!0),d.some(l=>l.length!==0)?(e(),s("div",Q,[a(t).songData?.track?.title?(e(),h(m,{key:0,color:i.value,"is-bold":"bold"},{default:_(()=>[x(c(a(t).songData?.track?.title),1)]),_:1},8,["color"])):u("",!0),k[0]||(k[0]=r("span",null,"-",-1)),a(t).songData?.track?.author?(e(),h(m,{key:1,color:i.value,"font-size":"35px"},{default:_(()=>[x(c(a(t).songData?.track?.author),1)]),_:1},8,["color"])):u("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),s("span",R,"暂无歌曲信息")):u("",!0)])):(e(),s("div",U,[a(t).songData?.track?.title?(e(),h(m,{key:0,color:i.value,"is-bold":"bold"},{default:_(()=>[x(c(a(t).songData?.track?.title),1)]),_:1},8,["color"])):u("",!0),a(t).songData?.track?.author?(e(),h(m,{key:1,color:i.value,"font-size":"35px"},{default:_(()=>[x(c(a(t).songData?.track?.author),1)]),_:1},8,["color"])):u("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),s("span",W,"暂无歌曲信息")):u("",!0)])),r("div",X,[r("span",null,c(a(t).songData?.player?.seekbarCurrentPositionHuman),1),r("div",{class:"process-bar",style:N({"--bg-color":v.value[2]||L.value,"--stress-color":v.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4),r("span",null,c(a(t).songData?.track?.durationHuman),1)])]),r("div",Z,[a(t).lyricData.lyric.length>0?(e(),s("div",tt,[a(t).lyricData.translatedLyric.length===0?(e(!0),s(b,{key:0},T(a(t).lyricData.lyric,(l,n)=>(e(),s("div",{class:D(["lyric-line",{active:n===z.value}]),key:n},[r("span",null,c(l[2]),1)],2))),128)):(e(!0),s(b,{key:1},T(a(t).lyricData.lyric,(l,n)=>(e(),s("div",{class:D(["lyric-line-translated",{active:n===z.value}]),key:n},[r("span",at,c(l[2]),1),r("span",et,c(a(t).lyricData.translatedLyric.find(p=>p[1]===a(t).lyricData.lyric[n][1])?.[2]||""),1)],2))),128))])):(e(),s("div",st,"暂无歌词")),r("div",ot,[(e(),s("img",{key:a(t).songData?.track?.cover,src:a(t).songData?.track?.cover,alt:""},null,8,rt))])])],4)]),_:1},8,["box-style"]))}},dt=A(lt,[["__scopeId","data-v-dc0bf819"]]);export{dt as default};
