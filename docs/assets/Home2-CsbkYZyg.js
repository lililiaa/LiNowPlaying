import{bO as $,aG as B,_ as f,T as j,a0 as H,$ as q,ao as _,ap as h,I as a,ai as e,al as r,aw as N,aA as P,am as b,aB as V,ah as o,aj as u,aD as A,ak as x,b8 as w,av as c,by as C}from"./index-DclibNt3.js";import{_ as F,a as G}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as J,o as m}from"./v-scale-screen-DBC_t__g.js";const M=["src"],Y={class:"basic-info"},K={key:0,class:"game-info"},Q={key:0},R={key:1,class:"song-info"},U={key:2},W={key:2,class:"song-info2"},X={key:2},Z={class:"process-box"},tt={class:"lyric-info"},at={key:0,class:"lyric-box"},et={class:"original"},ot={class:"translated"},st={key:1,class:"lyric-empty"},rt={class:"lyric-bg"},lt=["src"],nt={__name:"Home2",setup(ct){const t=$(),d=B(JSON.parse(localStorage.getItem("extraInfo")));let y=0;const T=()=>{let s=y;do s=(s+1)%d.length;while(d[s].length===0&&s!==y);d[s].length>0&&(y=s),setTimeout(T,8e3)},L=f(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=f(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),E=f(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),v=f([]),z=j(()=>{const s=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,k=parseInt(s[0])*60+parseInt(s[1]);let l=-1;for(let D=t.lyricData.lyric.length-1;D>=0;D--){const I=t.lyricData.lyric[D][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(I){const O=parseInt(I[1])*60+parseInt(I[2]);if(k>=O){l=D;break}}}let n=0;t.lyricData.translatedLyric.length===0?n=-(l-1)*67:n=-l*100;const p=document.querySelector(".lyric-box");return p&&(p.style.transform=`translateY(${n}px)`),l}),g=B({status:"已暂停",name:"暂无歌曲"}),S=()=>{g.status&&g.name?document.title=g.status+" - "+g.name:document.title="歌曲组件"};return H(()=>t.songData?.player?.isPaused,s=>{s?g.status="已暂停":g.status="播放中",S()}),H(()=>t.songData?.track?.title,s=>{g.name=s,S()}),q(()=>{S(),t.resetSongData(),T()}),(s,k)=>(e(),_(a(J),{width:"1880",height:"280","box-style":{backgroundColor:s.none}},{default:h(()=>[r("div",{class:"song-container",style:N({"--theme-color":L.value,"--text-color":i.value,"--bg-color":v.value[2]||i.value,"--shadow-color":E.value,"--stress-color":v.value[3]})},[P(r("img",{id:"cover",class:b(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,M),[[V,a(t).songData?.track?.cover]]),P(r("img",{class:b(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:G,alt:""},null,2),[[V,!a(t).songData?.track?.cover]]),r("div",Y,[d.some(l=>l.length>0)?(e(),o("div",K,[(e(),o("div",{key:a(y)},[A(m,{color:i.value,"is-bold":"bold","content-align":"space-evenly"},{default:h(()=>[(e(!0),o(x,null,w(d[a(y)],(l,n)=>(e(),o(x,null,[r("span",null,c(l),1),n<d[a(y)].length-1?(e(),o("span",Q,"|")):u("",!0)],64))),256))]),_:1},8,["color"])]))])):u("",!0),d.some(l=>l.length!==0)?(e(),o("div",R,[a(t).songData?.track?.title?(e(),_(m,{key:0,color:i.value,"is-bold":"bold"},{default:h(()=>[C(c(a(t).songData?.track?.title),1)]),_:1},8,["color"])):u("",!0),k[0]||(k[0]=r("span",null,"-",-1)),a(t).songData?.track?.author?(e(),_(m,{key:1,color:i.value,"font-size":"35px"},{default:h(()=>[C(c(a(t).songData?.track?.author),1)]),_:1},8,["color"])):u("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),o("span",U,"暂无歌曲信息")):u("",!0)])):(e(),o("div",W,[a(t).songData?.track?.title?(e(),_(m,{key:0,color:i.value,"is-bold":"bold"},{default:h(()=>[C(c(a(t).songData?.track?.title),1)]),_:1},8,["color"])):u("",!0),a(t).songData?.track?.author?(e(),_(m,{key:1,color:i.value,"font-size":"35px"},{default:h(()=>[C(c(a(t).songData?.track?.author),1)]),_:1},8,["color"])):u("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),o("span",X,"暂无歌曲信息")):u("",!0)])),r("div",Z,[r("span",null,c(a(t).songData?.player?.seekbarCurrentPositionHuman),1),r("div",{class:"process-bar",style:N({"--bg-color":v.value[2]||L.value,"--stress-color":v.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4),r("span",null,c(a(t).songData?.track?.durationHuman),1)])]),r("div",tt,[a(t).lyricData.lyric.length>0?(e(),o("div",at,[a(t).lyricData.translatedLyric.length===0?(e(!0),o(x,{key:0},w(a(t).lyricData.lyric,(l,n)=>(e(),o("div",{class:b(["lyric-line",{active:n===z.value}]),key:n},[r("span",null,c(l[2]),1)],2))),128)):(e(!0),o(x,{key:1},w(a(t).lyricData.lyric,(l,n)=>(e(),o("div",{class:b(["lyric-line-translated",{active:n===z.value}]),key:n},[r("span",et,c(l[2]),1),r("span",ot,c(a(t).lyricData.translatedLyric.find(p=>p[1]===a(t).lyricData.lyric[n][1])?.[2]||""),1)],2))),128))])):(e(),o("div",st,"暂无歌词")),r("div",rt,[(e(),o("img",{key:a(t).songData?.track?.cover,src:a(t).songData?.track?.cover,alt:""},null,8,lt))])])],4)]),_:1},8,["box-style"]))}},gt=F(nt,[["__scopeId","data-v-d29dc732"]]);export{gt as default};
