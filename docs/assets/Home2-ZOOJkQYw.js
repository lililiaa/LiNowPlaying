import{c2 as dt,aK as rt,a1 as w,X as gt,a3 as lt,a2 as yt,as as x,at as k,L as a,am as r,ap as n,aA as nt,aE as ct,aq as T,aF as it,al as l,an as d,aH as mt,ao as L,bd as P,az as i,bb as z}from"./index-Bp0Pw69C.js";import{_ as ht}from"./music-Def25HgW.js";import"./color-thief-DF3QbzqH.js";import{T as _t,o as C}from"./v-scale-screen-DA54TNBm.js";import{_ as pt}from"./plugin-vueexport-helper-DlAUqK2U.js";const vt=["src"],kt={class:"basic-info"},ft={key:0,class:"game-info"},Dt={key:0},bt={key:1,class:"song-info"},xt={key:2},Ct={key:2,class:"song-info2"},St={key:2},It={class:"process-box"},wt={class:"lyric-info"},Tt={key:0,class:"lyric-box"},Lt={class:"original"},zt={class:"translated"},Ht={key:1,class:"lyric-empty"},Nt={__name:"Home2",setup(Pt){const t=dt(),g=rt(JSON.parse(localStorage.getItem("extraInfo")));let _=0;const B=()=>{let s=_;do s=(s+1)%g.length;while(g[s].length===0&&s!==_);g[s].length>0&&(_=s),setTimeout(B,8e3)},V=w(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=w(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),ut=w(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),S=w([]),E=gt(()=>{var D,b;const s=((b=(D=t.songData)==null?void 0:D.player)==null?void 0:b.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(s[0])*60+parseInt(s[1]);let m=-1;for(let h=t.lyricData.lyric.length-1;h>=0;h--){const v=t.lyricData.lyric[h][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(v){const I=parseInt(v[1])*60+parseInt(v[2]);if(c>=I){m=h;break}}}let p=0;t.lyricData.translatedLyric.length===0?p=-(m-1)*67:p=-m*100;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(p,"px)")),m}),y=rt({status:"已暂停",name:"暂无歌曲"}),H=()=>{y.status&&y.name?document.title=y.status+" - "+y.name:document.title="歌曲组件"};return lt(()=>{var s,c;return(c=(s=t.songData)==null?void 0:s.player)==null?void 0:c.isPaused},s=>{s?y.status="已暂停":y.status="播放中",H()}),lt(()=>{var s,c;return(c=(s=t.songData)==null?void 0:s.track)==null?void 0:c.title},s=>{y.name=s,H()}),yt(()=>{H(),t.resetSongData(),B()}),(s,c)=>(r(),x(a(_t),{width:1880,height:280,"box-style":{backgroundColor:"none"}},{default:k(()=>{var m,p,f,D,b,h,v,I,q,F,A,J,K,M,O,X,Y,$,j,G,Q,R,U,W,Z,tt,at,et;return[n("div",{class:"song-container",style:nt({"--theme-color":V.value,"--text-color":u.value,"--bg-color":S.value[2]||u.value,"--shadow-color":ut.value,"--stress-color":S.value[3]})},[ct(n("img",{id:"cover",class:T(["cover",{changing:a(t).isChanging}]),src:(p=(m=a(t).songData)==null?void 0:m.track)==null?void 0:p.cover,alt:"封面"},null,10,vt),[[it,(D=(f=a(t).songData)==null?void 0:f.track)==null?void 0:D.cover]]),ct(n("img",{class:T(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ht,alt:""},null,2),[[it,!((h=(b=a(t).songData)==null?void 0:b.track)!=null&&h.cover)]]),n("div",kt,[g.some(e=>e.length>0)?(r(),l("div",ft,[(r(),l("div",{key:a(_)},[mt(C,{color:u.value,"is-bold":"bold","content-align":"space-evenly"},{default:k(()=>[(r(!0),l(L,null,P(g[a(_)],(e,o)=>(r(),l(L,null,[n("span",null,i(e),1),o<g[a(_)].length-1?(r(),l("span",Dt,"|")):d("",!0)],64))),256))]),_:1},8,["color"])]))])):d("",!0),g.some(e=>e.length!==0)?(r(),l("div",bt,[(I=(v=a(t).songData)==null?void 0:v.track)!=null&&I.title?(r(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:k(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),c[0]||(c[0]=n("span",null,"-",-1)),(F=(q=a(t).songData)==null?void 0:q.track)!=null&&F.author?(r(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:k(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((J=(A=a(t).songData)==null?void 0:A.track)!=null&&J.title)&&!((M=(K=a(t).songData)==null?void 0:K.track)!=null&&M.author)?(r(),l("span",xt,"暂无歌曲信息")):d("",!0)])):(r(),l("div",Ct,[(X=(O=a(t).songData)==null?void 0:O.track)!=null&&X.title?(r(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:k(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),($=(Y=a(t).songData)==null?void 0:Y.track)!=null&&$.author?(r(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:k(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((G=(j=a(t).songData)==null?void 0:j.track)!=null&&G.title)&&!((R=(Q=a(t).songData)==null?void 0:Q.track)!=null&&R.author)?(r(),l("span",St,"暂无歌曲信息")):d("",!0)])),n("div",It,[n("span",null,i((W=(U=a(t).songData)==null?void 0:U.player)==null?void 0:W.seekbarCurrentPositionHuman),1),n("div",{class:"process-bar",style:nt({"--bg-color":S.value[2]||V.value,"--stress-color":S.value[3]||u.value,"--process":((tt=(Z=a(t).songData)==null?void 0:Z.player)==null?void 0:tt.statePercent)||0})},null,4),n("span",null,i((et=(at=a(t).songData)==null?void 0:at.track)==null?void 0:et.durationHuman),1)])]),n("div",wt,[a(t).lyricData.lyric.length>0?(r(),l("div",Tt,[a(t).lyricData.translatedLyric.length===0?(r(!0),l(L,{key:0},P(a(t).lyricData.lyric,(e,o)=>(r(),l("div",{class:T(["lyric-line",{active:o===E.value}]),key:o},[n("span",null,i(e[2]),1)],2))),128)):(r(!0),l(L,{key:1},P(a(t).lyricData.lyric,(e,o)=>{var ot,st;return r(),l("div",{class:T(["lyric-line-translated",{active:o===E.value}]),key:o},[n("span",Lt,i((ot=a(t).lyricData.translatedLyric.find(N=>N[1]===a(t).lyricData.lyric[o][1]))!=null&&ot[2]?e[2]:""),1),n("span",zt,i(((st=a(t).lyricData.translatedLyric.find(N=>N[1]===a(t).lyricData.lyric[o][1]))==null?void 0:st[2])||e[2]),1)],2)}),128))])):(r(),l("div",Ht,"暂无歌词"))])],4)]}),_:1}))}},At=pt(Nt,[["__scopeId","data-v-51ca4e5c"]]);export{At as default};
