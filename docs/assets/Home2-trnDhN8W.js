import{c2 as ht,aK as it,a1 as w,X as mt,a3 as ut,a2 as vt,as as x,at as p,L as a,am as s,ap as n,aA as dt,aE as gt,aq as T,aF as yt,al as l,an as d,aH as kt,ao as L,bd as P,az as i,bb as z}from"./index-D_YEYRn5.js";import{_ as pt}from"./music-Def25HgW.js";import{T as ft,o as C}from"./v-scale-screen-QmHYQi8k.js";import{_ as Dt}from"./plugin-vueexport-helper-DlAUqK2U.js";const bt=["src"],xt={class:"basic-info"},Ct={key:0,class:"game-info"},St={key:0},It={key:1,class:"song-info"},wt={key:2},Tt={key:2,class:"song-info2"},Lt={key:2},zt={class:"process-box"},Ht={class:"lyric-info"},Nt={key:0,class:"lyric-box"},Pt={class:"original"},Bt={class:"translated"},Vt={key:1,class:"lyric-empty"},Et={class:"lyric-bg"},qt=["src"],Ft={__name:"Home2",setup(At){const t=ht(),g=it(JSON.parse(localStorage.getItem("extraInfo")));let m=0;const B=()=>{let r=m;do r=(r+1)%g.length;while(g[r].length===0&&r!==m);g[r].length>0&&(m=r),setTimeout(B,8e3)},V=w(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=w(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),_t=w(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),S=w([]),E=mt(()=>{var D,b;const r=((b=(D=t.songData)==null?void 0:D.player)==null?void 0:b.seekbarCurrentPositionHuman.split(":"))||0,c=parseInt(r[0])*60+parseInt(r[1]);let _=-1;for(let h=t.lyricData.lyric.length-1;h>=0;h--){const k=t.lyricData.lyric[h][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(k){const I=parseInt(k[1])*60+parseInt(k[2]);if(c>=I){_=h;break}}}let v=0;t.lyricData.translatedLyric.length===0?v=-(_-1)*67:v=-_*100;const f=document.querySelector(".lyric-box");return f&&(f.style.transform="translateY(".concat(v,"px)")),_}),y=it({status:"已暂停",name:"暂无歌曲"}),H=()=>{y.status&&y.name?document.title=y.status+" - "+y.name:document.title="歌曲组件"};return ut(()=>{var r,c;return(c=(r=t.songData)==null?void 0:r.player)==null?void 0:c.isPaused},r=>{r?y.status="已暂停":y.status="播放中",H()}),ut(()=>{var r,c;return(c=(r=t.songData)==null?void 0:r.track)==null?void 0:c.title},r=>{y.name=r,H()}),vt(()=>{H(),t.resetSongData(),B()}),(r,c)=>(s(),x(a(ft),{width:1880,height:280,"box-style":{backgroundColor:"none"}},{default:p(()=>{var _,v,f,D,b,h,k,I,q,F,A,J,K,M,O,X,Y,$,j,G,Q,R,U,W,Z,tt,at,et,ot,st,rt,lt;return[n("div",{class:"song-container",style:dt({"--theme-color":V.value,"--text-color":u.value,"--bg-color":S.value[2]||u.value,"--shadow-color":_t.value,"--stress-color":S.value[3]})},[gt(n("img",{id:"cover",class:T(["cover",{changing:a(t).isChanging}]),src:(v=(_=a(t).songData)==null?void 0:_.track)==null?void 0:v.cover,alt:"封面"},null,10,bt),[[yt,(D=(f=a(t).songData)==null?void 0:f.track)==null?void 0:D.cover]]),gt(n("img",{class:T(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pt,alt:""},null,2),[[yt,!((h=(b=a(t).songData)==null?void 0:b.track)!=null&&h.cover)]]),n("div",xt,[g.some(e=>e.length>0)?(s(),l("div",Ct,[(s(),l("div",{key:a(m)},[kt(C,{color:u.value,"is-bold":"bold","content-align":"space-evenly"},{default:p(()=>[(s(!0),l(L,null,P(g[a(m)],(e,o)=>(s(),l(L,null,[n("span",null,i(e),1),o<g[a(m)].length-1?(s(),l("span",St,"|")):d("",!0)],64))),256))]),_:1},8,["color"])]))])):d("",!0),g.some(e=>e.length!==0)?(s(),l("div",It,[(I=(k=a(t).songData)==null?void 0:k.track)!=null&&I.title?(s(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),c[0]||(c[0]=n("span",null,"-",-1)),(F=(q=a(t).songData)==null?void 0:q.track)!=null&&F.author?(s(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((J=(A=a(t).songData)==null?void 0:A.track)!=null&&J.title)&&!((M=(K=a(t).songData)==null?void 0:K.track)!=null&&M.author)?(s(),l("span",wt,"暂无歌曲信息")):d("",!0)])):(s(),l("div",Tt,[(X=(O=a(t).songData)==null?void 0:O.track)!=null&&X.title?(s(),x(C,{key:0,color:u.value,"is-bold":"bold"},{default:p(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.title),1)]}),_:1},8,["color"])):d("",!0),($=(Y=a(t).songData)==null?void 0:Y.track)!=null&&$.author?(s(),x(C,{key:1,color:u.value,"font-size":"35px"},{default:p(()=>{var e,o;return[z(i((o=(e=a(t).songData)==null?void 0:e.track)==null?void 0:o.author),1)]}),_:1},8,["color"])):d("",!0),!((G=(j=a(t).songData)==null?void 0:j.track)!=null&&G.title)&&!((R=(Q=a(t).songData)==null?void 0:Q.track)!=null&&R.author)?(s(),l("span",Lt,"暂无歌曲信息")):d("",!0)])),n("div",zt,[n("span",null,i((W=(U=a(t).songData)==null?void 0:U.player)==null?void 0:W.seekbarCurrentPositionHuman),1),n("div",{class:"process-bar",style:dt({"--bg-color":S.value[2]||V.value,"--stress-color":S.value[3]||u.value,"--process":((tt=(Z=a(t).songData)==null?void 0:Z.player)==null?void 0:tt.statePercent)||0})},null,4),n("span",null,i((et=(at=a(t).songData)==null?void 0:at.track)==null?void 0:et.durationHuman),1)])]),n("div",Ht,[a(t).lyricData.lyric.length>0?(s(),l("div",Nt,[a(t).lyricData.translatedLyric.length===0?(s(!0),l(L,{key:0},P(a(t).lyricData.lyric,(e,o)=>(s(),l("div",{class:T(["lyric-line",{active:o===E.value}]),key:o},[n("span",null,i(e[2]),1)],2))),128)):(s(!0),l(L,{key:1},P(a(t).lyricData.lyric,(e,o)=>{var nt,ct;return s(),l("div",{class:T(["lyric-line-translated",{active:o===E.value}]),key:o},[n("span",Pt,i((nt=a(t).lyricData.translatedLyric.find(N=>N[1]===a(t).lyricData.lyric[o][1]))!=null&&nt[2]?e[2]:""),1),n("span",Bt,i(((ct=a(t).lyricData.translatedLyric.find(N=>N[1]===a(t).lyricData.lyric[o][1]))==null?void 0:ct[2])||e[2]),1)],2)}),128))])):(s(),l("div",Vt,"暂无歌词")),n("div",Et,[(s(),l("img",{key:(st=(ot=a(t).songData)==null?void 0:ot.track)==null?void 0:st.cover,src:(lt=(rt=a(t).songData)==null?void 0:rt.track)==null?void 0:lt.cover,alt:""},null,8,qt))])])],4)]}),_:1}))}},Xt=Dt(Ft,[["__scopeId","data-v-8430f9a0"]]);export{Xt as default};
