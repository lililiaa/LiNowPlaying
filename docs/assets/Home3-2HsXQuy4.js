import{bR as W,aH as O,_ as S,T as X,a0 as R,$ as Z,ap as B,aq as I,I as a,aj as e,am as c,ax as Y,ai as l,al as m,ba as w,an as L,aw as h,aB as A,aC as G,ak as f,aE as tt,b8 as K}from"./index-B2dB5dia.js";import{_ as at,a as et}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as st,o as N}from"./v-scale-screen-CMnKDFO9.js";const ot={class:"lyric-container"},rt={key:0,class:"lyric-box"},lt={class:"original"},ct={class:"translated"},nt={key:1,class:"lyric-empty"},it={class:"other-container"},ut=["src"],dt={key:0,class:"extra-container"},gt={key:0},yt={class:"song-container"},_t={key:2},mt={__name:"Home3",setup(ht){const t=W(),Q=O(JSON.parse(localStorage.getItem("extraInfo"))),H=S(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),g=S(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),U=S(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),D=S([]),P=X(()=>{var p,k;const r=((k=(p=t.songData)==null?void 0:p.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,n=parseInt(r[0])*60+parseInt(r[1]);let u=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const _=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(_){const x=parseInt(_[1])*60+parseInt(_[2]);if(n>=x){u=d;break}}}let y=0;t.lyricData.translatedLyric.length===0?y=-(u-3)*100:y=-(u-2)*160;const v=document.querySelector(".lyric-box");return v&&(v.style.transform="translateY(".concat(y,"px)")),u}),i=O({status:"已暂停",name:"暂无歌曲"}),T=()=>{i.status&&i.name?document.title=i.status+" - "+i.name:document.title="歌曲组件"};return R(()=>{var r,n;return(n=(r=t.songData)==null?void 0:r.player)==null?void 0:n.isPaused},r=>{r?i.status="已暂停":i.status="播放中",T()}),R(()=>{var r,n;return(n=(r=t.songData)==null?void 0:r.track)==null?void 0:n.title},r=>{i.name=r,T()}),Z(()=>{T(),t.resetSongData()}),(r,n)=>(e(),B(a(st),{width:1880,height:880,"box-style":{backgroundColor:"none"}},{default:I(()=>{var u,y,v,p,k,d,_,x,V,q,E,$,j,F,J,M;return[c("div",{class:"main",style:Y({"--theme-color":H.value,"--text-color":g.value,"--bg-color":D.value[2]||g.value,"--shadow-color":U.value,"--stress-color":D.value[3]})},[c("div",ot,[a(t).lyricData.lyric.length>0?(e(),l("div",rt,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(m,{key:0},w(a(t).lyricData.lyric,(o,s)=>(e(),l("div",{class:L(["lyric-line",{active:s===P.value}]),key:s},[c("span",null,h(o[2]),1)],2))),128)):(e(!0),l(m,{key:1},w(a(t).lyricData.lyric,(o,s)=>{var b,C;return e(),l("div",{class:L(["lyric-line-translated",{active:s===P.value}]),key:s},[c("span",lt,h((b=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))!=null&&b[2]?o[2]:""),1),c("span",ct,h(((C=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))==null?void 0:C[2])||o[2]),1)],2)}),128))])):(e(),l("div",nt,"暂无歌词"))]),c("div",it,[A(c("img",{id:"cover",class:L(["cover",{changing:a(t).isChanging}]),src:(y=(u=a(t).songData)==null?void 0:u.track)==null?void 0:y.cover,alt:"封面"},null,10,ut),[[G,(p=(v=a(t).songData)==null?void 0:v.track)==null?void 0:p.cover]]),A(c("img",{class:L(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:et,alt:""},null,2),[[G,!((d=(k=a(t).songData)==null?void 0:k.track)!=null&&d.cover)]]),(e(!0),l(m,null,w(Q,(o,s)=>(e(),l(m,{key:s},[o.length>0?(e(),l("div",dt,[tt(N,{color:g.value,"content-align":"space-evenly"},{default:I(()=>[(e(!0),l(m,null,w(o,(b,C)=>(e(),l(m,null,[c("span",null,h(b),1),C<o.length-1?(e(),l("span",gt,"|")):f("",!0)],64))),256))]),_:2},1032,["color"])])):f("",!0)],64))),128)),c("div",yt,[(x=(_=a(t).songData)==null?void 0:_.track)!=null&&x.title?(e(),B(N,{key:0,color:g.value,"is-bold":"bold","font-size":"50px"},{default:I(()=>{var o,s;return[K(h((s=(o=a(t).songData)==null?void 0:o.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):f("",!0),(q=(V=a(t).songData)==null?void 0:V.track)!=null&&q.author?(e(),B(N,{key:1,color:g.value,"font-size":"40px"},{default:I(()=>{var o,s;return[K(h((s=(o=a(t).songData)==null?void 0:o.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):f("",!0),!(($=(E=a(t).songData)==null?void 0:E.track)!=null&&$.title)&&!((F=(j=a(t).songData)==null?void 0:j.track)!=null&&F.author)?(e(),l("span",_t,"暂无歌曲信息")):f("",!0)]),c("div",{class:"process-container",style:Y({"--bg-color":D.value[2]||H.value,"--stress-color":D.value[3]||g.value,"--process":((M=(J=a(t).songData)==null?void 0:J.player)==null?void 0:M.statePercent)||0})},null,4)])],4)]}),_:1}))}},ft=at(mt,[["__scopeId","data-v-44e30d07"]]);export{ft as default};
