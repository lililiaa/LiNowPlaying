import{bR as W,aH as O,_ as S,T as X,a0 as R,$ as Z,ap as B,aq as I,I as a,aj as e,am as c,ax as Y,ai as l,al as _,ba as w,an as L,aw as h,aB as A,aC as G,ak as f,aE as tt,b8 as K}from"./index-BVK8qiwG.js";import{_ as at,a as et}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as st,o as N}from"./v-scale-screen-BA57R6-v.js";const ot={class:"lyric-container"},rt={key:0,class:"lyric-box"},lt={class:"original"},ct={class:"translated"},nt={key:1,class:"lyric-empty"},it={class:"other-container"},ut=["src"],dt={key:0,class:"extra-container"},yt={key:0},gt={class:"song-container"},mt={key:2},_t={__name:"Home3",setup(ht){const t=W(),Q=O(JSON.parse(localStorage.getItem("extraInfo"))),H=S(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),y=S(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),U=S(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),D=S([]),P=X(()=>{var p,k;const o=((k=(p=t.songData)==null?void 0:p.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,n=parseInt(o[0])*60+parseInt(o[1]);let u=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const m=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const b=parseInt(m[1])*60+parseInt(m[2]);if(n>=b){u=d;break}}}let g=0;t.lyricData.translatedLyric.length===0?g=-(u-3)*100:g=-(u-2)*160;const v=document.querySelector(".lyric-box");return v&&(v.style.transform="translateY(".concat(g,"px)")),u}),i=O({status:"已暂停",name:"暂无歌曲"}),T=()=>{i.status&&i.name?document.title=i.status+" - "+i.name:document.title="歌曲组件"};return R(()=>{var o,n;return(n=(o=t.songData)==null?void 0:o.player)==null?void 0:n.isPaused},o=>{o?i.status="已暂停":i.status="播放中",T()}),R(()=>{var o,n;return(n=(o=t.songData)==null?void 0:o.track)==null?void 0:n.title},o=>{i.name=o,T()}),Z(()=>{T(),t.resetSongData()}),(o,n)=>(e(),B(a(st),{width:"1880",height:"880","box-style":{backgroundColor:o.none}},{default:I(()=>{var u,g,v,p,k,d,m,b,V,q,E,$,j,F,J,M;return[c("div",{class:"main",style:Y({"--theme-color":H.value,"--text-color":y.value,"--bg-color":D.value[2]||y.value,"--shadow-color":U.value,"--stress-color":D.value[3]})},[c("div",ot,[a(t).lyricData.lyric.length>0?(e(),l("div",rt,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(_,{key:0},w(a(t).lyricData.lyric,(r,s)=>(e(),l("div",{class:L(["lyric-line",{active:s===P.value}]),key:s},[c("span",null,h(r[2]),1)],2))),128)):(e(!0),l(_,{key:1},w(a(t).lyricData.lyric,(r,s)=>{var x,C;return e(),l("div",{class:L(["lyric-line-translated",{active:s===P.value}]),key:s},[c("span",lt,h((x=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))!=null&&x[2]?r[2]:""),1),c("span",ct,h(((C=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))==null?void 0:C[2])||r[2]),1)],2)}),128))])):(e(),l("div",nt,"暂无歌词"))]),c("div",it,[A(c("img",{id:"cover",class:L(["cover",{changing:a(t).isChanging}]),src:(g=(u=a(t).songData)==null?void 0:u.track)==null?void 0:g.cover,alt:"封面"},null,10,ut),[[G,(p=(v=a(t).songData)==null?void 0:v.track)==null?void 0:p.cover]]),A(c("img",{class:L(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:et,alt:""},null,2),[[G,!((d=(k=a(t).songData)==null?void 0:k.track)!=null&&d.cover)]]),(e(!0),l(_,null,w(Q,(r,s)=>(e(),l(_,{key:s},[r.length>0?(e(),l("div",dt,[tt(N,{color:y.value,"content-align":"space-evenly"},{default:I(()=>[(e(!0),l(_,null,w(r,(x,C)=>(e(),l(_,null,[c("span",null,h(x),1),C<r.length-1?(e(),l("span",yt,"|")):f("",!0)],64))),256))]),_:2},1032,["color"])])):f("",!0)],64))),128)),c("div",gt,[(b=(m=a(t).songData)==null?void 0:m.track)!=null&&b.title?(e(),B(N,{key:0,color:y.value,"is-bold":"bold","font-size":"50px"},{default:I(()=>{var r,s;return[K(h((s=(r=a(t).songData)==null?void 0:r.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):f("",!0),(q=(V=a(t).songData)==null?void 0:V.track)!=null&&q.author?(e(),B(N,{key:1,color:y.value,"font-size":"40px"},{default:I(()=>{var r,s;return[K(h((s=(r=a(t).songData)==null?void 0:r.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):f("",!0),!(($=(E=a(t).songData)==null?void 0:E.track)!=null&&$.title)&&!((F=(j=a(t).songData)==null?void 0:j.track)!=null&&F.author)?(e(),l("span",mt,"暂无歌曲信息")):f("",!0)]),c("div",{class:"process-container",style:Y({"--bg-color":D.value[2]||H.value,"--stress-color":D.value[3]||y.value,"--process":((M=(J=a(t).songData)==null?void 0:J.player)==null?void 0:M.statePercent)||0})},null,4)])],4)]}),_:1},8,["box-style"]))}},ft=at(_t,[["__scopeId","data-v-3c035ca3"]]);export{ft as default};
