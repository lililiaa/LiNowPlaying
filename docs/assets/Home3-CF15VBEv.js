import{bO as H,aG as T,_ as D,T as O,a0 as w,$,ao as x,ap as v,I as a,ai as e,al as l,aw as L,ah as s,ak as y,b8 as h,am as p,av as g,aA as z,aB as B,aj as m,aD as j,by as N}from"./index-DkKwMBXU.js";import{_ as q,a as A}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as E,o as b}from"./v-scale-screen-BZ81STDo.js";const F={class:"lyric-container"},G={key:0,class:"lyric-box"},J={class:"original"},M={class:"translated"},Y={key:1,class:"lyric-empty"},K={class:"other-container"},Q=["src"],R={key:0,class:"extra-container"},U={key:0},W={class:"song-container"},X={key:2},Z={__name:"Home3",setup(tt){const t=H(),P=T(JSON.parse(localStorage.getItem("extraInfo"))),S=D(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=D(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),_=D([]),C=O(()=>{const n=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,I=parseInt(n[0])*60+parseInt(n[1]);let o=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const k=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(k){const V=parseInt(k[1])*60+parseInt(k[2]);if(I>=V){o=d;break}}}let r=0;t.lyricData.translatedLyric.length===0?r=-(o-3)*100:r=-(o-2)*160;const u=document.querySelector(".lyric-box");return u&&(u.style.transform=`translateY(${r}px)`),o}),c=T({status:"已暂停",name:"暂无歌曲"}),f=()=>{c.status&&c.name?document.title=c.status+" - "+c.name:document.title="歌曲组件"};return w(()=>t.songData?.player?.isPaused,n=>{n?c.status="已暂停":c.status="播放中",f()}),w(()=>t.songData?.track?.title,n=>{c.name=n,f()}),$(()=>{f(),t.resetSongData()}),(n,I)=>(e(),x(a(E),{width:"1880",height:"880","box-style":{backgroundColor:n.none}},{default:v(()=>[l("div",{class:"main",style:L({"--theme-color":S.value,"--text-color":i.value,"--bg-color":_.value[2]||i.value,"--stress-color":_.value[3]})},[l("div",F,[a(t).lyricData.lyric.length>0?(e(),s("div",G,[a(t).lyricData.translatedLyric.length===0?(e(!0),s(y,{key:0},h(a(t).lyricData.lyric,(o,r)=>(e(),s("div",{class:p(["lyric-line",{active:r===C.value}]),key:r},[l("span",null,g(o[2]),1)],2))),128)):(e(!0),s(y,{key:1},h(a(t).lyricData.lyric,(o,r)=>(e(),s("div",{class:p(["lyric-line-translated",{active:r===C.value}]),key:r},[l("span",J,g(o[2]),1),l("span",M,g(a(t).lyricData.translatedLyric.find(u=>u[1]===a(t).lyricData.lyric[r][1])?.[2]||""),1)],2))),128))])):(e(),s("div",Y,"暂无歌词"))]),l("div",K,[z(l("img",{id:"cover",class:p(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,Q),[[B,a(t).songData?.track?.cover]]),z(l("img",{class:p(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:A,alt:""},null,2),[[B,!a(t).songData?.track?.cover]]),(e(!0),s(y,null,h(P,(o,r)=>(e(),s(y,{key:r},[o.length>0?(e(),s("div",R,[j(b,{color:i.value,"content-align":"space-evenly"},{default:v(()=>[(e(!0),s(y,null,h(o,(u,d)=>(e(),s(y,null,[l("span",null,g(u),1),d<o.length-1?(e(),s("span",U,"|")):m("",!0)],64))),256))]),_:2},1032,["color"])])):m("",!0)],64))),128)),l("div",W,[a(t).songData?.track?.title?(e(),x(b,{key:0,color:i.value,"is-bold":"bold","font-size":"50px"},{default:v(()=>[N(g(a(t).songData?.track?.title),1)]),_:1},8,["color"])):m("",!0),a(t).songData?.track?.author?(e(),x(b,{key:1,color:i.value,"font-size":"40px"},{default:v(()=>[N(g(a(t).songData?.track?.author),1)]),_:1},8,["color"])):m("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),s("span",X,"暂无歌曲信息")):m("",!0)]),l("div",{class:"process-container",style:L({"--bg-color":_.value[2]||S.value,"--stress-color":_.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4)])],4)]),_:1},8,["box-style"]))}},ot=q(Z,[["__scopeId","data-v-aedef3cf"]]);export{ot as default};
