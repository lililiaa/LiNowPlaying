import{bO as W,aG as G,_ as S,T as X,a0 as J,$ as Z,ao as B,ap as I,I as a,ai as e,al as c,aw as M,ah as l,ak as m,b8 as w,am as L,av as _,aA as Y,aB as K,aj as f,aD as tt,by as Q}from"./index-CPwaUlES.js";import{_ as at,a as et}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as st,o as N}from"./v-scale-screen-CUPzLuto.js";const ot={class:"lyric-container"},rt={key:0,class:"lyric-box"},lt={class:"original"},ct={class:"translated"},nt={key:1,class:"lyric-empty"},it={class:"other-container"},ut=["src"],dt={key:0,class:"extra-container"},yt={key:0},gt={class:"song-container"},ht={key:2},mt={__name:"Home3",setup(_t){const t=W(),R=G(JSON.parse(localStorage.getItem("extraInfo"))),P=S(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),y=S(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),U=S(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),D=S([]),V=X(()=>{var p,k;const o=((k=(p=t.songData)==null?void 0:p.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,n=parseInt(o[0])*60+parseInt(o[1]);let u=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const h=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(h){const b=parseInt(h[1])*60+parseInt(h[2]);if(n>=b){u=d;break}}}let g=0;t.lyricData.translatedLyric.length===0?g=-(u-3)*100:g=-(u-2)*160;const v=document.querySelector(".lyric-box");return v&&(v.style.transform="translateY(".concat(g,"px)")),u}),i=G({status:"已暂停",name:"暂无歌曲"}),T=()=>{i.status&&i.name?document.title=i.status+" - "+i.name:document.title="歌曲组件"};return J(()=>{var o,n;return(n=(o=t.songData)==null?void 0:o.player)==null?void 0:n.isPaused},o=>{o?i.status="已暂停":i.status="播放中",T()}),J(()=>{var o,n;return(n=(o=t.songData)==null?void 0:o.track)==null?void 0:n.title},o=>{i.name=o,T()}),Z(()=>{T(),t.resetSongData()}),(o,n)=>(e(),B(a(st),{width:"1880",height:"880","box-style":{backgroundColor:o.none}},{default:I(()=>{var u,g,v,p,k,d,h,b,H,O,$,j,q,A,E,F;return[c("div",{class:"main",style:M({"--theme-color":P.value,"--text-color":y.value,"--bg-color":D.value[2]||y.value,"--shadow-color":U.value,"--stress-color":D.value[3]})},[c("div",ot,[a(t).lyricData.lyric.length>0?(e(),l("div",rt,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(m,{key:0},w(a(t).lyricData.lyric,(r,s)=>(e(),l("div",{class:L(["lyric-line",{active:s===V.value}]),key:s},[c("span",null,_(r[2]),1)],2))),128)):(e(!0),l(m,{key:1},w(a(t).lyricData.lyric,(r,s)=>{var x,C;return e(),l("div",{class:L(["lyric-line-translated",{active:s===V.value}]),key:s},[c("span",lt,_((x=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))!=null&&x[2]?r[2]:""),1),c("span",ct,_(((C=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))==null?void 0:C[2])||r[2]),1)],2)}),128))])):(e(),l("div",nt,"暂无歌词"))]),c("div",it,[Y(c("img",{id:"cover",class:L(["cover",{changing:a(t).isChanging}]),src:(g=(u=a(t).songData)==null?void 0:u.track)==null?void 0:g.cover,alt:"封面"},null,10,ut),[[K,(p=(v=a(t).songData)==null?void 0:v.track)==null?void 0:p.cover]]),Y(c("img",{class:L(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:et,alt:""},null,2),[[K,!((d=(k=a(t).songData)==null?void 0:k.track)!=null&&d.cover)]]),(e(!0),l(m,null,w(R,(r,s)=>(e(),l(m,{key:s},[r.length>0?(e(),l("div",dt,[tt(N,{color:y.value,"content-align":"space-evenly"},{default:I(()=>[(e(!0),l(m,null,w(r,(x,C)=>(e(),l(m,null,[c("span",null,_(x),1),C<r.length-1?(e(),l("span",yt,"|")):f("",!0)],64))),256))]),_:2},1032,["color"])])):f("",!0)],64))),128)),c("div",gt,[(b=(h=a(t).songData)==null?void 0:h.track)!=null&&b.title?(e(),B(N,{key:0,color:y.value,"is-bold":"bold","font-size":"50px"},{default:I(()=>{var r,s;return[Q(_((s=(r=a(t).songData)==null?void 0:r.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):f("",!0),(O=(H=a(t).songData)==null?void 0:H.track)!=null&&O.author?(e(),B(N,{key:1,color:y.value,"font-size":"40px"},{default:I(()=>{var r,s;return[Q(_((s=(r=a(t).songData)==null?void 0:r.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):f("",!0),!((j=($=a(t).songData)==null?void 0:$.track)!=null&&j.title)&&!((A=(q=a(t).songData)==null?void 0:q.track)!=null&&A.author)?(e(),l("span",ht,"暂无歌曲信息")):f("",!0)]),c("div",{class:"process-container",style:M({"--bg-color":D.value[2]||P.value,"--stress-color":D.value[3]||y.value,"--process":((F=(E=a(t).songData)==null?void 0:E.player)==null?void 0:F.statePercent)||0})},null,4)])],4)]}),_:1},8,["box-style"]))}},ft=at(mt,[["__scopeId","data-v-3c035ca3"]]);export{ft as default};
