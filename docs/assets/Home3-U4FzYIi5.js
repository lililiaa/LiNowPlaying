import{bO as O,aG as w,_,T as $,a0 as T,$ as j,ao as b,ap as v,I as a,ai as e,al as l,aw as L,ah as s,ak as g,b8 as p,am as k,av as y,aA as z,aB as B,aj as m,aD as q,by as N}from"./index-sLbQXXdP.js";import{_ as A,a as E}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as F,o as x}from"./v-scale-screen-dSyz_d23.js";const G={class:"lyric-container"},J={key:0,class:"lyric-box"},M={class:"original"},Y={class:"translated"},K={key:1,class:"lyric-empty"},Q={class:"other-container"},R=["src"],U={key:0,class:"extra-container"},W={key:0},X={class:"song-container"},Z={key:2},tt={__name:"Home3",setup(at){const t=O(),P=w(JSON.parse(localStorage.getItem("extraInfo"))),C=_(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=_(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),V=_(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),h=_([]),S=$(()=>{const c=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,I=parseInt(c[0])*60+parseInt(c[1]);let o=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const D=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(D){const H=parseInt(D[1])*60+parseInt(D[2]);if(I>=H){o=d;break}}}let r=0;t.lyricData.translatedLyric.length===0?r=-(o-3)*100:r=-(o-2)*160;const u=document.querySelector(".lyric-box");return u&&(u.style.transform=`translateY(${r}px)`),o}),n=w({status:"已暂停",name:"暂无歌曲"}),f=()=>{n.status&&n.name?document.title=n.status+" - "+n.name:document.title="歌曲组件"};return T(()=>t.songData?.player?.isPaused,c=>{c?n.status="已暂停":n.status="播放中",f()}),T(()=>t.songData?.track?.title,c=>{n.name=c,f()}),j(()=>{f(),t.resetSongData()}),(c,I)=>(e(),b(a(F),{width:"1880",height:"880","box-style":{backgroundColor:c.none}},{default:v(()=>[l("div",{class:"main",style:L({"--theme-color":C.value,"--text-color":i.value,"--bg-color":h.value[2]||i.value,"--shadow-color":V.value,"--stress-color":h.value[3]})},[l("div",G,[a(t).lyricData.lyric.length>0?(e(),s("div",J,[a(t).lyricData.translatedLyric.length===0?(e(!0),s(g,{key:0},p(a(t).lyricData.lyric,(o,r)=>(e(),s("div",{class:k(["lyric-line",{active:r===S.value}]),key:r},[l("span",null,y(o[2]),1)],2))),128)):(e(!0),s(g,{key:1},p(a(t).lyricData.lyric,(o,r)=>(e(),s("div",{class:k(["lyric-line-translated",{active:r===S.value}]),key:r},[l("span",M,y(o[2]),1),l("span",Y,y(a(t).lyricData.translatedLyric.find(u=>u[1]===a(t).lyricData.lyric[r][1])?.[2]||""),1)],2))),128))])):(e(),s("div",K,"暂无歌词"))]),l("div",Q,[z(l("img",{id:"cover",class:k(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,R),[[B,a(t).songData?.track?.cover]]),z(l("img",{class:k(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:E,alt:""},null,2),[[B,!a(t).songData?.track?.cover]]),(e(!0),s(g,null,p(P,(o,r)=>(e(),s(g,{key:r},[o.length>0?(e(),s("div",U,[q(x,{color:i.value,"content-align":"space-evenly"},{default:v(()=>[(e(!0),s(g,null,p(o,(u,d)=>(e(),s(g,null,[l("span",null,y(u),1),d<o.length-1?(e(),s("span",W,"|")):m("",!0)],64))),256))]),_:2},1032,["color"])])):m("",!0)],64))),128)),l("div",X,[a(t).songData?.track?.title?(e(),b(x,{key:0,color:i.value,"is-bold":"bold","font-size":"50px"},{default:v(()=>[N(y(a(t).songData?.track?.title),1)]),_:1},8,["color"])):m("",!0),a(t).songData?.track?.author?(e(),b(x,{key:1,color:i.value,"font-size":"40px"},{default:v(()=>[N(y(a(t).songData?.track?.author),1)]),_:1},8,["color"])):m("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),s("span",Z,"暂无歌曲信息")):m("",!0)]),l("div",{class:"process-container",style:L({"--bg-color":h.value[2]||C.value,"--stress-color":h.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4)])],4)]),_:1},8,["box-style"]))}},rt=A(tt,[["__scopeId","data-v-3c8b7011"]]);export{rt as default};
