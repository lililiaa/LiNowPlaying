import{c2 as U,aK as O,a1 as S,X as W,a3 as X,a2 as Z,as as N,at as I,L as a,am as e,ap as c,aA as Y,al as l,ao as _,bd as w,aq as L,az as h,aE as $,aF as j,an as k,aH as tt,bb as G}from"./index-D7UMz73x.js";import{_ as at}from"./music-Def25HgW.js";import{T as et,o as B}from"./v-scale-screen-nXKdRjgD.js";import{_ as st}from"./plugin-vueexport-helper-DlAUqK2U.js";const ot={class:"lyric-container"},rt={key:0,class:"lyric-box"},lt={class:"original"},ct={class:"translated"},nt={key:1,class:"lyric-empty"},it={class:"other-container"},ut=["src"],dt={key:0,class:"extra-container"},gt={key:0},yt={class:"song-container"},mt={key:2},_t={__name:"Home3",setup(ht){const t=U(),Q=O(JSON.parse(localStorage.getItem("extraInfo"))),H=S(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),g=S(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),R=S(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),D=S([]),P=W(()=>{var v,f;const r=((f=(v=t.songData)==null?void 0:v.player)==null?void 0:f.seekbarCurrentPositionHuman.split(":"))||0,n=parseInt(r[0])*60+parseInt(r[1]);let u=-1;for(let d=t.lyricData.lyric.length-1;d>=0;d--){const m=t.lyricData.lyric[d][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const b=parseInt(m[1])*60+parseInt(m[2]);if(n>=b){u=d;break}}}let y=0;t.lyricData.translatedLyric.length===0?y=-(u-3)*100:y=-(u-2)*160;const p=document.querySelector(".lyric-box");return p&&(p.style.transform="translateY(".concat(y,"px)")),u}),i=O({status:"已暂停",name:"暂无歌曲"}),T=()=>{i.status&&i.name?document.title=i.status+" - "+i.name:document.title="歌曲组件"};return X(()=>{var r,n;return(n=(r=t.songData)==null?void 0:r.player)==null?void 0:n.isPaused},r=>{r?i.status="已暂停":i.status="播放中",T()}),X(()=>{var r,n;return(n=(r=t.songData)==null?void 0:r.track)==null?void 0:n.title},r=>{i.name=r,T()}),Z(()=>{T(),t.resetSongData()}),(r,n)=>(e(),N(a(et),{width:1880,height:880,"box-style":{backgroundColor:"none"}},{default:I(()=>{var u,y,p,v,f,d,m,b,V,q,E,F,A,J,K,M;return[c("div",{class:"main",style:Y({"--theme-color":H.value,"--text-color":g.value,"--bg-color":D.value[2]||g.value,"--shadow-color":R.value,"--stress-color":D.value[3]})},[c("div",ot,[a(t).lyricData.lyric.length>0?(e(),l("div",rt,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(_,{key:0},w(a(t).lyricData.lyric,(o,s)=>(e(),l("div",{class:L(["lyric-line",{active:s===P.value}]),key:s},[c("span",null,h(o[2]),1)],2))),128)):(e(!0),l(_,{key:1},w(a(t).lyricData.lyric,(o,s)=>{var x,C;return e(),l("div",{class:L(["lyric-line-translated",{active:s===P.value}]),key:s},[c("span",lt,h((x=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))!=null&&x[2]?o[2]:""),1),c("span",ct,h(((C=a(t).lyricData.translatedLyric.find(z=>z[1]===a(t).lyricData.lyric[s][1]))==null?void 0:C[2])||o[2]),1)],2)}),128))])):(e(),l("div",nt,"暂无歌词"))]),c("div",it,[$(c("img",{id:"cover",class:L(["cover",{changing:a(t).isChanging}]),src:(y=(u=a(t).songData)==null?void 0:u.track)==null?void 0:y.cover,alt:"封面"},null,10,ut),[[j,(v=(p=a(t).songData)==null?void 0:p.track)==null?void 0:v.cover]]),$(c("img",{class:L(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:at,alt:""},null,2),[[j,!((d=(f=a(t).songData)==null?void 0:f.track)!=null&&d.cover)]]),(e(!0),l(_,null,w(Q,(o,s)=>(e(),l(_,{key:s},[o.length>0?(e(),l("div",dt,[tt(B,{color:g.value,"content-align":"space-evenly"},{default:I(()=>[(e(!0),l(_,null,w(o,(x,C)=>(e(),l(_,null,[c("span",null,h(x),1),C<o.length-1?(e(),l("span",gt,"|")):k("",!0)],64))),256))]),_:2},1032,["color"])])):k("",!0)],64))),128)),c("div",yt,[(b=(m=a(t).songData)==null?void 0:m.track)!=null&&b.title?(e(),N(B,{key:0,color:g.value,"is-bold":"bold","font-size":"50px"},{default:I(()=>{var o,s;return[G(h((s=(o=a(t).songData)==null?void 0:o.track)==null?void 0:s.title),1)]}),_:1},8,["color"])):k("",!0),(q=(V=a(t).songData)==null?void 0:V.track)!=null&&q.author?(e(),N(B,{key:1,color:g.value,"font-size":"40px"},{default:I(()=>{var o,s;return[G(h((s=(o=a(t).songData)==null?void 0:o.track)==null?void 0:s.author),1)]}),_:1},8,["color"])):k("",!0),!((F=(E=a(t).songData)==null?void 0:E.track)!=null&&F.title)&&!((J=(A=a(t).songData)==null?void 0:A.track)!=null&&J.author)?(e(),l("span",mt,"暂无歌曲信息")):k("",!0)]),c("div",{class:"process-container",style:Y({"--bg-color":D.value[2]||H.value,"--stress-color":D.value[3]||g.value,"--process":((M=(K=a(t).songData)==null?void 0:K.player)==null?void 0:M.statePercent)||0})},null,4)])],4)]}),_:1}))}},Dt=st(_t,[["__scopeId","data-v-e3d6428b"]]);export{Dt as default};
