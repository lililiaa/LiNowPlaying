import{bR as at,aH as Q,_ as C,T as et,a0 as U,$ as ot,ap as S,aq as D,I as a,aj as o,am as s,ax as W,aB as X,an as I,aC as Z,ai as n,ak as v,b8 as H,aw as c,aE as st,al as B,ba as N}from"./index-B2dB5dia.js";import{_ as rt,a as lt}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as nt,o as w}from"./v-scale-screen-CMnKDFO9.js";const ct={class:"top-container"},it=["src"],ut={class:"info-container"},dt={class:"top-info"},gt={key:0,class:"game-info bg-box"},yt={key:1},_t={class:"song-info bg-box"},mt={key:2},vt={class:"process-box"},ht={class:"lyric-container"},pt={key:0,class:"lyric-box"},ft={class:"original"},kt={class:"translated"},Dt={key:1,class:"lyric-empty"},bt={__name:"Home4",setup(xt){const t=at(),h=Q(JSON.parse(localStorage.getItem("extraInfo"))),P=C(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=C(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),tt=C(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),b=C([]),z=et(()=>{var f,k;const l=((k=(f=t.songData)==null?void 0:f.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,i=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=t.lyricData.lyric.length-1;y>=0;y--){const m=t.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const x=parseInt(m[1])*60+parseInt(m[2]);if(i>=x){g=y;break}}}let _=0;t.lyricData.translatedLyric.length===0?_=-(g-1)*67:_=-g*100;const p=document.querySelector(".lyric-box");return p&&(p.style.transform="translateY(".concat(_,"px)")),g}),d=Q({status:"已暂停",name:"暂无歌曲"}),L=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return U(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.player)==null?void 0:i.isPaused},l=>{l?d.status="已暂停":d.status="播放中",L()}),U(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.track)==null?void 0:i.title},l=>{d.name=l,L()}),ot(()=>{L(),t.resetSongData()}),(l,i)=>(o(),S(a(nt),{width:1280,height:480,"box-style":{backgroundColor:"none"}},{default:D(()=>{var g,_,p,f,k,y,m,x,V,j,q,E,$,F,J,M,O,R,Y,A;return[s("div",{class:"main",style:W({"--theme-color":P.value,"--text-color":u.value,"--bg-color":b.value[2]||u.value,"--shadow-color":tt.value,"--stress-color":b.value[3]})},[s("div",ct,[X(s("img",{id:"cover",class:I(["cover",{changing:a(t).isChanging}]),src:(_=(g=a(t).songData)==null?void 0:g.track)==null?void 0:_.cover,alt:"封面"},null,10,it),[[Z,(f=(p=a(t).songData)==null?void 0:p.track)==null?void 0:f.cover]]),X(s("img",{class:I(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:lt,alt:""},null,2),[[Z,!((y=(k=a(t).songData)==null?void 0:k.track)!=null&&y.cover)]]),s("div",ut,[s("div",dt,[h.some(r=>r.length>0)?(o(),n("div",gt,[h[0].length>0?(o(),S(w,{key:0,color:u.value,"content-align":"center"},{default:D(()=>[H(c(h[0][0]),1)]),_:1},8,["color"])):v("",!0),h[1].length>0?(o(),n("div",yt,[st(w,{color:u.value,"content-align":"space-evenly"},{default:D(()=>[(o(!0),n(B,null,N(h[1].join(" | ").split(" "),(r,e)=>(o(),n("span",{key:e},c(r),1))),128))]),_:1},8,["color"])])):v("",!0)])):v("",!0),s("div",_t,[(x=(m=a(t).songData)==null?void 0:m.track)!=null&&x.title?(o(),S(w,{key:0,color:u.value,"is-bold":"bold"},{default:D(()=>{var r,e;return[H(c((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.title),1)]}),_:1},8,["color"])):v("",!0),(j=(V=a(t).songData)==null?void 0:V.track)!=null&&j.author?(o(),S(w,{key:1,color:u.value,"font-size":"35px"},{default:D(()=>{var r,e;return[H(c((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.author),1)]}),_:1},8,["color"])):v("",!0),!((E=(q=a(t).songData)==null?void 0:q.track)!=null&&E.title)&&!((F=($=a(t).songData)==null?void 0:$.track)!=null&&F.author)?(o(),n("span",mt,"暂无歌曲信息")):v("",!0)])]),s("div",vt,[s("span",null,c((M=(J=a(t).songData)==null?void 0:J.player)==null?void 0:M.seekbarCurrentPositionHuman),1),s("div",{class:"process-bar",style:W({"--bg-color":b.value[2]||P.value,"--stress-color":b.value[3]||u.value,"--process":((R=(O=a(t).songData)==null?void 0:O.player)==null?void 0:R.statePercent)||0})},null,4),s("span",null,c((A=(Y=a(t).songData)==null?void 0:Y.track)==null?void 0:A.durationHuman),1)])])]),s("div",ht,[a(t).lyricData.lyric.length>0?(o(),n("div",pt,[a(t).lyricData.translatedLyric.length===0?(o(!0),n(B,{key:0},N(a(t).lyricData.lyric,(r,e)=>(o(),n("div",{class:I(["lyric-line",{active:e===z.value}]),key:e},[s("span",null,c(r[2]),1)],2))),128)):(o(!0),n(B,{key:1},N(a(t).lyricData.lyric,(r,e)=>{var G,K;return o(),n("div",{class:I(["lyric-line-translated",{active:e===z.value}]),key:e},[s("span",ft,c((G=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))!=null&&G[2]?r[2]:""),1),s("span",kt,c(((K=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))==null?void 0:K[2])||r[2]),1)],2)}),128))])):(o(),n("div",Dt,"暂无歌词"))])],4)]}),_:1}))}},wt=rt(bt,[["__scopeId","data-v-80845f8b"]]);export{wt as default};
