import{bR as at,aH as Q,_ as C,T as et,a0 as U,$ as ot,ap as S,aq as D,I as a,aj as o,am as s,ax as W,aB as X,an as I,aC as Z,ai as c,ak as p,b8 as H,aw as n,aE as st,al as B,ba as N}from"./index-DX5ApwsK.js";import{_ as rt}from"./music-Def25HgW.js";import{T as lt,o as w}from"./v-scale-screen-3g-ngFXf.js";import{_ as ct}from"./plugin-vueexport-helper-DlAUqK2U.js";const nt={class:"top-container"},it=["src"],ut={class:"info-container"},dt={class:"top-info"},gt={key:0,class:"game-info bg-box"},yt={key:1},_t={class:"song-info bg-box"},mt={key:2},pt={class:"process-box"},vt={class:"lyric-container"},ht={key:0,class:"lyric-box"},ft={class:"original"},kt={class:"translated"},Dt={key:1,class:"lyric-empty"},bt={__name:"Home4",setup(xt){const t=at(),v=Q(JSON.parse(localStorage.getItem("extraInfo"))),P=C(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=C(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),tt=C(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),b=C([]),z=et(()=>{var f,k;const l=((k=(f=t.songData)==null?void 0:f.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,i=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=t.lyricData.lyric.length-1;y>=0;y--){const m=t.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const x=parseInt(m[1])*60+parseInt(m[2]);if(i>=x){g=y;break}}}let _=0;t.lyricData.translatedLyric.length===0?_=-(g-1)*67:_=-g*100;const h=document.querySelector(".lyric-box");return h&&(h.style.transform="translateY(".concat(_,"px)")),g}),d=Q({status:"已暂停",name:"暂无歌曲"}),L=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return U(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.player)==null?void 0:i.isPaused},l=>{l?d.status="已暂停":d.status="播放中",L()}),U(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.track)==null?void 0:i.title},l=>{d.name=l,L()}),ot(()=>{L(),t.resetSongData()}),(l,i)=>(o(),S(a(lt),{width:1280,height:480,"box-style":{backgroundColor:"none"}},{default:D(()=>{var g,_,h,f,k,y,m,x,V,j,q,E,$,F,J,M,O,R,Y,A;return[s("div",{class:"main",style:W({"--theme-color":P.value,"--text-color":u.value,"--bg-color":b.value[2]||u.value,"--shadow-color":tt.value,"--stress-color":b.value[3]})},[s("div",nt,[X(s("img",{id:"cover",class:I(["cover",{changing:a(t).isChanging}]),src:(_=(g=a(t).songData)==null?void 0:g.track)==null?void 0:_.cover,alt:"封面"},null,10,it),[[Z,(f=(h=a(t).songData)==null?void 0:h.track)==null?void 0:f.cover]]),X(s("img",{class:I(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:rt,alt:""},null,2),[[Z,!((y=(k=a(t).songData)==null?void 0:k.track)!=null&&y.cover)]]),s("div",ut,[s("div",dt,[v.some(r=>r.length>0)?(o(),c("div",gt,[v[0].length>0?(o(),S(w,{key:0,color:u.value,"content-align":"center"},{default:D(()=>[H(n(v[0][0]),1)]),_:1},8,["color"])):p("",!0),v[1].length>0?(o(),c("div",yt,[st(w,{color:u.value,"content-align":"space-evenly"},{default:D(()=>[(o(!0),c(B,null,N(v[1].join(" | ").split(" "),(r,e)=>(o(),c("span",{key:e},n(r),1))),128))]),_:1},8,["color"])])):p("",!0)])):p("",!0),s("div",_t,[(x=(m=a(t).songData)==null?void 0:m.track)!=null&&x.title?(o(),S(w,{key:0,color:u.value,"is-bold":"bold"},{default:D(()=>{var r,e;return[H(n((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.title),1)]}),_:1},8,["color"])):p("",!0),(j=(V=a(t).songData)==null?void 0:V.track)!=null&&j.author?(o(),S(w,{key:1,color:u.value,"font-size":"35px"},{default:D(()=>{var r,e;return[H(n((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.author),1)]}),_:1},8,["color"])):p("",!0),!((E=(q=a(t).songData)==null?void 0:q.track)!=null&&E.title)&&!((F=($=a(t).songData)==null?void 0:$.track)!=null&&F.author)?(o(),c("span",mt,"暂无歌曲信息")):p("",!0)])]),s("div",pt,[s("span",null,n((M=(J=a(t).songData)==null?void 0:J.player)==null?void 0:M.seekbarCurrentPositionHuman),1),s("div",{class:"process-bar",style:W({"--bg-color":b.value[2]||P.value,"--stress-color":b.value[3]||u.value,"--process":((R=(O=a(t).songData)==null?void 0:O.player)==null?void 0:R.statePercent)||0})},null,4),s("span",null,n((A=(Y=a(t).songData)==null?void 0:Y.track)==null?void 0:A.durationHuman),1)])])]),s("div",vt,[a(t).lyricData.lyric.length>0?(o(),c("div",ht,[a(t).lyricData.translatedLyric.length===0?(o(!0),c(B,{key:0},N(a(t).lyricData.lyric,(r,e)=>(o(),c("div",{class:I(["lyric-line",{active:e===z.value}]),key:e},[s("span",null,n(r[2]),1)],2))),128)):(o(!0),c(B,{key:1},N(a(t).lyricData.lyric,(r,e)=>{var G,K;return o(),c("div",{class:I(["lyric-line-translated",{active:e===z.value}]),key:e},[s("span",ft,n((G=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))!=null&&G[2]?r[2]:""),1),s("span",kt,n(((K=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))==null?void 0:K[2])||r[2]),1)],2)}),128))])):(o(),c("div",Dt,"暂无歌词"))])],4)]}),_:1}))}},Lt=ct(bt,[["__scopeId","data-v-9b91bd1c"]]);export{Lt as default};
