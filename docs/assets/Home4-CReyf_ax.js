import{bO as V,aG as L,_ as b,T as j,a0 as B,$ as O,ao as p,ap as y,I as a,ai as e,al as s,aw as H,aA as N,am as h,aB as P,ah as l,aj as d,by as x,av as n,aD as $,ak as C,b8 as S}from"./index-DAbHtQ07.js";import{_ as q,a as A}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as E,o as f}from"./v-scale-screen-CxEJ3D7o.js";const F={class:"top-container"},G=["src"],J={class:"info-container"},M={class:"top-info"},Y={key:0,class:"game-info bg-box"},K={key:1},Q={class:"song-info bg-box"},R={key:2},U={class:"process-box"},W={class:"lyric-container"},X={key:0,class:"lyric-box"},Z={class:"original"},tt={class:"translated"},at={key:1,class:"lyric-empty"},et={__name:"Home4",setup(st){const t=V(),g=L(JSON.parse(localStorage.getItem("extraInfo"))),I=b(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=b(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),_=b([]),T=j(()=>{const c=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,w=parseInt(c[0])*60+parseInt(c[1]);let o=-1;for(let v=t.lyricData.lyric.length-1;v>=0;v--){const D=t.lyricData.lyric[v][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(D){const z=parseInt(D[1])*60+parseInt(D[2]);if(w>=z){o=v;break}}}let r=0;t.lyricData.translatedLyric.length===0?r=-(o-1)*67:r=-o*100;const m=document.querySelector(".lyric-box");return m&&(m.style.transform=`translateY(${r}px)`),o}),u=L({status:"已暂停",name:"暂无歌曲"}),k=()=>{u.status&&u.name?document.title=u.status+" - "+u.name:document.title="歌曲组件"};return B(()=>t.songData?.player?.isPaused,c=>{c?u.status="已暂停":u.status="播放中",k()}),B(()=>t.songData?.track?.title,c=>{u.name=c,k()}),O(()=>{k(),t.resetSongData()}),(c,w)=>(e(),p(a(E),{width:"1280",height:"480","box-style":{backgroundColor:c.none}},{default:y(()=>[s("div",{class:"main",style:H({"--theme-color":I.value,"--text-color":i.value,"--bg-color":_.value[2]||i.value,"--stress-color":_.value[3]})},[s("div",F,[N(s("img",{id:"cover",class:h(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,G),[[P,a(t).songData?.track?.cover]]),N(s("img",{class:h(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:A,alt:""},null,2),[[P,!a(t).songData?.track?.cover]]),s("div",J,[s("div",M,[g.some(o=>o.length>0)?(e(),l("div",Y,[g[0].length>0?(e(),p(f,{key:0,color:i.value,"content-align":"center"},{default:y(()=>[x(n(g[0][0]),1)]),_:1},8,["color"])):d("",!0),g[1].length>0?(e(),l("div",K,[$(f,{color:i.value,"content-align":"space-evenly"},{default:y(()=>[(e(!0),l(C,null,S(g[1].join(" | ").split(" "),(o,r)=>(e(),l("span",{key:r},n(o),1))),128))]),_:1},8,["color"])])):d("",!0)])):d("",!0),s("div",Q,[a(t).songData?.track?.title?(e(),p(f,{key:0,color:i.value,"is-bold":"bold"},{default:y(()=>[x(n(a(t).songData?.track?.title),1)]),_:1},8,["color"])):d("",!0),a(t).songData?.track?.author?(e(),p(f,{key:1,color:i.value,"font-size":"35px"},{default:y(()=>[x(n(a(t).songData?.track?.author),1)]),_:1},8,["color"])):d("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),l("span",R,"暂无歌曲信息")):d("",!0)])]),s("div",U,[s("span",null,n(a(t).songData?.player?.seekbarCurrentPositionHuman),1),s("div",{class:"process-bar",style:H({"--bg-color":_.value[2]||I.value,"--stress-color":_.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4),s("span",null,n(a(t).songData?.track?.durationHuman),1)])])]),s("div",W,[a(t).lyricData.lyric.length>0?(e(),l("div",X,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(C,{key:0},S(a(t).lyricData.lyric,(o,r)=>(e(),l("div",{class:h(["lyric-line",{active:r===T.value}]),key:r},[s("span",null,n(o[2]),1)],2))),128)):(e(!0),l(C,{key:1},S(a(t).lyricData.lyric,(o,r)=>(e(),l("div",{class:h(["lyric-line-translated",{active:r===T.value}]),key:r},[s("span",Z,n(o[2]),1),s("span",tt,n(a(t).lyricData.translatedLyric.find(m=>m[1]===a(t).lyricData.lyric[r][1])?.[2]||""),1)],2))),128))])):(e(),l("div",at,"暂无歌词"))])],4)]),_:1},8,["box-style"]))}},nt=q(et,[["__scopeId","data-v-b54f959d"]]);export{nt as default};
