import{bO as at,aG as R,_ as C,T as et,a0 as U,$ as ot,ao as S,ap as D,I as a,ai as o,al as s,aw as W,aA as X,am as I,aB as Z,ah as c,aj as v,by as B,av as n,aD as st,ak as H,b8 as N}from"./index-CPwaUlES.js";import{_ as rt,a as lt}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as ct,o as w}from"./v-scale-screen-CUPzLuto.js";const nt={class:"top-container"},it=["src"],ut={class:"info-container"},dt={class:"top-info"},gt={key:0,class:"game-info bg-box"},yt={key:1},_t={class:"song-info bg-box"},mt={key:2},vt={class:"process-box"},ht={class:"lyric-container"},pt={key:0,class:"lyric-box"},ft={class:"original"},kt={class:"translated"},Dt={key:1,class:"lyric-empty"},bt={__name:"Home4",setup(xt){const t=at(),h=R(JSON.parse(localStorage.getItem("extraInfo"))),P=C(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=C(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),tt=C(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),b=C([]),z=et(()=>{var f,k;const r=((k=(f=t.songData)==null?void 0:f.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,i=parseInt(r[0])*60+parseInt(r[1]);let g=-1;for(let y=t.lyricData.lyric.length-1;y>=0;y--){const m=t.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(m){const x=parseInt(m[1])*60+parseInt(m[2]);if(i>=x){g=y;break}}}let _=0;t.lyricData.translatedLyric.length===0?_=-(g-1)*67:_=-g*100;const p=document.querySelector(".lyric-box");return p&&(p.style.transform="translateY(".concat(_,"px)")),g}),d=R({status:"已暂停",name:"暂无歌曲"}),L=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return U(()=>{var r,i;return(i=(r=t.songData)==null?void 0:r.player)==null?void 0:i.isPaused},r=>{r?d.status="已暂停":d.status="播放中",L()}),U(()=>{var r,i;return(i=(r=t.songData)==null?void 0:r.track)==null?void 0:i.title},r=>{d.name=r,L()}),ot(()=>{L(),t.resetSongData()}),(r,i)=>(o(),S(a(ct),{width:"1280",height:"480","box-style":{backgroundColor:r.none}},{default:D(()=>{var g,_,p,f,k,y,m,x,V,j,O,$,q,A,E,F,G,J,M,Y;return[s("div",{class:"main",style:W({"--theme-color":P.value,"--text-color":u.value,"--bg-color":b.value[2]||u.value,"--shadow-color":tt.value,"--stress-color":b.value[3]})},[s("div",nt,[X(s("img",{id:"cover",class:I(["cover",{changing:a(t).isChanging}]),src:(_=(g=a(t).songData)==null?void 0:g.track)==null?void 0:_.cover,alt:"封面"},null,10,it),[[Z,(f=(p=a(t).songData)==null?void 0:p.track)==null?void 0:f.cover]]),X(s("img",{class:I(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:lt,alt:""},null,2),[[Z,!((y=(k=a(t).songData)==null?void 0:k.track)!=null&&y.cover)]]),s("div",ut,[s("div",dt,[h.some(l=>l.length>0)?(o(),c("div",gt,[h[0].length>0?(o(),S(w,{key:0,color:u.value,"content-align":"center"},{default:D(()=>[B(n(h[0][0]),1)]),_:1},8,["color"])):v("",!0),h[1].length>0?(o(),c("div",yt,[st(w,{color:u.value,"content-align":"space-evenly"},{default:D(()=>[(o(!0),c(H,null,N(h[1].join(" | ").split(" "),(l,e)=>(o(),c("span",{key:e},n(l),1))),128))]),_:1},8,["color"])])):v("",!0)])):v("",!0),s("div",_t,[(x=(m=a(t).songData)==null?void 0:m.track)!=null&&x.title?(o(),S(w,{key:0,color:u.value,"is-bold":"bold"},{default:D(()=>{var l,e;return[B(n((e=(l=a(t).songData)==null?void 0:l.track)==null?void 0:e.title),1)]}),_:1},8,["color"])):v("",!0),(j=(V=a(t).songData)==null?void 0:V.track)!=null&&j.author?(o(),S(w,{key:1,color:u.value,"font-size":"35px"},{default:D(()=>{var l,e;return[B(n((e=(l=a(t).songData)==null?void 0:l.track)==null?void 0:e.author),1)]}),_:1},8,["color"])):v("",!0),!(($=(O=a(t).songData)==null?void 0:O.track)!=null&&$.title)&&!((A=(q=a(t).songData)==null?void 0:q.track)!=null&&A.author)?(o(),c("span",mt,"暂无歌曲信息")):v("",!0)])]),s("div",vt,[s("span",null,n((F=(E=a(t).songData)==null?void 0:E.player)==null?void 0:F.seekbarCurrentPositionHuman),1),s("div",{class:"process-bar",style:W({"--bg-color":b.value[2]||P.value,"--stress-color":b.value[3]||u.value,"--process":((J=(G=a(t).songData)==null?void 0:G.player)==null?void 0:J.statePercent)||0})},null,4),s("span",null,n((Y=(M=a(t).songData)==null?void 0:M.track)==null?void 0:Y.durationHuman),1)])])]),s("div",ht,[a(t).lyricData.lyric.length>0?(o(),c("div",pt,[a(t).lyricData.translatedLyric.length===0?(o(!0),c(H,{key:0},N(a(t).lyricData.lyric,(l,e)=>(o(),c("div",{class:I(["lyric-line",{active:e===z.value}]),key:e},[s("span",null,n(l[2]),1)],2))),128)):(o(!0),c(H,{key:1},N(a(t).lyricData.lyric,(l,e)=>{var K,Q;return o(),c("div",{class:I(["lyric-line-translated",{active:e===z.value}]),key:e},[s("span",ft,n((K=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))!=null&&K[2]?l[2]:""),1),s("span",kt,n(((Q=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))==null?void 0:Q[2])||l[2]),1)],2)}),128))])):(o(),c("div",Dt,"暂无歌词"))])],4)]}),_:1},8,["box-style"]))}},wt=rt(bt,[["__scopeId","data-v-cab426d1"]]);export{wt as default};
