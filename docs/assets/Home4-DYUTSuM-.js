import{c2 as at,aK as Q,a1 as C,X as et,a3 as R,a2 as ot,as as S,at as D,L as a,am as o,ap as s,aA as U,aE as W,aq as I,aF as Z,al as c,an as p,bb as H,az as n,aH as st,ao as z,bd as N}from"./index-BMNJuAuZ.js";import{_ as rt}from"./music-Def25HgW.js";import{T as lt,o as w}from"./v-scale-screen-B19svEsK.js";import{_ as ct}from"./plugin-vueexport-helper-DlAUqK2U.js";const nt={class:"top-container"},it=["src"],ut={class:"info-container"},dt={class:"top-info"},gt={key:0,class:"game-info bg-box"},yt={key:1},mt={class:"song-info bg-box"},_t={key:2},pt={class:"process-box"},vt={class:"lyric-container"},ht={key:0,class:"lyric-box"},ft={class:"original"},kt={class:"translated"},Dt={key:1,class:"lyric-empty"},bt={__name:"Home4",setup(xt){const t=at(),v=Q(JSON.parse(localStorage.getItem("extraInfo"))),P=C(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),u=C(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),tt=C(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),b=C([]),B=et(()=>{var f,k;const l=((k=(f=t.songData)==null?void 0:f.player)==null?void 0:k.seekbarCurrentPositionHuman.split(":"))||0,i=parseInt(l[0])*60+parseInt(l[1]);let g=-1;for(let y=t.lyricData.lyric.length-1;y>=0;y--){const _=t.lyricData.lyric[y][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(_){const x=parseInt(_[1])*60+parseInt(_[2]);if(i>=x){g=y;break}}}let m=0;t.lyricData.translatedLyric.length===0?m=-(g-1)*67:m=-g*100;const h=document.querySelector(".lyric-box");return h&&(h.style.transform="translateY(".concat(m,"px)")),g}),d=Q({status:"已暂停",name:"暂无歌曲"}),L=()=>{d.status&&d.name?document.title=d.status+" - "+d.name:document.title="歌曲组件"};return R(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.player)==null?void 0:i.isPaused},l=>{l?d.status="已暂停":d.status="播放中",L()}),R(()=>{var l,i;return(i=(l=t.songData)==null?void 0:l.track)==null?void 0:i.title},l=>{d.name=l,L()}),ot(()=>{L(),t.resetSongData()}),(l,i)=>(o(),S(a(lt),{width:1280,height:480,"box-style":{backgroundColor:"none"}},{default:D(()=>{var g,m,h,f,k,y,_,x,V,q,E,F,j,A,J,K,M,O,X,Y;return[s("div",{class:"main",style:U({"--theme-color":P.value,"--text-color":u.value,"--bg-color":b.value[2]||u.value,"--shadow-color":tt.value,"--stress-color":b.value[3]})},[s("div",nt,[W(s("img",{id:"cover",class:I(["cover",{changing:a(t).isChanging}]),src:(m=(g=a(t).songData)==null?void 0:g.track)==null?void 0:m.cover,alt:"封面"},null,10,it),[[Z,(f=(h=a(t).songData)==null?void 0:h.track)==null?void 0:f.cover]]),W(s("img",{class:I(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:rt,alt:""},null,2),[[Z,!((y=(k=a(t).songData)==null?void 0:k.track)!=null&&y.cover)]]),s("div",ut,[s("div",dt,[v.some(r=>r.length>0)?(o(),c("div",gt,[v[0].length>0?(o(),S(w,{key:0,color:u.value,"content-align":"center"},{default:D(()=>[H(n(v[0][0]),1)]),_:1},8,["color"])):p("",!0),v[1].length>0?(o(),c("div",yt,[st(w,{color:u.value,"content-align":"space-evenly"},{default:D(()=>[(o(!0),c(z,null,N(v[1].join(" | ").split(" "),(r,e)=>(o(),c("span",{key:e},n(r),1))),128))]),_:1},8,["color"])])):p("",!0)])):p("",!0),s("div",mt,[(x=(_=a(t).songData)==null?void 0:_.track)!=null&&x.title?(o(),S(w,{key:0,color:u.value,"is-bold":"bold"},{default:D(()=>{var r,e;return[H(n((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.title),1)]}),_:1},8,["color"])):p("",!0),(q=(V=a(t).songData)==null?void 0:V.track)!=null&&q.author?(o(),S(w,{key:1,color:u.value,"font-size":"35px"},{default:D(()=>{var r,e;return[H(n((e=(r=a(t).songData)==null?void 0:r.track)==null?void 0:e.author),1)]}),_:1},8,["color"])):p("",!0),!((F=(E=a(t).songData)==null?void 0:E.track)!=null&&F.title)&&!((A=(j=a(t).songData)==null?void 0:j.track)!=null&&A.author)?(o(),c("span",_t,"暂无歌曲信息")):p("",!0)])]),s("div",pt,[s("span",null,n((K=(J=a(t).songData)==null?void 0:J.player)==null?void 0:K.seekbarCurrentPositionHuman),1),s("div",{class:"process-bar",style:U({"--bg-color":b.value[2]||P.value,"--stress-color":b.value[3]||u.value,"--process":((O=(M=a(t).songData)==null?void 0:M.player)==null?void 0:O.statePercent)||0})},null,4),s("span",null,n((Y=(X=a(t).songData)==null?void 0:X.track)==null?void 0:Y.durationHuman),1)])])]),s("div",vt,[a(t).lyricData.lyric.length>0?(o(),c("div",ht,[a(t).lyricData.translatedLyric.length===0?(o(!0),c(z,{key:0},N(a(t).lyricData.lyric,(r,e)=>(o(),c("div",{class:I(["lyric-line",{active:e===B.value}]),key:e},[s("span",null,n(r[2]),1)],2))),128)):(o(!0),c(z,{key:1},N(a(t).lyricData.lyric,(r,e)=>{var $,G;return o(),c("div",{class:I(["lyric-line-translated",{active:e===B.value}]),key:e},[s("span",ft,n(($=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))!=null&&$[2]?r[2]:""),1),s("span",kt,n(((G=a(t).lyricData.translatedLyric.find(T=>T[1]===a(t).lyricData.lyric[e][1]))==null?void 0:G[2])||r[2]),1)],2)}),128))])):(o(),c("div",Dt,"暂无歌词"))])],4)]}),_:1}))}},Lt=ct(bt,[["__scopeId","data-v-9b91bd1c"]]);export{Lt as default};
