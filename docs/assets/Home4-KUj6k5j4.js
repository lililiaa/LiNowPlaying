import{bO as j,aG as L,_ as h,T as O,a0 as B,$,ao as p,ap as y,I as a,ai as e,al as o,aw as H,aA as N,am as k,aB as P,ah as l,aj as d,by as x,av as n,aD as q,ak as C,b8 as S}from"./index-DclibNt3.js";import{_ as A,a as E}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as F,o as f}from"./v-scale-screen-DBC_t__g.js";const G={class:"top-container"},J=["src"],M={class:"info-container"},Y={class:"top-info"},K={key:0,class:"game-info bg-box"},Q={key:1},R={class:"song-info bg-box"},U={key:2},W={class:"process-box"},X={class:"lyric-container"},Z={key:0,class:"lyric-box"},tt={class:"original"},at={class:"translated"},et={key:1,class:"lyric-empty"},ot={__name:"Home4",setup(st){const t=j(),g=L(JSON.parse(localStorage.getItem("extraInfo"))),I=h(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),i=h(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),z=h(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),m=h([]),w=O(()=>{const c=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,T=parseInt(c[0])*60+parseInt(c[1]);let s=-1;for(let v=t.lyricData.lyric.length-1;v>=0;v--){const b=t.lyricData.lyric[v][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(b){const V=parseInt(b[1])*60+parseInt(b[2]);if(T>=V){s=v;break}}}let r=0;t.lyricData.translatedLyric.length===0?r=-(s-1)*67:r=-s*100;const _=document.querySelector(".lyric-box");return _&&(_.style.transform=`translateY(${r}px)`),s}),u=L({status:"已暂停",name:"暂无歌曲"}),D=()=>{u.status&&u.name?document.title=u.status+" - "+u.name:document.title="歌曲组件"};return B(()=>t.songData?.player?.isPaused,c=>{c?u.status="已暂停":u.status="播放中",D()}),B(()=>t.songData?.track?.title,c=>{u.name=c,D()}),$(()=>{D(),t.resetSongData()}),(c,T)=>(e(),p(a(F),{width:"1280",height:"480","box-style":{backgroundColor:c.none}},{default:y(()=>[o("div",{class:"main",style:H({"--theme-color":I.value,"--text-color":i.value,"--bg-color":m.value[2]||i.value,"--shadow-color":z.value,"--stress-color":m.value[3]})},[o("div",G,[N(o("img",{id:"cover",class:k(["cover",{changing:a(t).isChanging}]),src:a(t).songData?.track?.cover,alt:"封面"},null,10,J),[[P,a(t).songData?.track?.cover]]),N(o("img",{class:k(["cover",{changing:a(t).isChanging}]),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:E,alt:""},null,2),[[P,!a(t).songData?.track?.cover]]),o("div",M,[o("div",Y,[g.some(s=>s.length>0)?(e(),l("div",K,[g[0].length>0?(e(),p(f,{key:0,color:i.value,"content-align":"center"},{default:y(()=>[x(n(g[0][0]),1)]),_:1},8,["color"])):d("",!0),g[1].length>0?(e(),l("div",Q,[q(f,{color:i.value,"content-align":"space-evenly"},{default:y(()=>[(e(!0),l(C,null,S(g[1].join(" | ").split(" "),(s,r)=>(e(),l("span",{key:r},n(s),1))),128))]),_:1},8,["color"])])):d("",!0)])):d("",!0),o("div",R,[a(t).songData?.track?.title?(e(),p(f,{key:0,color:i.value,"is-bold":"bold"},{default:y(()=>[x(n(a(t).songData?.track?.title),1)]),_:1},8,["color"])):d("",!0),a(t).songData?.track?.author?(e(),p(f,{key:1,color:i.value,"font-size":"35px"},{default:y(()=>[x(n(a(t).songData?.track?.author),1)]),_:1},8,["color"])):d("",!0),!a(t).songData?.track?.title&&!a(t).songData?.track?.author?(e(),l("span",U,"暂无歌曲信息")):d("",!0)])]),o("div",W,[o("span",null,n(a(t).songData?.player?.seekbarCurrentPositionHuman),1),o("div",{class:"process-bar",style:H({"--bg-color":m.value[2]||I.value,"--stress-color":m.value[3]||i.value,"--process":a(t).songData?.player?.statePercent||0})},null,4),o("span",null,n(a(t).songData?.track?.durationHuman),1)])])]),o("div",X,[a(t).lyricData.lyric.length>0?(e(),l("div",Z,[a(t).lyricData.translatedLyric.length===0?(e(!0),l(C,{key:0},S(a(t).lyricData.lyric,(s,r)=>(e(),l("div",{class:k(["lyric-line",{active:r===w.value}]),key:r},[o("span",null,n(s[2]),1)],2))),128)):(e(!0),l(C,{key:1},S(a(t).lyricData.lyric,(s,r)=>(e(),l("div",{class:k(["lyric-line-translated",{active:r===w.value}]),key:r},[o("span",tt,n(s[2]),1),o("span",at,n(a(t).lyricData.translatedLyric.find(_=>_[1]===a(t).lyricData.lyric[r][1])?.[2]||""),1)],2))),128))])):(e(),l("div",et,"暂无歌词"))])],4)]),_:1},8,["box-style"]))}},ct=A(ot,[["__scopeId","data-v-d184606d"]]);export{ct as default};
