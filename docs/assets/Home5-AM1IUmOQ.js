import{k as R,o as N,_ as X,L as j,O as Z,v as i,b3 as G,b4 as K,r as ee,b5 as te,b6 as se,J as ae,n as V,T as r,U as a,W as k,Z as d,u as e,Y as c,a8 as b,$ as W,a7 as m,a0 as C,a1 as P,a2 as re,a3 as oe,aa as ne,b2 as le,aC as M,D as E,C as ie,b7 as ce,X as B,a$ as L,ad as O,ah as ue,au as A,aQ as H}from"./index-wjGeIqo1.js";import{_ as de,a as pe}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as fe,g as ye,o as U}from"./cover-BGZkr9fL.js";const ge=R({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:v=>v>=0&&v<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:N(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:N([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:N(Function),default:v=>`${v}%`}}),he=j({name:"ElProgress"}),ke=j({...he,props:ge,setup(v){const t=v,g={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=Z("progress"),I=i(()=>{const s={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},u=F(t.percentage);return u.includes("gradient")?s.background=u:s.backgroundColor=u,s}),f=i(()=>(t.strokeWidth/t.width*100).toFixed(1)),_=i(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(f.value)/2}`,10):0),p=i(()=>{const s=_.value,u=t.type==="dashboard";return`
          M 50 50
          m 0 ${u?"":"-"}${s}
          a ${s} ${s} 0 1 1 0 ${u?"-":""}${s*2}
          a ${s} ${s} 0 1 1 0 ${u?"":"-"}${s*2}
          `}),y=i(()=>2*Math.PI*_.value),n=i(()=>t.type==="dashboard"?.75:1),l=i(()=>`${-1*y.value*(1-n.value)/2}px`),D=i(()=>({strokeDasharray:`${y.value*n.value}px, ${y.value}px`,strokeDashoffset:l.value})),w=i(()=>({strokeDasharray:`${y.value*n.value*(t.percentage/100)}px, ${y.value}px`,strokeDashoffset:l.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),x=i(()=>{let s;return t.color?s=F(t.percentage):s=g[t.status]||g.default,s}),T=i(()=>t.status==="warning"?G:t.type==="line"?t.status==="success"?K:ee:t.status==="success"?te:se),q=i(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),z=i(()=>t.format(t.percentage));function Q(s){const u=100/s.length;return s.map((h,S)=>V(h)?{color:h,percentage:(S+1)*u}:h).sort((h,S)=>h.percentage-S.percentage)}const F=s=>{var u;const{color:$}=t;if(ae($))return $(s);if(V($))return $;{const h=Q($);for(const S of h)if(S.percentage>s)return S.color;return(u=h[h.length-1])==null?void 0:u.color}};return(s,u)=>(a(),r("div",{class:d([e(o).b(),e(o).m(s.type),e(o).is(s.status),{[e(o).m("without-text")]:!s.showText,[e(o).m("text-inside")]:s.textInside}]),role:"progressbar","aria-valuenow":s.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[s.type==="line"?(a(),r("div",{key:0,class:d(e(o).b("bar"))},[c("div",{class:d(e(o).be("bar","outer")),style:b({height:`${s.strokeWidth}px`})},[c("div",{class:d([e(o).be("bar","inner"),{[e(o).bem("bar","inner","indeterminate")]:s.indeterminate},{[e(o).bem("bar","inner","striped")]:s.striped},{[e(o).bem("bar","inner","striped-flow")]:s.stripedFlow}]),style:b(e(I))},[(s.showText||s.$slots.default)&&s.textInside?(a(),r("div",{key:0,class:d(e(o).be("bar","innerText"))},[W(s.$slots,"default",{percentage:s.percentage},()=>[c("span",null,m(e(z)),1)])],2)):k("v-if",!0)],6)],6)],2)):(a(),r("div",{key:1,class:d(e(o).b("circle")),style:b({height:`${s.width}px`,width:`${s.width}px`})},[(a(),r("svg",{viewBox:"0 0 100 100"},[c("path",{class:d(e(o).be("circle","track")),d:e(p),stroke:`var(${e(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":s.strokeLinecap,"stroke-width":e(f),fill:"none",style:b(e(D))},null,14,["d","stroke","stroke-linecap","stroke-width"]),c("path",{class:d(e(o).be("circle","path")),d:e(p),stroke:e(x),fill:"none",opacity:s.percentage?1:0,"stroke-linecap":s.strokeLinecap,"stroke-width":e(f),style:b(e(w))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(s.showText||s.$slots.default)&&!s.textInside?(a(),r("div",{key:2,class:d(e(o).e("text")),style:b({fontSize:`${e(q)}px`})},[W(s.$slots,"default",{percentage:s.percentage},()=>[s.status?(a(),C(e(oe),{key:1},{default:P(()=>[(a(),C(re(e(T))))]),_:1})):(a(),r("span",{key:0},m(e(z)),1))])],6)):k("v-if",!0)],10,["aria-valuenow"]))}});var me=X(ke,[["__file","progress.vue"]]);const ve=ne(me),be={class:"main"},_e={key:0,class:"header"},De={key:0,class:"title"},we={key:1,class:"title"},$e={key:2,class:"extra"},Se={class:"content"},xe=["src"],Ce={class:"song-info"},Ie={key:2},Pe={class:"lyric-info"},Te={key:0,class:"lyric-box"},Ne={class:"original"},Be={class:"translated"},Le={key:1,class:"lyric-empty"},J="70px",ze="60px",Y="50px",Fe={__name:"Home5",setup(v){ce(p=>({"20c1dbc3":J,"121215d2":ze,"0ea961ec":Y}));const t=le(),g=M(JSON.parse(localStorage.getItem("extraInfo"))),o=i(()=>t.songData?.player?.statePercent?(t.songData?.player?.statePercent*100).toFixed(2):0),I=i(()=>{const p=t.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,y=parseInt(p[0])*60+parseInt(p[1]);let n=-1;for(let w=t.lyricData.lyric.length-1;w>=0;w--){const x=t.lyricData.lyric[w][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(x){const T=parseInt(x[1])*60+parseInt(x[2]);if(y>=T){n=w;break}}}let l=0;t.lyricData.translatedLyric.length===0?l=-(n-1)*80:l=-n*120;const D=document.querySelector(".lyric-box");return D&&(D.style.transform=`translateY(${l}px)`),n}),f=M({status:"已暂停",name:"暂无歌曲"}),_=()=>{f.status&&f.name?document.title=f.status+" - "+f.name:document.title="歌曲组件"};return E(()=>t.songData?.player?.isPaused,p=>{p?f.status="已暂停":f.status="播放中",_()}),E(()=>t.songData?.track?.title,p=>{f.name=p,_()}),ie(()=>{_(),t.resetSongData()}),(p,y)=>(a(),C(e(fe),{width:"1880",height:"400","box-style":{backgroundColor:p.none}},{default:P(()=>[c("div",be,[g.some(n=>n.length>0)?(a(),r("div",_e,[g[0].length>0?(a(),r("span",De,m(g[0][0]),1)):k("",!0),g.every(n=>n.length>0)?(a(),r("span",we," - ")):k("",!0),g[1].length>0?(a(),r("div",$e,[(a(!0),r(B,null,L(g[1].join(" | ").split(" "),(n,l)=>(a(),r("span",{key:l},m(n),1))),128))])):k("",!0)])):k("",!0),c("div",Se,[(a(),r("div",{class:"cover",key:e(t).songData?.track?.cover},[O(c("img",{id:"cover",crossorigin:"anonymous",class:d({changing:e(t).isChanging}),style:b({"animation-play-state":e(t).songData?.player?.isPaused?"paused":"running"}),src:e(ye)(e(t).songData?.track?.cover),alt:"封面"},null,14,xe),[[A,e(t).songData?.track?.cover]]),O(c("img",{class:d({changing:e(t).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pe,alt:""},null,2),[[A,!e(t).songData?.track?.cover]]),ue(e(ve),{class:"progress-circle",type:"circle",percentage:o.value,"show-text":!1,width:"210",color:"#2a3338"},null,8,["percentage"])])),c("div",Ce,[e(t).songData?.track?.title?(a(),C(U,{key:0,color:"#fff","font-size":J,"is-bold":"bold"},{default:P(()=>[H(m(e(t).songData?.track?.title),1)]),_:1})):k("",!0),e(t).songData?.track?.author?(a(),C(U,{key:1,color:"#fff","font-size":Y},{default:P(()=>[H(m(e(t).songData?.track?.author),1)]),_:1})):k("",!0),!e(t).songData?.track?.title&&!e(t).songData?.track?.author?(a(),r("span",Ie,"暂无歌曲信息")):k("",!0)]),y[0]||(y[0]=c("div",{class:"split"},null,-1)),c("div",Pe,[e(t).lyricData.lyric.length>0?(a(),r("div",Te,[e(t).lyricData.translatedLyric.length===0?(a(!0),r(B,{key:0},L(e(t).lyricData.lyric,(n,l)=>(a(),r("div",{class:d(["lyric-line",{active:l===I.value}]),key:l},[c("span",null,m(n[2]),1)],2))),128)):(a(!0),r(B,{key:1},L(e(t).lyricData.lyric,(n,l)=>(a(),r("div",{class:d(["lyric-line-translated",{active:l===I.value}]),key:l},[c("span",Ne,m(n[2]),1),c("span",Be,m(e(t).lyricData.translatedLyric.find(D=>D[1]===e(t).lyricData.lyric[l][1])?.[2]||""),1)],2))),128))])):(a(),r("div",Le,"暂无歌词"))])])])]),_:1},8,["box-style"]))}},Ee=de(Fe,[["__scopeId","data-v-db61ee20"]]);export{Ee as default};
