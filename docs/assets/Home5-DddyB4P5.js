import{k as R,o as N,_ as X,L as Y,O as Z,v as i,b3 as G,b4 as K,r as ee,b5 as te,b6 as se,J as ae,n as V,T as r,U as a,W as k,Z as d,u as t,Y as c,a8 as b,$ as W,a7 as m,a0 as C,a1 as P,a2 as re,a3 as oe,aa as ne,b2 as le,aC as M,D as E,C as ie,b7 as ce,X as B,a$ as L,ad as O,ah as ue,au as q,aQ as A}from"./index-BjmACIjG.js";import{_ as de,a as pe}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as fe,o as H}from"./v-scale-screen-2Epoy2Ql.js";const ye=R({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:v=>v>=0&&v<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:N(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:N([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:N(Function),default:v=>`${v}%`}}),ge=Y({name:"ElProgress"}),he=Y({...ge,props:ye,setup(v){const e=v,g={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=Z("progress"),I=i(()=>{const s={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},u=F(e.percentage);return u.includes("gradient")?s.background=u:s.backgroundColor=u,s}),f=i(()=>(e.strokeWidth/e.width*100).toFixed(1)),_=i(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(f.value)/2}`,10):0),p=i(()=>{const s=_.value,u=e.type==="dashboard";return`
          M 50 50
          m 0 ${u?"":"-"}${s}
          a ${s} ${s} 0 1 1 0 ${u?"-":""}${s*2}
          a ${s} ${s} 0 1 1 0 ${u?"":"-"}${s*2}
          `}),y=i(()=>2*Math.PI*_.value),n=i(()=>e.type==="dashboard"?.75:1),l=i(()=>`${-1*y.value*(1-n.value)/2}px`),D=i(()=>({strokeDasharray:`${y.value*n.value}px, ${y.value}px`,strokeDashoffset:l.value})),w=i(()=>({strokeDasharray:`${y.value*n.value*(e.percentage/100)}px, ${y.value}px`,strokeDashoffset:l.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),x=i(()=>{let s;return e.color?s=F(e.percentage):s=g[e.status]||g.default,s}),T=i(()=>e.status==="warning"?G:e.type==="line"?e.status==="success"?K:ee:e.status==="success"?te:se),j=i(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),z=i(()=>e.format(e.percentage));function Q(s){const u=100/s.length;return s.map((h,S)=>V(h)?{color:h,percentage:(S+1)*u}:h).sort((h,S)=>h.percentage-S.percentage)}const F=s=>{var u;const{color:$}=e;if(ae($))return $(s);if(V($))return $;{const h=Q($);for(const S of h)if(S.percentage>s)return S.color;return(u=h[h.length-1])==null?void 0:u.color}};return(s,u)=>(a(),r("div",{class:d([t(o).b(),t(o).m(s.type),t(o).is(s.status),{[t(o).m("without-text")]:!s.showText,[t(o).m("text-inside")]:s.textInside}]),role:"progressbar","aria-valuenow":s.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[s.type==="line"?(a(),r("div",{key:0,class:d(t(o).b("bar"))},[c("div",{class:d(t(o).be("bar","outer")),style:b({height:`${s.strokeWidth}px`})},[c("div",{class:d([t(o).be("bar","inner"),{[t(o).bem("bar","inner","indeterminate")]:s.indeterminate},{[t(o).bem("bar","inner","striped")]:s.striped},{[t(o).bem("bar","inner","striped-flow")]:s.stripedFlow}]),style:b(t(I))},[(s.showText||s.$slots.default)&&s.textInside?(a(),r("div",{key:0,class:d(t(o).be("bar","innerText"))},[W(s.$slots,"default",{percentage:s.percentage},()=>[c("span",null,m(t(z)),1)])],2)):k("v-if",!0)],6)],6)],2)):(a(),r("div",{key:1,class:d(t(o).b("circle")),style:b({height:`${s.width}px`,width:`${s.width}px`})},[(a(),r("svg",{viewBox:"0 0 100 100"},[c("path",{class:d(t(o).be("circle","track")),d:t(p),stroke:`var(${t(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":s.strokeLinecap,"stroke-width":t(f),fill:"none",style:b(t(D))},null,14,["d","stroke","stroke-linecap","stroke-width"]),c("path",{class:d(t(o).be("circle","path")),d:t(p),stroke:t(x),fill:"none",opacity:s.percentage?1:0,"stroke-linecap":s.strokeLinecap,"stroke-width":t(f),style:b(t(w))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(s.showText||s.$slots.default)&&!s.textInside?(a(),r("div",{key:2,class:d(t(o).e("text")),style:b({fontSize:`${t(j)}px`})},[W(s.$slots,"default",{percentage:s.percentage},()=>[s.status?(a(),C(t(oe),{key:1},{default:P(()=>[(a(),C(re(t(T))))]),_:1})):(a(),r("span",{key:0},m(t(z)),1))])],6)):k("v-if",!0)],10,["aria-valuenow"]))}});var ke=X(he,[["__file","progress.vue"]]);const me=ne(ke),ve={class:"main"},be={key:0,class:"header"},_e={key:0,class:"title"},De={key:1,class:"title"},we={key:2,class:"extra"},$e={class:"content"},Se=["src"],xe={class:"song-info"},Ce={key:2},Ie={class:"lyric-info"},Pe={key:0,class:"lyric-box"},Te={class:"original"},Ne={class:"translated"},Be={key:1,class:"lyric-empty"},J="70px",Le="60px",U="50px",ze={__name:"Home5",setup(v){ce(p=>({"2f8cf410":J,d31a0336:Le,fddcefd2:U}));const e=le(),g=M(JSON.parse(localStorage.getItem("extraInfo"))),o=i(()=>e.songData?.player?.statePercent?(e.songData?.player?.statePercent*100).toFixed(2):0),I=i(()=>{const p=e.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,y=parseInt(p[0])*60+parseInt(p[1]);let n=-1;for(let w=e.lyricData.lyric.length-1;w>=0;w--){const x=e.lyricData.lyric[w][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(x){const T=parseInt(x[1])*60+parseInt(x[2]);if(y>=T){n=w;break}}}let l=0;e.lyricData.translatedLyric.length===0?l=-(n-1)*80:l=-n*120;const D=document.querySelector(".lyric-box");return D&&(D.style.transform=`translateY(${l}px)`),n}),f=M({status:"已暂停",name:"暂无歌曲"}),_=()=>{f.status&&f.name?document.title=f.status+" - "+f.name:document.title="歌曲组件"};return E(()=>e.songData?.player?.isPaused,p=>{p?f.status="已暂停":f.status="播放中",_()}),E(()=>e.songData?.track?.title,p=>{f.name=p,_()}),ie(()=>{_(),e.resetSongData()}),(p,y)=>(a(),C(t(fe),{width:"1880",height:"400","box-style":{backgroundColor:p.none}},{default:P(()=>[c("div",ve,[g.some(n=>n.length>0)?(a(),r("div",be,[g[0].length>0?(a(),r("span",_e,m(g[0][0]),1)):k("",!0),g.every(n=>n.length>0)?(a(),r("span",De," - ")):k("",!0),g[1].length>0?(a(),r("div",we,[(a(!0),r(B,null,L(g[1].join(" | ").split(" "),(n,l)=>(a(),r("span",{key:l},m(n),1))),128))])):k("",!0)])):k("",!0),c("div",$e,[(a(),r("div",{class:"cover",key:t(e).songData?.track?.cover},[O(c("img",{id:"cover",crossorigin:"anonymous",class:d({changing:t(e).isChanging}),style:b({"animation-play-state":t(e).songData?.player?.isPaused?"paused":"running"}),src:t(e).songData?.track?.cover?t(e).songData?.track?.cover.replace("https://y.qq.com","/image"):"",alt:"封面"},null,14,Se),[[q,t(e).songData?.track?.cover]]),O(c("img",{class:d({changing:t(e).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pe,alt:""},null,2),[[q,!t(e).songData?.track?.cover]]),ue(t(me),{class:"progress-circle",type:"circle",percentage:o.value,"show-text":!1,width:"210",color:"#2a3338"},null,8,["percentage"])])),c("div",xe,[t(e).songData?.track?.title?(a(),C(H,{key:0,color:"#fff","font-size":J,"is-bold":"bold"},{default:P(()=>[A(m(t(e).songData?.track?.title),1)]),_:1})):k("",!0),t(e).songData?.track?.author?(a(),C(H,{key:1,color:"#fff","font-size":U},{default:P(()=>[A(m(t(e).songData?.track?.author),1)]),_:1})):k("",!0),!t(e).songData?.track?.title&&!t(e).songData?.track?.author?(a(),r("span",Ce,"暂无歌曲信息")):k("",!0)]),y[0]||(y[0]=c("div",{class:"split"},null,-1)),c("div",Ie,[t(e).lyricData.lyric.length>0?(a(),r("div",Pe,[t(e).lyricData.translatedLyric.length===0?(a(!0),r(B,{key:0},L(t(e).lyricData.lyric,(n,l)=>(a(),r("div",{class:d(["lyric-line",{active:l===I.value}]),key:l},[c("span",null,m(n[2]),1)],2))),128)):(a(!0),r(B,{key:1},L(t(e).lyricData.lyric,(n,l)=>(a(),r("div",{class:d(["lyric-line-translated",{active:l===I.value}]),key:l},[c("span",Te,m(n[2]),1),c("span",Ne,m(t(e).lyricData.translatedLyric.find(D=>D[1]===t(e).lyricData.lyric[l][1])?.[2]||""),1)],2))),128))])):(a(),r("div",Be,"暂无歌词"))])])])]),_:1},8,["box-style"]))}},Me=de(ze,[["__scopeId","data-v-ab5152f6"]]);export{Me as default};
