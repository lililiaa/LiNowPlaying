import{J as U,N,a8 as Y,a9 as Q,ac as K,T as i,bP as X,bQ as Z,Q as ee,bR as te,b5 as ae,a6 as se,M,ah as r,ai as s,aj as k,am as d,I as t,al as c,aw as b,an as V,av as m,ao as I,ap as T,aq as re,ar as oe,ay as ne,bO as le,aG as W,a0 as A,$ as ie,bS as ce,ak as B,b8 as z,aA as E,aD as ue,aB as O,by as H}from"./index-BG2BQUFS.js";import{_ as de,a as pe}from"./plugin-vueexport-helper-DwRewS5w.js";import{T as fe,o as j}from"./v-scale-screen-D2fU7iKV.js";const ye=U({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:v=>v>=0&&v<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:N(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:N([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:N(Function),default:v=>`${v}%`}}),ge=Q({name:"ElProgress"}),he=Q({...ge,props:ye,setup(v){const e=v,g={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=K("progress"),P=i(()=>{const a={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},u=F(e.percentage);return u.includes("gradient")?a.background=u:a.backgroundColor=u,a}),f=i(()=>(e.strokeWidth/e.width*100).toFixed(1)),_=i(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(f.value)/2}`,10):0),p=i(()=>{const a=_.value,u=e.type==="dashboard";return`
          M 50 50
          m 0 ${u?"":"-"}${a}
          a ${a} ${a} 0 1 1 0 ${u?"-":""}${a*2}
          a ${a} ${a} 0 1 1 0 ${u?"":"-"}${a*2}
          `}),y=i(()=>2*Math.PI*_.value),n=i(()=>e.type==="dashboard"?.75:1),l=i(()=>`${-1*y.value*(1-n.value)/2}px`),D=i(()=>({strokeDasharray:`${y.value*n.value}px, ${y.value}px`,strokeDashoffset:l.value})),w=i(()=>({strokeDasharray:`${y.value*n.value*(e.percentage/100)}px, ${y.value}px`,strokeDashoffset:l.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),x=i(()=>{let a;return e.color?a=F(e.percentage):a=g[e.status]||g.default,a}),C=i(()=>e.status==="warning"?X:e.type==="line"?e.status==="success"?Z:ee:e.status==="success"?te:ae),R=i(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),L=i(()=>e.format(e.percentage));function G(a){const u=100/a.length;return a.map((h,$)=>M(h)?{color:h,percentage:($+1)*u}:h).sort((h,$)=>h.percentage-$.percentage)}const F=a=>{var u;const{color:S}=e;if(se(S))return S(a);if(M(S))return S;{const h=G(S);for(const $ of h)if($.percentage>a)return $.color;return(u=h[h.length-1])==null?void 0:u.color}};return(a,u)=>(s(),r("div",{class:d([t(o).b(),t(o).m(a.type),t(o).is(a.status),{[t(o).m("without-text")]:!a.showText,[t(o).m("text-inside")]:a.textInside}]),role:"progressbar","aria-valuenow":a.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[a.type==="line"?(s(),r("div",{key:0,class:d(t(o).b("bar"))},[c("div",{class:d(t(o).be("bar","outer")),style:b({height:`${a.strokeWidth}px`})},[c("div",{class:d([t(o).be("bar","inner"),{[t(o).bem("bar","inner","indeterminate")]:a.indeterminate},{[t(o).bem("bar","inner","striped")]:a.striped},{[t(o).bem("bar","inner","striped-flow")]:a.stripedFlow}]),style:b(t(P))},[(a.showText||a.$slots.default)&&a.textInside?(s(),r("div",{key:0,class:d(t(o).be("bar","innerText"))},[V(a.$slots,"default",{percentage:a.percentage},()=>[c("span",null,m(t(L)),1)])],2)):k("v-if",!0)],6)],6)],2)):(s(),r("div",{key:1,class:d(t(o).b("circle")),style:b({height:`${a.width}px`,width:`${a.width}px`})},[(s(),r("svg",{viewBox:"0 0 100 100"},[c("path",{class:d(t(o).be("circle","track")),d:t(p),stroke:`var(${t(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":a.strokeLinecap,"stroke-width":t(f),fill:"none",style:b(t(D))},null,14,["d","stroke","stroke-linecap","stroke-width"]),c("path",{class:d(t(o).be("circle","path")),d:t(p),stroke:t(x),fill:"none",opacity:a.percentage?1:0,"stroke-linecap":a.strokeLinecap,"stroke-width":t(f),style:b(t(w))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(a.showText||a.$slots.default)&&!a.textInside?(s(),r("div",{key:2,class:d(t(o).e("text")),style:b({fontSize:`${t(R)}px`})},[V(a.$slots,"default",{percentage:a.percentage},()=>[a.status?(s(),I(t(oe),{key:1},{default:T(()=>[(s(),I(re(t(C))))]),_:1})):(s(),r("span",{key:0},m(t(L)),1))])],6)):k("v-if",!0)],10,["aria-valuenow"]))}});var ke=Y(he,[["__file","progress.vue"]]);const me=ne(ke),ve={class:"main"},be={key:0,class:"header"},_e={key:0,class:"title"},De={key:1,class:"title"},we={key:2,class:"extra"},Se={class:"content"},$e=["src"],xe={class:"song-info"},Ie={key:2},Pe={class:"lyric-info"},Te={key:0,class:"lyric-box"},Ce={class:"original"},Ne={class:"translated"},Be={key:1,class:"lyric-empty"},q="70px",ze="60px",J="50px",Le={__name:"Home5",setup(v){ce(p=>({"687a0316":q,"0b369de0":ze,"3022e588":J}));const e=le(),g=W(JSON.parse(localStorage.getItem("extraInfo"))),o=i(()=>e.songData?.player?.statePercent?(e.songData?.player?.statePercent*100).toFixed(2):0),P=i(()=>{const p=e.songData?.player?.seekbarCurrentPositionHuman.split(":")||0,y=parseInt(p[0])*60+parseInt(p[1]);let n=-1;for(let w=e.lyricData.lyric.length-1;w>=0;w--){const x=e.lyricData.lyric[w][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(x){const C=parseInt(x[1])*60+parseInt(x[2]);if(y>=C){n=w;break}}}let l=0;e.lyricData.translatedLyric.length===0?l=-(n-1)*80:l=-n*120;const D=document.querySelector(".lyric-box");return D&&(D.style.transform=`translateY(${l}px)`),n}),f=W({status:"已暂停",name:"暂无歌曲"}),_=()=>{f.status&&f.name?document.title=f.status+" - "+f.name:document.title="歌曲组件"};return A(()=>e.songData?.player?.isPaused,p=>{p?f.status="已暂停":f.status="播放中",_()}),A(()=>e.songData?.track?.title,p=>{f.name=p,_()}),ie(()=>{_(),e.resetSongData()}),(p,y)=>(s(),I(t(fe),{width:"1880",height:"400","box-style":{backgroundColor:p.none}},{default:T(()=>[c("div",ve,[g.some(n=>n.length>0)?(s(),r("div",be,[g[0].length>0?(s(),r("span",_e,m(g[0][0]),1)):k("",!0),g.every(n=>n.length>0)?(s(),r("span",De," - ")):k("",!0),g[1].length>0?(s(),r("div",we,[(s(!0),r(B,null,z(g[1].join(" | ").split(" "),(n,l)=>(s(),r("span",{key:l},m(n),1))),128))])):k("",!0)])):k("",!0),c("div",Se,[(s(),r("div",{class:"cover",key:t(e).songData?.track?.cover},[E(c("img",{id:"cover",class:d({changing:t(e).isChanging}),style:b({"animation-play-state":t(e).songData?.player?.isPaused?"paused":"running"}),src:t(e).songData?.track?.cover,alt:"封面"},null,14,$e),[[O,t(e).songData?.track?.cover]]),E(c("img",{class:d({changing:t(e).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:pe,alt:""},null,2),[[O,!t(e).songData?.track?.cover]]),ue(t(me),{class:"progress-circle",type:"circle",percentage:o.value,"show-text":!1,width:"210",color:"#2a3338"},null,8,["percentage"])])),c("div",xe,[t(e).songData?.track?.title?(s(),I(j,{key:0,color:"#fff","font-size":q,"is-bold":"bold"},{default:T(()=>[H(m(t(e).songData?.track?.title),1)]),_:1})):k("",!0),t(e).songData?.track?.author?(s(),I(j,{key:1,color:"#fff","font-size":J},{default:T(()=>[H(m(t(e).songData?.track?.author),1)]),_:1})):k("",!0),!t(e).songData?.track?.title&&!t(e).songData?.track?.author?(s(),r("span",Ie,"暂无歌曲信息")):k("",!0)]),y[0]||(y[0]=c("div",{class:"split"},null,-1)),c("div",Pe,[t(e).lyricData.lyric.length>0?(s(),r("div",Te,[t(e).lyricData.translatedLyric.length===0?(s(!0),r(B,{key:0},z(t(e).lyricData.lyric,(n,l)=>(s(),r("div",{class:d(["lyric-line",{active:l===P.value}]),key:l},[c("span",null,m(n[2]),1)],2))),128)):(s(!0),r(B,{key:1},z(t(e).lyricData.lyric,(n,l)=>(s(),r("div",{class:d(["lyric-line-translated",{active:l===P.value}]),key:l},[c("span",Ce,m(n[2]),1),c("span",Ne,m(t(e).lyricData.translatedLyric.find(D=>D[1]===t(e).lyricData.lyric[l][1])?.[2]||""),1)],2))),128))])):(s(),r("div",Be,"暂无歌词"))])])])]),_:1},8,["box-style"]))}},We=de(Le,[["__scopeId","data-v-97cde70d"]]);export{We as default};
