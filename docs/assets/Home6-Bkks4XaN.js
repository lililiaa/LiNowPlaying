import{bS as oo,av as ao,r as u,c as eo,w as U,o as to,N as C,B as p,u as t,s as d,v as s,x as V,an as X,A as so,aq as ro,p as G,ap as K,q as x,X as Q,V as b,y as no}from"./index-DUkU98TY.js";import{_ as lo}from"./music-Def25HgW.js";import{o as R}from"./overflowText-MHgtVsfW.js";import{T as co}from"./v-scale-screen-C8hdMqua.js";import{g as W,u as io}from"./cover-DzIuO3oK.js";import{_ as go}from"./plugin-vueexport-helper-DlAUqK2U.js";const _=y=>{const[a,v,n]=y.match(/\d+/g).map(Number);return(a*299+v*587+n*114)/1e3<200},uo={class:"cover"},vo=["src"],mo={style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:lo,alt:""},po={class:"song-container"},bo={key:2},_o={class:"status-container"},fo={class:"play-container"},ho={__name:"Home6",setup(y){const a=oo();ao(JSON.parse(localStorage.getItem("extraInfo")));const v=u(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),n=u(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),f=u(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),h=u([]),k=u("rgb(255, 255, 255)"),D=u("rgb(255, 255, 255)");eo(()=>{var e,o,r,l;return(o=(e=a.songData)==null?void 0:e.player)!=null&&o.statePercent?(((l=(r=a.songData)==null?void 0:r.player)==null?void 0:l.statePercent)*100).toFixed(2):0});const Y=()=>{var r,l;const e=new io,o=new Image;o.src=W((l=(r=a.songData)==null?void 0:r.track)==null?void 0:l.cover),o.onload=function(){const m=e.getColor(o);v.value="rgba(".concat(m.join(","),", 1)"),n.value="rgba(".concat(m.map(c=>255-c).join(","),", 1)"),f.value="rgba(".concat(m.map(c=>255-c).join(","),", 1)"),h.value=e.getPalette(o).map(c=>"rgba(".concat(c.join(","),", 1)")),k.value=_(v.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",D.value=_(n.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},Z=()=>{var o,r;const e=new Image;e.src=W((r=(o=a.songData)==null?void 0:o.track)==null?void 0:r.cover),e.onload=function(){k.value=_(v.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",D.value=_(n.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},S=u("");return JSON.parse(localStorage.getItem("isCustomColor"))?U(()=>{var e,o;return(o=(e=a.songData)==null?void 0:e.track)==null?void 0:o.cover},(e,o)=>{S.value=o||"/assets/icons/music.svg",e&&e!==o&&Z()}):U(()=>{var e,o;return(o=(e=a.songData)==null?void 0:e.track)==null?void 0:o.cover},(e,o)=>{S.value=o||"../assets/icons/music.svg",e&&e!==o&&Y()}),to(()=>{a.resetSongData()}),(e,o)=>(d(),C(t(co),{width:850,height:1100,"box-style":{backgroundColor:"none"}},{default:p(()=>{var r,l,m,c,w,I,N,P,z,B,T,j,H,$,q,J,O,A,E,F;return[s("div",{class:"main",style:V({"--theme-color":v.value,"--text-color":n.value,"--bg-color":h.value[2]||n.value,"--shadow-color":f.value,"--stress-color":h.value[3],"--outline-color":k.value,"--outline-color2":D.value})},[s("div",uo,[X(so(ro,{name:"slide",mode:"default"},{default:p(()=>{var i,g,L,M;return[(d(),G("img",{id:"cover",src:(g=(i=t(a).songData)==null?void 0:i.track)==null?void 0:g.cover,key:(M=(L=t(a).songData)==null?void 0:L.track)==null?void 0:M.cover,alt:"封面"},null,8,vo))]}),_:1},512),[[K,(l=(r=t(a).songData)==null?void 0:r.track)==null?void 0:l.cover]]),X(s("img",mo,null,512),[[K,!((c=(m=t(a).songData)==null?void 0:m.track)!=null&&c.cover)]])]),s("div",po,[(I=(w=t(a).songData)==null?void 0:w.track)!=null&&I.title?(d(),C(R,{key:0,color:n.value,"is-bold":"bold","font-size":"50px","content-align":"center"},{default:p(()=>{var i,g;return[Q(b((g=(i=t(a).songData)==null?void 0:i.track)==null?void 0:g.title),1)]}),_:1},8,["color"])):x("",!0),(P=(N=t(a).songData)==null?void 0:N.track)!=null&&P.author?(d(),C(R,{key:1,color:n.value,"font-size":"40px","content-align":"center"},{default:p(()=>{var i,g;return[Q(b((g=(i=t(a).songData)==null?void 0:i.track)==null?void 0:g.author),1)]}),_:1},8,["color"])):x("",!0),!((B=(z=t(a).songData)==null?void 0:z.track)!=null&&B.title)&&!((j=(T=t(a).songData)==null?void 0:T.track)!=null&&j.author)?(d(),G("span",bo,"暂无歌曲信息")):x("",!0)]),s("div",_o,[s("div",{class:"process-container",style:V({"--process":(($=(H=t(a).songData)==null?void 0:H.player)==null?void 0:$.statePercent)||0})},null,4),s("div",fo,[s("span",null,b((J=(q=t(a).songData)==null?void 0:q.player)==null?void 0:J.seekbarCurrentPositionHuman),1),s("div",{class:no(["status",{pause:(A=(O=t(a).songData)==null?void 0:O.player)==null?void 0:A.isPaused}])},[...o[0]||(o[0]=[s("div",{class:"line line1"},null,-1),s("div",{class:"line line2"},null,-1),s("div",{class:"line line3"},null,-1),s("div",{class:"line line4"},null,-1)])],2),s("span",null,b((F=(E=t(a).songData)==null?void 0:E.track)==null?void 0:F.durationHuman),1)])])],4)]}),_:1}))}},wo=go(ho,[["__scopeId","data-v-2b4f23a2"]]);export{wo as default};
