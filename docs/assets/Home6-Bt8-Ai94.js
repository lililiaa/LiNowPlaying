import{c2 as la,aK as ea,a1 as c,X as ca,a3 as f,a2 as ia,as as k,at as y,L as o,am as p,ap as s,aA as m,aE as C,aq as h,aF as x,an as S,al as ga,bb as oa,az as _}from"./index-BMNJuAuZ.js";import{_ as ua}from"./music-Def25HgW.js";import{T as da,o as sa}from"./v-scale-screen-B19svEsK.js";import{_ as ma}from"./plugin-vueexport-helper-DlAUqK2U.js";const va=i=>i||"",na=i=>{const[a,v,r]=i.match(/\d+/g).map(Number);return(a*299+v*587+r*114)/1e3<200},pa=["src"],ha=["src"],_a={class:"song-container"},ba={key:2},Da={class:"status-container"},fa={class:"play-container"},ka={__name:"Home6",setup(i){const a=la();ea(JSON.parse(localStorage.getItem("extraInfo")));const v=c(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),r=c(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),w=c(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),I=c([]),b=c("rgb(255, 255, 255)"),P=c("rgb(255, 255, 255)");ca(()=>{var t,e,n,g;return(e=(t=a.songData)==null?void 0:t.player)!=null&&e.statePercent?(((g=(n=a.songData)==null?void 0:n.player)==null?void 0:g.statePercent)*100).toFixed(2):0});const ra=()=>{var e,n;const t=new Image;t.src=va((n=(e=a.songData)==null?void 0:e.track)==null?void 0:n.cover),t.onload=function(){b.value=na(v.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",P.value=na(r.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},z=c("");f(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.track)==null?void 0:e.cover},(t,e)=>{z.value=e||"/assets/icons/music.svg",t&&t!==e&&ra()});const l=ea({status:"已暂停",name:"暂无歌曲"}),D=()=>{l.status&&l.name?document.title=l.status+" - "+l.name:document.title="歌曲组件"};return f(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.player)==null?void 0:e.isPaused},t=>{t?l.status="已暂停":l.status="播放中",D()}),f(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.track)==null?void 0:e.title},t=>{l.name=t,D()}),ia(()=>{D(),a.resetSongData()}),(t,e)=>(p(),k(o(da),{width:850,height:1100,"box-style":{backgroundColor:"none"}},{default:y(()=>{var n,g,N,B,H,T,E,F,L,q,A,J,K,M,O,U,V,X,$,j,G,Q,R,W,Y,Z,aa,ta;return[s("div",{class:"main",style:m({"--theme-color":v.value,"--text-color":r.value,"--bg-color":I.value[2]||r.value,"--shadow-color":w.value,"--stress-color":I.value[3],"--outline-color":b.value,"--outline-color2":P.value})},[s("div",{class:"cover",style:m({border:"10px solid ".concat(b.value)})},[C(s("img",{id:"cover",class:h({changing:o(a).isChanging}),style:m({"animation-play-state":(g=(n=o(a).songData)==null?void 0:n.player)!=null&&g.isPaused?"paused":"running"}),src:(B=(N=o(a).songData)==null?void 0:N.track)==null?void 0:B.cover,alt:"封面"},null,14,pa),[[x,(T=(H=o(a).songData)==null?void 0:H.track)==null?void 0:T.cover]]),C(s("img",{class:h(["old-cover",{changing:o(a).isChanging}]),style:m({"animation-play-state":(F=(E=o(a).songData)==null?void 0:E.player)!=null&&F.isPaused?"paused":"running"}),src:z.value,alt:"封面"},null,14,ha),[[x,(q=(L=o(a).songData)==null?void 0:L.track)==null?void 0:q.cover]]),C(s("img",{class:h({changing:o(a).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ua,alt:""},null,2),[[x,!((J=(A=o(a).songData)==null?void 0:A.track)!=null&&J.cover)]])],4),s("div",_a,[(M=(K=o(a).songData)==null?void 0:K.track)!=null&&M.title?(p(),k(sa,{key:0,color:r.value,"is-bold":"bold","font-size":"50px","content-align":"center"},{default:y(()=>{var u,d;return[oa(_((d=(u=o(a).songData)==null?void 0:u.track)==null?void 0:d.title),1)]}),_:1},8,["color"])):S("",!0),(U=(O=o(a).songData)==null?void 0:O.track)!=null&&U.author?(p(),k(sa,{key:1,color:r.value,"font-size":"40px","content-align":"center"},{default:y(()=>{var u,d;return[oa(_((d=(u=o(a).songData)==null?void 0:u.track)==null?void 0:d.author),1)]}),_:1},8,["color"])):S("",!0),!((X=(V=o(a).songData)==null?void 0:V.track)!=null&&X.title)&&!((j=($=o(a).songData)==null?void 0:$.track)!=null&&j.author)?(p(),ga("span",ba,"暂无歌曲信息")):S("",!0)]),s("div",Da,[s("div",{class:"process-container",style:m({"--process":((Q=(G=o(a).songData)==null?void 0:G.player)==null?void 0:Q.statePercent)||0})},null,4),s("div",fa,[s("span",null,_((W=(R=o(a).songData)==null?void 0:R.player)==null?void 0:W.seekbarCurrentPositionHuman),1),s("div",{class:h(["status",{pause:(Z=(Y=o(a).songData)==null?void 0:Y.player)==null?void 0:Z.isPaused}])},[...e[0]||(e[0]=[s("div",{class:"line line1"},null,-1),s("div",{class:"line line2"},null,-1),s("div",{class:"line line3"},null,-1),s("div",{class:"line line4"},null,-1)])],2),s("span",null,_((ta=(aa=o(a).songData)==null?void 0:aa.track)==null?void 0:ta.durationHuman),1)])])],4)]}),_:1}))}},wa=ma(ka,[["__scopeId","data-v-5e0a26b6"]]);export{wa as default};
