import{c3 as ia,aK as oa,a1 as g,X as ga,a3 as p,a2 as ua,as as w,at as P,L as o,am as b,ap as s,aA as h,aE as z,aq as _,aF as N,an as T,al as ma,bb as sa,az as f}from"./index-EYVoQ1Fb.js";import{_ as va}from"./music-Def25HgW.js";import{T as da,o as na}from"./v-scale-screen-pqug9WN0.js";import{g as ra,u as pa}from"./cover-DzIuO3oK.js";import{_ as ba}from"./plugin-vueexport-helper-DlAUqK2U.js";const D=j=>{const[e,u,r]=j.match(/\d+/g).map(Number);return(e*299+u*587+r*114)/1e3<200},ha={class:"cover"},_a=["src"],fa=["src"],Da={class:"song-container"},ka={key:2},Ca={class:"status-container"},ya={class:"play-container"},xa={__name:"Home6",setup(j){const e=ia();oa(JSON.parse(localStorage.getItem("extraInfo")));const u=g(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),r=g(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),k=g(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),C=g([]),y=g("rgb(255, 255, 255)"),x=g("rgb(255, 255, 255)");ga(()=>{var a,t,n,l;return(t=(a=e.songData)==null?void 0:a.player)!=null&&t.statePercent?(((l=(n=e.songData)==null?void 0:n.player)==null?void 0:l.statePercent)*100).toFixed(2):0});const la=()=>{var n,l;const a=new pa,t=new Image;t.src=ra((l=(n=e.songData)==null?void 0:n.track)==null?void 0:l.cover),t.onload=function(){const m=a.getColor(t);u.value="rgba(".concat(m.join(","),", 1)"),r.value="rgba(".concat(m.map(c=>255-c).join(","),", 1)"),k.value="rgba(".concat(m.map(c=>255-c).join(","),", 1)"),C.value=a.getPalette(t).map(c=>"rgba(".concat(c.join(","),", 1)")),y.value=D(u.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",x.value=D(r.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},ca=()=>{var t,n;const a=new Image;a.src=ra((n=(t=e.songData)==null?void 0:t.track)==null?void 0:n.cover),a.onload=function(){y.value=D(u.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",x.value=D(r.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},S=g("");JSON.parse(localStorage.getItem("isCustomColor"))?p(()=>{var a,t;return(t=(a=e.songData)==null?void 0:a.track)==null?void 0:t.cover},(a,t)=>{S.value=t||"/assets/icons/music.svg",a&&a!==t&&ca()}):p(()=>{var a,t;return(t=(a=e.songData)==null?void 0:a.track)==null?void 0:t.cover},(a,t)=>{S.value=t||"../assets/icons/music.svg",a&&a!==t&&la()});const i=oa({status:"已暂停",name:"暂无歌曲"}),I=()=>{i.status&&i.name?document.title=i.status+" - "+i.name:document.title="歌曲组件"};return p(()=>{var a,t;return(t=(a=e.songData)==null?void 0:a.player)==null?void 0:t.isPaused},a=>{a?i.status="已暂停":i.status="播放中",I()}),p(()=>{var a,t;return(t=(a=e.songData)==null?void 0:a.track)==null?void 0:t.title},a=>{i.name=a,I()}),ua(()=>{I(),e.resetSongData()}),(a,t)=>(b(),w(o(da),{width:850,height:1100,"box-style":{backgroundColor:"none"}},{default:P(()=>{var n,l,m,c,B,H,$,E,F,J,L,O,q,A,K,M,U,X,G,Q,R,W,Y,Z,V,aa,ta,ea;return[s("div",{class:"main",style:h({"--theme-color":u.value,"--text-color":r.value,"--bg-color":C.value[2]||r.value,"--shadow-color":k.value,"--stress-color":C.value[3],"--outline-color":y.value,"--outline-color2":x.value})},[s("div",ha,[z(s("img",{id:"cover",class:_({changing:o(e).isChanging}),style:h({"animation-play-state":(l=(n=o(e).songData)==null?void 0:n.player)!=null&&l.isPaused?"paused":"running"}),src:(c=(m=o(e).songData)==null?void 0:m.track)==null?void 0:c.cover,alt:"封面"},null,14,_a),[[N,(H=(B=o(e).songData)==null?void 0:B.track)==null?void 0:H.cover]]),z(s("img",{class:_(["old-cover",{changing:o(e).isChanging}]),style:h({"animation-play-state":(E=($=o(e).songData)==null?void 0:$.player)!=null&&E.isPaused?"paused":"running"}),src:S.value,alt:"封面"},null,14,fa),[[N,(J=(F=o(e).songData)==null?void 0:F.track)==null?void 0:J.cover]]),z(s("img",{class:_({changing:o(e).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:va,alt:""},null,2),[[N,!((O=(L=o(e).songData)==null?void 0:L.track)!=null&&O.cover)]])]),s("div",Da,[(A=(q=o(e).songData)==null?void 0:q.track)!=null&&A.title?(b(),w(na,{key:0,color:r.value,"is-bold":"bold","font-size":"50px","content-align":"center"},{default:P(()=>{var v,d;return[sa(f((d=(v=o(e).songData)==null?void 0:v.track)==null?void 0:d.title),1)]}),_:1},8,["color"])):T("",!0),(M=(K=o(e).songData)==null?void 0:K.track)!=null&&M.author?(b(),w(na,{key:1,color:r.value,"font-size":"40px","content-align":"center"},{default:P(()=>{var v,d;return[sa(f((d=(v=o(e).songData)==null?void 0:v.track)==null?void 0:d.author),1)]}),_:1},8,["color"])):T("",!0),!((X=(U=o(e).songData)==null?void 0:U.track)!=null&&X.title)&&!((Q=(G=o(e).songData)==null?void 0:G.track)!=null&&Q.author)?(b(),ma("span",ka,"暂无歌曲信息")):T("",!0)]),s("div",Ca,[s("div",{class:"process-container",style:h({"--process":((W=(R=o(e).songData)==null?void 0:R.player)==null?void 0:W.statePercent)||0})},null,4),s("div",ya,[s("span",null,f((Z=(Y=o(e).songData)==null?void 0:Y.player)==null?void 0:Z.seekbarCurrentPositionHuman),1),s("div",{class:_(["status",{pause:(aa=(V=o(e).songData)==null?void 0:V.player)==null?void 0:aa.isPaused}])},[...t[0]||(t[0]=[s("div",{class:"line line1"},null,-1),s("div",{class:"line line2"},null,-1),s("div",{class:"line line3"},null,-1),s("div",{class:"line line4"},null,-1)])],2),s("span",null,f((ea=(ta=o(e).songData)==null?void 0:ta.track)==null?void 0:ea.durationHuman),1)])])],4)]}),_:1}))}},Na=ba(xa,[["__scopeId","data-v-9eb24020"]]);export{Na as default};
