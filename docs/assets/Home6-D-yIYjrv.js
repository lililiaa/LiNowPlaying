import{c2 as la,aK as ea,a1 as u,X as ca,a3 as C,a2 as ia,as as x,at as S,L as o,am as h,ap as s,aA as _,aE as w,aq as f,aF as P,an as I,al as ga,bb as oa,az as b}from"./index-CEr3hjxw.js";import{_ as ua}from"./music-Def25HgW.js";import{T as ma,o as sa}from"./v-scale-screen-C2NCBvcj.js";import{u as da}from"./color-thief-DF3QbzqH.js";import{_ as pa}from"./plugin-vueexport-helper-DlAUqK2U.js";const va=n=>n?n.includes("y.qq.com")?n.replace("https://y.qq.com/","/qq-proxy"):n.includes("p3.music.126.net")?n.replace("http://p3.music.126.net/","/netease-proxy"):n:"",na=n=>{const[a,d,r]=n.match(/\d+/g).map(Number);return(a*299+d*587+r*114)/1e3<200},ha={class:"cover"},_a=["src"],fa=["src"],ba={class:"song-container"},Da={key:2},ya={class:"status-container"},ka={class:"play-container"},Ca={__name:"Home6",setup(n){const a=la();ea(JSON.parse(localStorage.getItem("extraInfo")));const d=u(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),r=u(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),D=u(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),y=u([]),q=u("rgb(255, 255, 255)"),z=u("rgb(255, 255, 255)");ca(()=>{var t,e,l,c;return(e=(t=a.songData)==null?void 0:t.player)!=null&&e.statePercent?(((c=(l=a.songData)==null?void 0:l.player)==null?void 0:c.statePercent)*100).toFixed(2):0});const ra=()=>{var l,c;const t=new da,e=new Image;e.src=va((c=(l=a.songData)==null?void 0:l.track)==null?void 0:c.cover),e.onload=function(){const m=t.getColor(e);d.value="rgba(".concat(m.join(","),", 1)"),r.value="rgba(".concat(m.map(i=>255-i).join(","),", 1)"),D.value="rgba(".concat(m.map(i=>255-i).join(","),", 1)"),y.value=t.getPalette(e).map(i=>"rgba(".concat(i.join(","),", 1)")),q.value=na(d.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",z.value=na(r.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},N=u("");C(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.track)==null?void 0:e.cover},(t,e)=>{N.value=e||"../assets/icons/music.svg",t&&t!==e&&ra()});const g=ea({status:"已暂停",name:"暂无歌曲"}),k=()=>{g.status&&g.name?document.title=g.status+" - "+g.name:document.title="歌曲组件"};return C(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.player)==null?void 0:e.isPaused},t=>{t?g.status="已暂停":g.status="播放中",k()}),C(()=>{var t,e;return(e=(t=a.songData)==null?void 0:t.track)==null?void 0:e.title},t=>{g.name=t,k()}),ia(()=>{k(),a.resetSongData()}),(t,e)=>(h(),x(o(ma),{width:850,height:1100,"box-style":{backgroundColor:"none"}},{default:S(()=>{var l,c,m,i,T,j,B,H,$,E,F,L,A,J,K,M,O,U,V,X,G,Q,R,W,Y,Z,aa,ta;return[s("div",{class:"main",style:_({"--theme-color":d.value,"--text-color":r.value,"--bg-color":y.value[2]||r.value,"--shadow-color":D.value,"--stress-color":y.value[3],"--outline-color":q.value,"--outline-color2":z.value})},[s("div",ha,[w(s("img",{id:"cover",class:f({changing:o(a).isChanging}),style:_({"animation-play-state":(c=(l=o(a).songData)==null?void 0:l.player)!=null&&c.isPaused?"paused":"running"}),src:(i=(m=o(a).songData)==null?void 0:m.track)==null?void 0:i.cover,alt:"封面"},null,14,_a),[[P,(j=(T=o(a).songData)==null?void 0:T.track)==null?void 0:j.cover]]),w(s("img",{class:f(["old-cover",{changing:o(a).isChanging}]),style:_({"animation-play-state":(H=(B=o(a).songData)==null?void 0:B.player)!=null&&H.isPaused?"paused":"running"}),src:N.value,alt:"封面"},null,14,fa),[[P,(E=($=o(a).songData)==null?void 0:$.track)==null?void 0:E.cover]]),w(s("img",{class:f({changing:o(a).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ua,alt:""},null,2),[[P,!((L=(F=o(a).songData)==null?void 0:F.track)!=null&&L.cover)]])]),s("div",ba,[(J=(A=o(a).songData)==null?void 0:A.track)!=null&&J.title?(h(),x(sa,{key:0,color:r.value,"is-bold":"bold","font-size":"50px","content-align":"center"},{default:S(()=>{var p,v;return[oa(b((v=(p=o(a).songData)==null?void 0:p.track)==null?void 0:v.title),1)]}),_:1},8,["color"])):I("",!0),(M=(K=o(a).songData)==null?void 0:K.track)!=null&&M.author?(h(),x(sa,{key:1,color:r.value,"font-size":"40px","content-align":"center"},{default:S(()=>{var p,v;return[oa(b((v=(p=o(a).songData)==null?void 0:p.track)==null?void 0:v.author),1)]}),_:1},8,["color"])):I("",!0),!((U=(O=o(a).songData)==null?void 0:O.track)!=null&&U.title)&&!((X=(V=o(a).songData)==null?void 0:V.track)!=null&&X.author)?(h(),ga("span",Da,"暂无歌曲信息")):I("",!0)]),s("div",ya,[s("div",{class:"process-container",style:_({"--process":((Q=(G=o(a).songData)==null?void 0:G.player)==null?void 0:Q.statePercent)||0})},null,4),s("div",ka,[s("span",null,b((W=(R=o(a).songData)==null?void 0:R.player)==null?void 0:W.seekbarCurrentPositionHuman),1),s("div",{class:f(["status",{pause:(Z=(Y=o(a).songData)==null?void 0:Y.player)==null?void 0:Z.isPaused}])},[...e[0]||(e[0]=[s("div",{class:"line line1"},null,-1),s("div",{class:"line line2"},null,-1),s("div",{class:"line line3"},null,-1),s("div",{class:"line line4"},null,-1)])],2),s("span",null,b((ta=(aa=o(a).songData)==null?void 0:aa.track)==null?void 0:ta.durationHuman),1)])])],4)]}),_:1}))}},qa=pa(Ca,[["__scopeId","data-v-afe79554"]]);export{qa as default};
