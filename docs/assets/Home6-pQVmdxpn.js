import{bS as na,av as la,r as i,c as ca,w as aa,o as ia,N as x,B as S,u as e,s as d,v as s,x as p,an as w,y as b,ap as I,q as P,p as ga,X as oa,V as h}from"./index-DLkcM1tU.js";import{_ as ua}from"./music-Def25HgW.js";import{o as ta}from"./overflowText--V61kkcr.js";import{T as va}from"./v-scale-screen-b1uMIy6X.js";import{g as ea,u as ma}from"./cover-DzIuO3oK.js";import{_ as da}from"./plugin-vueexport-helper-DlAUqK2U.js";const _=N=>{const[a,g,n]=N.match(/\d+/g).map(Number);return(a*299+g*587+n*114)/1e3<200},pa={class:"cover"},ba=["src"],ha=["src"],_a={class:"song-container"},fa={key:2},Da={class:"status-container"},ka={class:"play-container"},Ca={__name:"Home6",setup(N){const a=na();la(JSON.parse(localStorage.getItem("extraInfo")));const g=i(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),n=i(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),f=i(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),D=i([]),k=i("rgb(255, 255, 255)"),C=i("rgb(255, 255, 255)");ca(()=>{var t,o,r,l;return(o=(t=a.songData)==null?void 0:t.player)!=null&&o.statePercent?(((l=(r=a.songData)==null?void 0:r.player)==null?void 0:l.statePercent)*100).toFixed(2):0});const sa=()=>{var r,l;const t=new ma,o=new Image;o.src=ea((l=(r=a.songData)==null?void 0:r.track)==null?void 0:l.cover),o.onload=function(){const u=t.getColor(o);g.value="rgba(".concat(u.join(","),", 1)"),n.value="rgba(".concat(u.map(c=>255-c).join(","),", 1)"),f.value="rgba(".concat(u.map(c=>255-c).join(","),", 1)"),D.value=t.getPalette(o).map(c=>"rgba(".concat(c.join(","),", 1)")),k.value=_(g.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",C.value=_(n.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},ra=()=>{var o,r;const t=new Image;t.src=ea((r=(o=a.songData)==null?void 0:o.track)==null?void 0:r.cover),t.onload=function(){k.value=_(g.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)",C.value=_(n.value)?"rgb(255, 255, 255)":"rgb(0, 0, 0)"}},y=i("");return JSON.parse(localStorage.getItem("isCustomColor"))?aa(()=>{var t,o;return(o=(t=a.songData)==null?void 0:t.track)==null?void 0:o.cover},(t,o)=>{y.value=o||"/assets/icons/music.svg",t&&t!==o&&ra()}):aa(()=>{var t,o;return(o=(t=a.songData)==null?void 0:t.track)==null?void 0:o.cover},(t,o)=>{y.value=o||"../assets/icons/music.svg",t&&t!==o&&sa()}),ia(()=>{a.resetSongData()}),(t,o)=>(d(),x(e(va),{width:850,height:1100,"box-style":{backgroundColor:"none"}},{default:S(()=>{var r,l,u,c,z,B,j,H,T,$,J,O,q,E,F,L,M,U,X,A,G,K,Q,R,V,W,Y,Z;return[s("div",{class:"main",style:p({"--theme-color":g.value,"--text-color":n.value,"--bg-color":D.value[2]||n.value,"--shadow-color":f.value,"--stress-color":D.value[3],"--outline-color":k.value,"--outline-color2":C.value})},[s("div",pa,[w(s("img",{id:"cover",class:b({changing:e(a).isChanging}),style:p({"animation-play-state":(l=(r=e(a).songData)==null?void 0:r.player)!=null&&l.isPaused?"paused":"running"}),src:(c=(u=e(a).songData)==null?void 0:u.track)==null?void 0:c.cover,alt:"封面"},null,14,ba),[[I,(B=(z=e(a).songData)==null?void 0:z.track)==null?void 0:B.cover]]),w(s("img",{class:b(["old-cover",{changing:e(a).isChanging}]),style:p({"animation-play-state":(H=(j=e(a).songData)==null?void 0:j.player)!=null&&H.isPaused?"paused":"running"}),src:y.value,alt:"封面"},null,14,ha),[[I,($=(T=e(a).songData)==null?void 0:T.track)==null?void 0:$.cover]]),w(s("img",{class:b({changing:e(a).isChanging}),style:{"box-sizing":"border-box",padding:"30px",color:"#fff"},src:ua,alt:""},null,2),[[I,!((O=(J=e(a).songData)==null?void 0:J.track)!=null&&O.cover)]])]),s("div",_a,[(E=(q=e(a).songData)==null?void 0:q.track)!=null&&E.title?(d(),x(ta,{key:0,color:n.value,"is-bold":"bold","font-size":"50px","content-align":"center"},{default:S(()=>{var v,m;return[oa(h((m=(v=e(a).songData)==null?void 0:v.track)==null?void 0:m.title),1)]}),_:1},8,["color"])):P("",!0),(L=(F=e(a).songData)==null?void 0:F.track)!=null&&L.author?(d(),x(ta,{key:1,color:n.value,"font-size":"40px","content-align":"center"},{default:S(()=>{var v,m;return[oa(h((m=(v=e(a).songData)==null?void 0:v.track)==null?void 0:m.author),1)]}),_:1},8,["color"])):P("",!0),!((U=(M=e(a).songData)==null?void 0:M.track)!=null&&U.title)&&!((A=(X=e(a).songData)==null?void 0:X.track)!=null&&A.author)?(d(),ga("span",fa,"暂无歌曲信息")):P("",!0)]),s("div",Da,[s("div",{class:"process-container",style:p({"--process":((K=(G=e(a).songData)==null?void 0:G.player)==null?void 0:K.statePercent)||0})},null,4),s("div",ka,[s("span",null,h((R=(Q=e(a).songData)==null?void 0:Q.player)==null?void 0:R.seekbarCurrentPositionHuman),1),s("div",{class:b(["status",{pause:(W=(V=e(a).songData)==null?void 0:V.player)==null?void 0:W.isPaused}])},[...o[0]||(o[0]=[s("div",{class:"line line1"},null,-1),s("div",{class:"line line2"},null,-1),s("div",{class:"line line3"},null,-1),s("div",{class:"line line4"},null,-1)])],2),s("span",null,h((Z=(Y=e(a).songData)==null?void 0:Y.track)==null?void 0:Z.durationHuman),1)])])],4)]}),_:1}))}},Na=da(Ca,[["__scopeId","data-v-585c652a"]]);export{Na as default};
