!function(){function t(a){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(a)}function a(t,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}function e(a){var e=function(a,e){if("object"!=t(a)||!a)return a;var n=a[Symbol.toPrimitive];if(void 0!==n){var i=n.call(a,e||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(a)}(a,"string");return"symbol"==t(e)?e:e+""}System.register(["./index-legacy-PKqiM25M.js","./overflowText-legacy-DbhmJUuD.js","./v-scale-screen-legacy-C3_kszPO.js","./cover-legacy-BlVuG08V.js","./plugin-vueexport-helper-legacy-DCWa1RRI.js"],function(t,e){"use strict";var n,i,r,o,c,l,s,d,u,v,h,f,p,g,m,y,x,b,w,k,D,S,j,z,C,_,I,M;return{setters:[function(t){n=t.bS,i=t.r,r=t.w,o=t.c,c=t.av,l=t.o,s=t.cn,d=t.N,u=t.B,v=t.u,h=t.cj,f=t.s,p=t.v,g=t.x,m=t.an,y=t.A,x=t.ap,b=t.aq,w=t.p,k=t.q,D=t.X,S=t.V,j=t.O},function(t){z=t.o},function(t){C=t.T},function(t){_=t.g,I=t.u},function(t){M=t._}],execute:function(){var e=document.createElement("style");e.textContent=".lyric-enter-active[data-v-3701cc83],.lyric-leave-active[data-v-3701cc83]{transition:all .3s cubic-bezier(.4,0,.2,1)}.lyric-enter-from[data-v-3701cc83],.lyric-leave-to[data-v-3701cc83]{opacity:0;transform:translateY(20px)}.main[data-v-3701cc83]{width:1700px;height:600px;margin:100px;display:flex;flex-direction:column;justify-content:center;font-family:hyp,Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif}.main .surface-container[data-v-3701cc83]{position:relative;flex:1}.main .surface-container .rain-container[data-v-3701cc83]{display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-end;position:relative;width:100%;height:100%;overflow:hidden;-webkit-mask-image:linear-gradient(to bottom,transparent,#000 50px),linear-gradient(to right,transparent,#000 100px,#000 calc(100% - 100px),transparent);mask-image:linear-gradient(to bottom,transparent,#000 50px),linear-gradient(to right,transparent,#000 100px,#000 calc(100% - 100px),transparent);-webkit-mask-composite:source-in;mask-composite:intersect;z-index:2}.main .surface-container .rain-container canvas[data-v-3701cc83]{position:absolute;top:0;left:0;z-index:5}.main .surface-container .rain-container .song-container[data-v-3701cc83]{margin-right:100px;width:1300px;overflow:hidden;font-size:50px;display:flex;align-items:flex-end;padding-bottom:10px;z-index:3;color:var(--text-color);font-size:var(--115da5fa)}.main .surface-container .rain-container .song-container .separate[data-v-3701cc83]{margin:0 5px;transition:color 2s ease}.main .surface-container .rain-container .lyric-container[data-v-3701cc83]{margin-right:100px;width:1300px;height:100px;box-sizing:border-box;padding-bottom:10px;overflow:hidden;z-index:3;display:flex;align-items:center;position:relative}.main .surface-container .rain-container .lyric-container span[data-v-3701cc83]{color:var(--text-color);transition:color 2s ease;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.main .surface-container .rain-container .lyric-container .lyric-line[data-v-3701cc83]{width:100%;font-size:var(--115da5fa)}.main .surface-container .rain-container .lyric-container .lyric-line-translated[data-v-3701cc83]{height:100%;width:100%;white-space:nowrap;position:relative}.main .surface-container .rain-container .lyric-container .lyric-line-translated .original[data-v-3701cc83]{position:absolute;top:2px;right:0;font-size:var(--317d6781);opacity:.8;filter:blur(2px)}.main .surface-container .rain-container .lyric-container .lyric-line-translated .translated[data-v-3701cc83]{position:absolute;bottom:10px;left:0;font-size:var(--18f9e78a)}.main .surface-container .rain-container .lyric-container .lyric-empty[data-v-3701cc83]{color:var(--text-color);font-size:var(--115da5fa);font-weight:700;transition:all 2s ease-in-out}.main .surface-container .street-light[data-v-3701cc83]{height:100%;width:300px;position:absolute;left:100px;top:0;display:flex;flex-direction:column;justify-content:flex-end;align-items:center}.main .surface-container .street-light div[data-v-3701cc83]{box-sizing:border-box;transition:border-color 2s ease}.main .surface-container .street-light .shade polygon[data-v-3701cc83]{fill:none;stroke:var(--theme-color);stroke-width:5px;stroke-dasharray:10 5}.main .surface-container .street-light .top[data-v-3701cc83]{width:50px;height:50px;border:5px dashed var(--theme-color);border-top:none;position:relative}.main .surface-container .street-light .top .light[data-v-3701cc83]{position:absolute;width:500px;height:400px;left:50%;top:-32px;transform:translate(-50%);background:radial-gradient(circle 150px at center 10px,var(--shadow-color) 30px,transparent);clip-path:polygon(190px 29px,310px 29px,100% 45%,100% 100%,0 100%,0 45%)}.main .surface-container .street-light .top .fade-enter-active[data-v-3701cc83],.main .surface-container .street-light .top .fade-leave-active[data-v-3701cc83]{transition:opacity 2s ease}.main .surface-container .street-light .top .fade-enter-from[data-v-3701cc83],.main .surface-container .street-light .top .fade-leave-to[data-v-3701cc83]{opacity:0}.main .surface-container .street-light .center[data-v-3701cc83]{width:25px;height:250px;border:5px dashed var(--theme-color);border-top:none;border-bottom:none}.main .surface-container .street-light .bottom[data-v-3701cc83]{width:35px;height:50px;border:5px dashed var(--theme-color);border-bottom:none}.main .curb-container[data-v-3701cc83]{width:100%;height:80px;display:flex;justify-content:space-around;box-sizing:border-box;border-top:5px dashed var(--theme-color);-webkit-mask-image:linear-gradient(to right,transparent,#000 200px,#000 calc(100% - 200px),transparent);mask-image:linear-gradient(to right,transparent,#000 200px,#000 calc(100% - 200px),transparent);transition:border-color 2s ease;z-index:2}\n/*$vite$:1*/",document.head.appendChild(e);var L={class:"surface-container"},P={class:"rain-container"},T={key:1,class:"separate"},E={key:3},H={class:"original"},W={class:"translated"},q={key:1,class:"lyric-empty"},A={class:"street-light"},F={class:"top"},O="80px",R="50px";t("default",M({__name:"Home7",setup:function(t){h(function(t){return{"115da5fa":O,"18f9e78a":"65px","317d6781":R}});var e=n(),M=i(localStorage.getItem("backgroundColor")||"rgba(0, 0, 0, 0.8)"),N=i(localStorage.getItem("textColor")||"rgba(255, 255, 255, 1)"),B=i(localStorage.getItem("shadowColor")||"rgba(255, 255, 255, 1)"),G=i([]),J=function(){return t=function t(a,e){!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvasWidth=a,this.canvasHeight=e,this.reset()},e=[{key:"reset",value:function(){this.y=Math.random()*-this.canvasHeight,Y.value.angle>=0?this.x=(1.2*Math.random()-.2)*this.canvasWidth:this.x=1.2*Math.random()*this.canvasWidth,this.length=10*Math.random()+30,this.width=1*Math.random()+3,this.speedFactor=.5*Math.random()+.7}},{key:"update",value:function(t,a){var e=t*Math.PI/180,n=Math.sin(e)*a,i=Math.cos(e)*a*this.speedFactor;this.x+=n,this.y+=i,this.y>this.canvasHeight+30&&this.reset()}},{key:"draw",value:function(t,a){var e=a*Math.PI/180,n=this.x-Math.sin(e)*this.length,i=this.y-Math.cos(e)*this.length,r=t.createLinearGradient(this.x,this.y,n,i);r.addColorStop(0,M.value),r.addColorStop(1,"rgba(255, 255, 255, 0)"),t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(n,i),t.strokeStyle=r,t.lineWidth=this.width,t.stroke()}}],e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),$=i(null),U=null,V=[],X=null,Y=i(JSON.parse(localStorage.getItem("rainConfig")||{isRain:!0,amount:100,angle:0,speed:10}));JSON.parse(localStorage.getItem("isCustomColor"))||r(function(){var t;return null===(t=e.songData)||void 0===t||null===(t=t.track)||void 0===t?void 0:t.cover},function(t,a){var n,i,r;t&&t!==a&&(i=new I,(r=new Image).src=_(null===(n=e.songData)||void 0===n||null===(n=n.track)||void 0===n?void 0:n.cover),r.onload=function(){var t=i.getColor(r);M.value="rgba(".concat(t.join(","),", 1)"),N.value="rgba(".concat(t.map(function(t){return 255-t}).join(","),", 1)"),B.value="rgba(".concat(t.map(function(t){return 255-t}).join(","),", 1)"),G.value=i.getPalette(r).map(function(t){return"rgba(".concat(t.join(","),", 1)")})})});var K=o(function(){for(var t,a=(null===(t=e.songData)||void 0===t||null===(t=t.player)||void 0===t?void 0:t.seekbarCurrentPositionHuman.split(":"))||0,n=60*parseInt(a[0])+parseInt(a[1]),i=-1,r=e.lyricData.lyric.length-1;r>=0;r--){var o=e.lyricData.lyric[r][1].match(/\[(\d+):(\d+)\.(\d+)\]/);if(o)if(n>=60*parseInt(o[1])+parseInt(o[2])){i=r;break}}return i}),Q=i(""),Z=i(""),tt=i(null);function at(t){var a=document.querySelector(".rain-container");t.width=a.clientWidth,t.height=a.clientHeight,V.forEach(function(a){a.canvasWidth=t.width,a.canvasHeight=t.height})}function et(){var t=$.value;U.clearRect(0,0,t.width,t.height),V.forEach(function(t){t.update(Y.value.angle,Y.value.speed),t.draw(U,Y.value.angle)}),X=requestAnimationFrame(et)}return r(K,function(t,a){if(e.lyricData.translatedLyric.length>0)if(-1===t)Q.value="",Z.value="";else{var n=e.lyricData.lyric[t][1],i=e.lyricData.translatedLyric.find(function(t){return t[1]===n});i&&i[2]?(Z.value=i[2],Q.value=e.lyricData.lyric[t][2]):(Z.value=e.lyricData.lyric[t][2],Q.value="")}}),c({status:"已暂停",name:"暂无歌曲"}),l(function(){e.resetSongData();var t=$.value;U=t.getContext("2d"),at(t),function(t){V=[];for(var a=0;a<Y.value.amount;a++)V.push(new J(t.width,t.height))}(t),X=requestAnimationFrame(et);var a=null;window.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(function(){at($.value)},200)})}),s(function(){X&&cancelAnimationFrame(X),window.removeEventListener("resize",function(){return at($.value)})}),function(t,a){return f(),d(v(C),{width:1900,height:800,"box-style":{backgroundColor:"none"}},{default:u(function(){return[p("div",{class:"main",style:g({"--theme-color":M.value,"--text-color":N.value,"--bg-color":G.value[2]||N.value,"--shadow-color":B.value})},[p("div",L,[p("div",P,[m(p("canvas",{id:"rainCanvas",ref_key:"rainCanvas",ref:$},null,512),[[x,Y.value.isRain]]),y(b,{name:"lyric",mode:"out-in"},{default:u(function(){var t,a,n,i,r,o,c;return[(f(),w("div",{class:"song-container",key:null===(t=v(e).songData)||void 0===t||null===(t=t.track)||void 0===t?void 0:t.title},[null!==(a=v(e).songData)&&void 0!==a&&null!==(a=a.track)&&void 0!==a&&a.title?(f(),d(z,{key:0,color:N.value,"font-size":O,"is-bold":"bold"},{default:u(function(){var t;return[D(S(null===(t=v(e).songData)||void 0===t||null===(t=t.track)||void 0===t?void 0:t.title),1)]}),_:1},8,["color"])):k("",!0),null!==(n=v(e).songData)&&void 0!==n&&null!==(n=n.track)&&void 0!==n&&n.title&&null!==(i=v(e).songData)&&void 0!==i&&null!==(i=i.track)&&void 0!==i&&i.author?(f(),w("span",T,"-")):k("",!0),null!==(r=v(e).songData)&&void 0!==r&&null!==(r=r.track)&&void 0!==r&&r.author?(f(),d(z,{key:2,color:N.value,"font-size":R,"is-bold":"bold"},{default:u(function(){var t;return[D(S(null===(t=v(e).songData)||void 0===t||null===(t=t.track)||void 0===t?void 0:t.author),1)]}),_:1},8,["color"])):k("",!0),null!==(o=v(e).songData)&&void 0!==o&&null!==(o=o.track)&&void 0!==o&&o.title||null!==(c=v(e).songData)&&void 0!==c&&null!==(c=c.track)&&void 0!==c&&c.author?k("",!0):(f(),w("span",E,"暂无歌曲信息"))]))]}),_:1}),y(b,{name:"lyric",mode:"out-in"},{default:u(function(){var t;return[(f(),w("div",{class:"lyric-container",key:K.value},[v(e).lyricData.lyric.length>0?(f(),w(j,{key:0},[0===v(e).lyricData.translatedLyric.length?(f(),w("span",{key:0,ref_key:"lyricRef",ref:tt,class:"lyric-line"},S((null===(t=v(e).lyricData.lyric[K.value])||void 0===t?void 0:t.length)>0&&v(e).lyricData.lyric[K.value][2]||"......"),513)):(f(),w("div",{key:1,ref_key:"lyricRef",ref:tt,class:"lyric-line-translated"},[p("span",H,S(Q.value),1),p("span",W,S(Z.value),1)],512))],64)):(f(),w("span",q,"暂无歌词"))]))]}),_:1})]),p("div",A,[a[0]||(a[0]=p("svg",{width:"120",height:"60",viewBox:"0 0 120 60",class:"shade"},[p("polygon",{points:"60,10 0,55 120,55"})],-1)),p("div",F,[y(b,{name:"fade"},{default:u(function(){var t;return[(f(),w("div",{class:"light",key:null===(t=v(e).songData)||void 0===t||null===(t=t.track)||void 0===t?void 0:t.cover}))]}),_:1})]),a[1]||(a[1]=p("div",{class:"center"},null,-1)),a[2]||(a[2]=p("div",{class:"bottom"},null,-1))])]),a[3]||(a[3]=p("div",{class:"curb-container"},null,-1))],4)]}),_:1})}}},[["__scopeId","data-v-3701cc83"]]))}}})}();
