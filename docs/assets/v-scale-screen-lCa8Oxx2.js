import{j as S,av as H,r as $,o as O,au as f,cp as W,aw as M,bN as p}from"./index-rwlLbiDS.js";function N(t,r){let n;return function(...e){n&&clearTimeout(n),n=setTimeout(()=>{typeof t=="function"&&t.apply(null,e),clearTimeout(n)},r>0?r:100)}}const j=S({name:"VScaleScreen",props:{width:{type:[String,Number],default:1920},height:{type:[String,Number],default:1080},fullScreen:{type:Boolean,default:!1},autoScale:{type:[Object,Boolean],default:!0},delay:{type:Number,default:500},boxStyle:{type:Object,default:()=>({})},wrapperStyle:{type:Object,default:()=>({})},bodyOverflowHidden:{type:Boolean,default:!0}},setup(t,{slots:r}){let n;const e=H({width:0,height:0,originalWidth:0,originalHeight:0,observer:null}),v={box:{overflow:"hidden",backgroundSize:"100% 100%",backgroundColor:"#000",width:"100vw",height:"100vh"},wrapper:{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms",position:"relative",overflow:"hidden",zIndex:100,transformOrigin:"left top"}},o=$(),w=()=>new Promise(i=>{f(()=>{var a,l;t.width&&t.height?(e.width=t.width,e.height=t.height):(e.width=(a=o.value)==null?void 0:a.clientWidth,e.height=(l=o.value)==null?void 0:l.clientHeight),(!e.originalHeight||!e.originalWidth)&&(e.originalWidth=window.screen.width,e.originalHeight=window.screen.height),i()})});function b(){t.bodyOverflowHidden&&(n=document.body.style.overflow,document.body.style.overflow="hidden")}const g=()=>{e.width&&e.height?(o.value.style.width="".concat(e.width,"px"),o.value.style.height="".concat(e.height,"px")):(o.value.style.width="".concat(e.originalWidth,"px"),o.value.style.height="".concat(e.originalHeight,"px"))},m=i=>{if(!t.autoScale)return;const a=o.value.clientWidth,l=o.value.clientHeight,y=document.body.clientWidth,u=document.body.clientHeight;o.value.style.transform="scale(".concat(i,",").concat(i,")");let d=Math.max((y-a*i)/2,0),s=Math.max((u-l*i)/2,0);typeof t.autoScale=="object"&&(!t.autoScale.x&&(d=0),!t.autoScale.y&&(s=0)),o.value.style.margin="".concat(s,"px ").concat(d,"px")},h=()=>{const i=document.body.clientWidth,a=document.body.clientHeight,l=e.width||e.originalWidth,y=e.height||e.originalHeight,u=i/+l,d=a/+y;if(t.fullScreen)return o.value.style.transform="scale(".concat(u,",").concat(d,")"),!1;const s=Math.min(u,d);m(s)},c=N(async()=>{await w(),g(),h()},t.delay),x=()=>{(e.observer=new MutationObserver(()=>{c()})).observe(o.value,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0})};return O(()=>{b(),f(async()=>{await w(),g(),h(),window.addEventListener("resize",c),x()})}),W(()=>{var i;window.removeEventListener("resize",c),(i=e.observer)==null||i.disconnect(),t.bodyOverflowHidden&&(document.body.style.overflow=n)}),M(h),()=>{var i;return p("div",{className:"v-screen-box",style:{...v.box,...t.boxStyle}},[p("div",{className:"screen-wrapper",style:{...v.wrapper,...t.wrapperStyle},ref:o},(i=r.default)==null?void 0:i.call(r))])}}});export{j as T};
